2025-06-12 00:14:14,734 - INFO - 2025-06-12 00:14:14.734501 - Extracting Abs
2025-06-12 00:14:14,734 - INFO -
API: Abs -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:14:14,734 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:14:23,903 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Abs ->
        (prev_0[l] >= 0) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (prev_0[u] <= 0) ?
            (0 - prev_0[u], 0 - prev_0[l], 0 - prev_0[U], 0 - prev_0[L])
        :
            (0,
             max(prev_0[u], 0 - prev_0[l]),
             prev_0[L], // tight lower poly (can be improved depending on context)
             (prev_0[u] * prev_0[U] + (-prev_0[l]) * prev_0[L]) / (prev_0[u] - prev_0[l])
            );
}

2025-06-12 00:14:23,903 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:14:24,325 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:14:24,708 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:14:24,708 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:14:37,759 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:14:37,910 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ?
            (prev[l], prev[u], prev, prev)
        : (prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev)
        :
            (0, max(prev[u], 0 - prev[l]),
                prev,
                ((prev[u])/(prev[u]-prev[l])) * prev - ((prev[u]*prev[l])/(prev[u]-prev[l])))
}

2025-06-12 00:14:37,910 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:14:38,830 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:14:38,830 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:14:48,637 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: max is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    Abs -> (prev[l] >= 0) ?
        (prev[l], prev[u], prev, prev) :
        ((prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev) :
            (0, max(prev[u], 0 - prev[l]),
                // Lower poly: best possible is 0
                0,
                // Upper poly: two lines crossing at zero
                max(prev, 0 - prev)
            )
        );
}

2025-06-12 00:14:48,638 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:14:49,326 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:14:49,987 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:14:49,987 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:15:00,677 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:15:00,889 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ?
            (prev[l], prev[u], prev, prev)
        : (prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], (0 - prev), (0 - prev))
        :
            (0, max(prev[u], 0 - prev[l]),
             prev,
             (prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
}

2025-06-12 00:15:00,889 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:15:01,559 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:15:01,559 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:15:18,322 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:15:18,796 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:15:18,949 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 375, in visitTernary
    raise TypeMismatchException("Condition has to be boolean")
constraintflow.core.astTC.TypeMismatchException: Condition has to be boolean

Code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ?
            (prev[l], prev[u], prev, prev) :
        (prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev) :
        (
            0,
            max(prev[u], 0 - prev[l]),
            (prev >= 0) ? prev : (0 - prev),
            (prev >= 0) ? prev : (0 - prev)
        );
}

2025-06-12 00:15:18,949 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:15:18,950 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:15:32,700 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 375, in visitTernary
    raise TypeMismatchException("Condition has to be boolean")
constraintflow.core.astTC.TypeMismatchException: Condition has to be boolean

Code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ?
            (prev[l], prev[u], prev, prev)
        : (prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev)
        :
            (0, max(prev[u], 0 - prev[l]),
              (prev >= 0) ? prev : (0 - prev),
              ((prev[u] * (0 - prev[l])) / (prev[u] - prev[l])) * prev / (prev[u] - prev[l]) - ((prev[u] * (0 - prev[l])) / (prev[u] - prev[l]))
            );
}

2025-06-12 00:15:32,700 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:15:33,377 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:15:34,058 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:15:34,058 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:15:42,811 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:15:43,645 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:15:43,804 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Abs ->
        (prev_0[l] >= 0)
            ? (prev_0[l], prev_0[u], prev_0, prev_0)
        : (prev_0[u] <= 0)
            ? (-(prev_0[u]), -(prev_0[l]), -(prev_0), -(prev_0))
        : (0,
           max(prev_0[u], -prev_0[l]),
           0,
           ((prev_0[u] / (prev_0[u] - prev_0[l])) * prev_0) - ((prev_0[u]*prev_0[l]) / (prev_0[u] - prev_0[l]))
        );
}

2025-06-12 00:15:43,804 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:15:43,804 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:15:53,375 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on PolyExp and PolyExp

Code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ? (
            prev[l],
            prev[u],
            prev,
            prev
        ) : (
            (prev[u] <= 0) ? (
                0 - prev[u],
                0 - prev[l],
                0 - prev,
                0 - prev
            ) : (
                0,
                max(prev[u], 0 - prev[l]),
                prev,
                ((prev[u]) / (prev[u] - prev[l])) * prev - ((prev[l]) / (prev[u] - prev[l])) * (0 - prev)
            )
        );
}

2025-06-12 00:15:53,375 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:15:54,528 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:15:54,772 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Abs -> (prev[l] >= 0) ?
        (prev[l], prev[u], prev, prev)
    : (prev[u] <= 0) ?
        (-(prev[u]), -(prev[l]), -(prev), -(prev))
    :
        (0, max(prev[u], -prev[l]), 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
}

2025-06-12 00:15:54,772 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:15:54,772 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:16:05,358 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:05,468 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Abs -> ((prev[l] >= 0) ? (prev[l], prev[u], prev, prev) :
            (prev[u] <= 0) ? (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev) :
            (0, (prev[u] > -prev[l]) ? prev[u] : 0 - prev[l], prev,
                (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l])))
}

2025-06-12 00:16:05,468 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:05,551 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Abs ->
        (prev_0[l] >= 0) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (prev_0[u] <= 0) ?
            (0 - prev_0[u], 0 - prev_0[l], 0 - prev_0[U], 0 - prev_0[L])
        :
            (0, max(prev_0[u], 0 - prev_0[l]), 0, max(prev_0[U], 0 - prev_0[L]));
}

2025-06-12 00:16:05,551 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:05,551 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:16:24,853 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Abs -> (prev[l] >= 0)
        ? (prev[l], prev[u], prev, prev)
        : (prev[u] <= 0)
            ? (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev)
            : (0,
               max(prev[u], 0 - prev[l]),
               prev,
               ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
}

2025-06-12 00:16:24,853 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:25,249 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:25,636 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:25,636 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:16:25,636 - INFO - [Abs] Runtime: 130.90 seconds
2025-06-12 00:16:25,636 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Abs ->
        (prev[l] >= 0) ?
            (prev[l], prev[u], prev, prev)
        : (prev[u] <= 0) ?
            (0 - prev[u], 0 - prev[l], 0 - prev, 0 - prev)
        :
            (0, max(prev[u], 0 - prev[l]),
             prev,
             ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])));
}

2025-06-12 00:16:25,636 - INFO - 2025-06-12 00:16:25.636793 - Extracting Add
2025-06-12 00:16:25,636 - INFO -
API: Add -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:16:25,636 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:16:34,548 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:34,548 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:34,613 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:34,613 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:34,673 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (prev_0[l] + prev_1[l], prev_0[u] + prev_1[u], prev_0[L] + prev_1[L], prev_0[U] + prev_1[U]);
}

2025-06-12 00:16:34,674 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:34,674 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:16:39,980 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:39,980 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:40,045 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> ((prev_0[l] + prev_1[l]),
            (prev_0[u] + prev_1[u]),
            (prev_0 + prev_1),
            (prev_0 + prev_1)
    );
}

2025-06-12 00:16:40,045 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:40,105 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:40,105 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:40,105 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:16:47,049 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:16:47,049 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:47,114 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:47,114 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:47,176 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:47,176 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:47,176 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:16:52,767 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:52,767 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:52,831 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:52,832 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:52,894 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:52,894 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:52,894 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:16:59,209 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        (prev_0[l] + prev_1[l]),
        (prev_0[u] + prev_1[u]),
        (prev_0 + prev_1),
        (prev_0 + prev_1)
    );
}

2025-06-12 00:16:59,209 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:16:59,275 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:16:59,275 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:16:59,342 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:16:59,342 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:16:59,342 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:17:13,824 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        (prev_0[l] + prev_1[l]),
        (prev_0[u] + prev_1[u]),
        (prev_0[L] + prev_1[L]),
        (prev_0[U] + prev_1[U])
    );
}

2025-06-12 00:17:13,825 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:13,887 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:13,888 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:13,962 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:13,963 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:13,963 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:17:20,362 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:17:20,362 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:20,427 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:17:20,427 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:20,487 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:20,487 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:20,487 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:17:25,269 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (prev_0[l] + prev_1[l], prev_0[u] + prev_1[u], prev_0[L] + prev_1[L], prev_0[U] + prev_1[U]);
}

2025-06-12 00:17:25,269 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:25,330 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:25,330 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:25,394 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:25,394 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:25,394 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:17:31,333 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:31,334 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:31,446 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> ((prev_0[l] + prev_1[l]), (prev_0[u] + prev_1[u]), (prev_0 + prev_1), (prev_0 + prev_1));
}

2025-06-12 00:17:31,446 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:31,556 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:17:31,557 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:31,557 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:17:39,793 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:39,793 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:39,973 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 00:17:39,973 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:40,140 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:40,142 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:40,143 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:17:40,143 - INFO - [Add] Runtime: 74.51 seconds
2025-06-12 00:17:40,143 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 00:17:40,143 - INFO - 2025-06-12 00:17:40.143744 - Extracting Affine
2025-06-12 00:17:40,143 - INFO -
API: Affine -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:17:40,144 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:17:47,504 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight_i])) + curr[bias]
    );
}

2025-06-12 00:17:47,504 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:47,582 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(for i in 0..N: simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:17:47,582 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:47,651 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:17:47,651 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:47,651 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:17:54,180 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:17:54,180 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:17:54,292 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:17:54,292 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:17:54,356 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Affine -> (
        sum i . simplify_lower(prev_i, curr[weight][i]) + curr[bias],
        sum i . simplify_upper(prev_i, curr[weight][i]) + curr[bias],
        sum i . replace_lower(prev_i, curr[weight][i]) + curr[bias],
        sum i . replace_upper(prev_i, curr[weight][i]) + curr[bias]
    );
}

2025-06-12 00:17:54,356 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:17:54,356 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:18:01,375 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(idx, simplify_lower(prev_idx, curr[weight][idx])) + curr[bias],
        sum(idx, simplify_upper(prev_idx, curr[weight][idx])) + curr[bias],
        sum(idx, replace_lower(prev_idx, curr[weight][idx])) + curr[bias],
        sum(idx, replace_upper(prev_idx, curr[weight][idx])) + curr[bias]
    );
}

2025-06-12 00:18:01,376 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:01,584 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i simplify_lower(prev_i, curr[weight_i]) + curr[bias],
        sum_i simplify_upper(prev_i, curr[weight_i]) + curr[bias],
        sum_i replace_lower(prev_i, curr[weight_i]) + curr[bias],
        sum_i replace_upper(prev_i, curr[weight_i]) + curr[bias]
    );
}

2025-06-12 00:18:01,584 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:01,656 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Affine -> (
        // lower bound
        (sum over i: simplify_lower(prev_i, curr[weight][i]) ) + curr[bias],
        // upper bound
        (sum over i: simplify_upper(prev_i, curr[weight][i]) ) + curr[bias],
        // lower poly expression
        (sum over i: replace_lower(prev_i, curr[weight][i]) ) + curr[bias],
        // upper poly expression
        (sum over i: replace_upper(prev_i, curr[weight][i]) ) + curr[bias]
    );
}

2025-06-12 00:18:01,656 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:01,656 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:18:09,712 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum i=0..N (simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum i=0..N (simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum i=0..N (replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum i=0..N (replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:09,712 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:09,825 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:09,825 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:09,893 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(map(i -> simplify_lower(prev_i, curr[weight][i]), range(size(prev)))) + curr[bias],
        sum(map(i -> simplify_upper(prev_i, curr[weight][i]), range(size(prev)))) + curr[bias],
        sum(map(i -> replace_lower(prev_i, curr[weight][i]), range(size(prev)))) + curr[bias],
        sum(map(i -> replace_upper(prev_i, curr[weight][i]), range(size(prev)))) + curr[bias]
    );
}

2025-06-12 00:18:09,893 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:09,893 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:18:18,236 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine ->
        (
            sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
            sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
            sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
            sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
        );
}

2025-06-12 00:18:18,236 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:18,297 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i=0..n-1)[simplify_lower(prev_i, curr[weight_i])] + curr[bias],
        sum(i=0..n-1)[simplify_upper(prev_i, curr[weight_i])] + curr[bias],
        sum(i=0..n-1)[replace_lower(prev_i, curr[weight_i])] + curr[bias],
        sum(i=0..n-1)[replace_upper(prev_i, curr[weight_i])] + curr[bias]
    );
}

2025-06-12 00:18:18,297 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:18,362 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine ->
        (
            sum(i=0; i<N; i++) { simplify_lower(prev_i, curr[weight_i]) } + curr[bias],
            sum(i=0; i<N; i++) { simplify_upper(prev_i, curr[weight_i]) } + curr[bias],
            sum(i=0; i<N; i++) { replace_lower(prev_i, curr[weight_i]) } + curr[bias],
            sum(i=0; i<N; i++) { replace_upper(prev_i, curr[weight_i]) } + curr[bias]
        );
}

2025-06-12 00:18:18,362 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:18,362 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:18:29,750 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly {
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:29,750 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:29,877 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum i. simplify_lower(prev_i, curr[weight][i]) for i in 0..N) + curr[bias],
        (sum i. simplify_upper(prev_i, curr[weight][i]) for i in 0..N) + curr[bias],
        (sum i. replace_lower(prev_i, curr[weight][i]) for i in 0..N) + curr[bias],
        (sum i. replace_upper(prev_i, curr[weight][i]) for i in 0..N) + curr[bias]
    );
}

2025-06-12 00:18:29,878 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:30,010 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum i. simplify_lower(prev_i, curr[weight][i]) ) + curr[bias],                   // l
        (sum i. simplify_upper(prev_i, curr[weight][i]) ) + curr[bias],                   // u
        (sum i. replace_lower(prev_i, curr[weight][i]) ) + curr[bias],                    // L
        (sum i. replace_upper(prev_i, curr[weight][i]) ) + curr[bias]                     // U
    );
}

2025-06-12 00:18:30,011 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:30,011 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:18:41,938 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum i: simplify_lower(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: simplify_upper(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: replace_lower(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: replace_upper(prev_i, curr[weight_i]) ) + curr[bias]
    );
}

2025-06-12 00:18:41,939 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:42,070 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum over i: simplify_lower(prev_i, curr[weight_i]) + curr[bias],
        sum over i: simplify_upper(prev_i, curr[weight_i]) + curr[bias],
        sum over i: replace_lower(prev_i, curr[weight_i]) + curr[bias],
        sum over i: replace_upper(prev_i, curr[weight_i]) + curr[bias]
    );
}

2025-06-12 00:18:42,070 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:42,245 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
  Affine -> (
    // l: Lower bound after affine
    (range(curr[weight].length).fold(0, (acc, i) => acc + simplify_lower(prev_i, curr[weight][i])) + curr[bias]),
    // u: Upper bound after affine
    (range(curr[weight].length).fold(0, (acc, i) => acc + simplify_upper(prev_i, curr[weight][i])) + curr[bias]),
    // L: Symbolic lower poly after affine
    (range(curr[weight].length).fold(0, (acc, i) => acc + curr[weight][i] * prev_i[L]) + curr[bias]),
    // U: Symbolic upper poly after affine
    (range(curr[weight].length).fold(0, (acc, i) => acc + curr[weight][i] * prev_i[U]) + curr[bias])
  );
}

2025-06-12 00:18:42,245 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:42,245 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:18:49,435 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight_i])) + curr[bias]
    );
}

2025-06-12 00:18:49,436 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:49,550 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum forall i in prevs: simplify_lower(prev_i, curr[weight_i]) + curr[bias],
        sum forall i in prevs: simplify_upper(prev_i, curr[weight_i]) + curr[bias],
        sum forall i in prevs: replace_lower(prev_i, curr[weight_i]) + curr[bias],
        sum forall i in prevs: replace_upper(prev_i, curr[weight_i]) + curr[bias]
    );
}

2025-06-12 00:18:49,551 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:49,683 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum_{i}(simplify_lower(prev_i, curr[weight_i])) + curr[bias],
        sum_{i}(simplify_upper(prev_i, curr[weight_i])) + curr[bias],
        sum_{i}(replace_lower(prev_i, curr[weight_i])) + curr[bias],
        sum_{i}(replace_upper(prev_i, curr[weight_i])) + curr[bias]
    );
}

2025-06-12 00:18:49,683 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:49,683 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:18:57,039 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:57,040 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:18:57,204 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:57,205 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:18:57,322 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:18:57,322 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:18:57,323 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:19:07,710 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:19:07,710 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:07,869 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum i: simplify_lower(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: simplify_upper(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: replace_lower(prev_i, curr[weight_i]) ) + curr[bias],
        (sum i: replace_upper(prev_i, curr[weight_i]) ) + curr[bias]
    );
}

2025-06-12 00:19:07,869 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:07,994 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(for i in 0..N: simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:19:07,994 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:07,994 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:19:07,994 - INFO - [Affine] Runtime: 87.85 seconds
2025-06-12 00:19:07,994 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Affine -> (
        sum(for i in 0..N: simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(for i in 0..N: replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 00:19:07,994 - INFO - 2025-06-12 00:19:07.994890 - Extracting Avgpool
2025-06-12 00:19:07,994 - INFO -
API: Avgpool -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:19:07,995 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:19:15,161 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[num_inputs]) * sum(i, 0, curr[num_inputs] - 1, prev_i[l]),
        (1.0 / curr[num_inputs]) * sum(i, 0, curr[num_inputs] - 1, prev_i[u]),
        (1.0 / curr[num_inputs]) * sum(i, 0, curr[num_inputs] - 1, prev_i[L]),
        (1.0 / curr[num_inputs]) * sum(i, 0, curr[num_inputs] - 1, prev_i[U])
    );
}

2025-06-12 00:19:15,161 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:15,547 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (sum_i(prev_i[l]) / N),
        (sum_i(prev_i[u]) / N),
        ((sum_i(prev_i) / N)),
        ((sum_i(prev_i) / N))
    );
}

2025-06-12 00:19:15,548 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:15,660 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (sum i = 0 to N-1: simplify_lower(prev_i, 1.0 / N)),
        (sum i = 0 to N-1: simplify_upper(prev_i, 1.0 / N)),
        (sum i = 0 to N-1: replace_lower(prev_i, 1.0 / N)),
        (sum i = 0 to N-1: replace_upper(prev_i, 1.0 / N))
    );
}

2025-06-12 00:19:15,660 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:15,660 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:19:23,916 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 25, in visit
    return self.visitListOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 481, in visitListOp
    exptype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: prev_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (1/len(prev)) * sum([prev_i[l] for prev_i in prev]),
        (1/len(prev)) * sum([prev_i[u] for prev_i in prev]),
        (1/len(prev)) * sum([prev_i for prev_i in prev]),
        (1/len(prev)) * sum([prev_i for prev_i in prev])
    );
}

2025-06-12 00:19:23,917 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:24,034 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1 / curr[n_inputs]) * sum(i, 0, curr[n_inputs], prev_i[l]),
        (1 / curr[n_inputs]) * sum(i, 0, curr[n_inputs], prev_i[u]),
        (1 / curr[n_inputs]) * sum(i, 0, curr[n_inputs], prev_i[L]),
        (1 / curr[n_inputs]) * sum(i, 0, curr[n_inputs], prev_i[U])
    );
}

2025-06-12 00:19:24,035 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:24,225 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum(i=0 to size-1)[prev_i[l]],
        (1.0/size) * sum(i=0 to size-1)[prev_i[u]],
        (1.0/size) * sum(i=0 to size-1)[prev_i[L]],
        (1.0/size) * sum(i=0 to size-1)[prev_i[U]]
    );
}

2025-06-12 00:19:24,226 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:24,226 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:19:32,413 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum_i(prev_i[l]),
        (1.0/size) * sum_i(prev_i[u]),
        (1.0/size) * sum_i(prev_i[L]),
        (1.0/size) * sum_i(prev_i[U])
    );
}

2025-06-12 00:19:32,413 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:32,739 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: pool_size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[pool_size]) * sum_i(simplify_lower(prev_i, 1.0)),
        (1.0 / curr[pool_size]) * sum_i(simplify_upper(prev_i, 1.0)),
        (1.0 / curr[pool_size]) * sum_i(prev_i),
        (1.0 / curr[pool_size]) * sum_i(prev_i)
    );
}

2025-06-12 00:19:32,740 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:32,901 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1 / curr[size]) * sum_i(simplify_lower(prev_i, 1)),
        (1 / curr[size]) * sum_i(simplify_upper(prev_i, 1)),
        (1 / curr[size]) * sum_i(prev_i),
        (1 / curr[size]) * sum_i(prev_i)
    );
}

2025-06-12 00:19:32,902 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:32,902 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:19:44,249 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        sum(i, (1 / N) * simplify_lower(prev_i, 1)) for i in 0..N-1,
        sum(i, (1 / N) * simplify_upper(prev_i, 1)) for i in 0..N-1,
        sum(i, (1 / N) * replace_lower(prev_i, 1)) for i in 0..N-1,
        sum(i, (1 / N) * replace_upper(prev_i, 1)) for i in 0..N-1
    );
}

2025-06-12 00:19:44,249 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:45,147 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 25, in visit
    return self.visitListOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 481, in visitListOp
    exptype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: prev_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/len(prev)) * sum([prev_i[l] for prev_i in prev]),
        (1.0/len(prev)) * sum([prev_i[u] for prev_i in prev]),
        (1.0/len(prev)) * sum([prev_i[L] for prev_i in prev]),
        (1.0/len(prev)) * sum([prev_i[U] for prev_i in prev])
    );
}

2025-06-12 00:19:45,148 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:45,305 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i(simplify_lower(prev_i, 1.0)),
        (1.0 / curr[size]) * sum_i(simplify_upper(prev_i, 1.0)),
        (1.0 / curr[size]) * sum_i(prev_i),
        (1.0 / curr[size]) * sum_i(prev_i)
    );
}

2025-06-12 00:19:45,305 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:45,305 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:19:52,606 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1/size) * sum_i(prev_i[l]),
        (1/size) * sum_i(prev_i[u]),
        (1/size) * sum_i(prev_i[L]),
        (1/size) * sum_i(prev_i[U])
    );
}

2025-06-12 00:19:52,606 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:19:52,673 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[pool_size]) * sum(i, 0, curr[pool_size] - 1, prev_i[l]),
        (1.0 / curr[pool_size]) * sum(i, 0, curr[pool_size] - 1, prev_i[u]),
        (1.0 / curr[pool_size]) * sum(i, 0, curr[pool_size] - 1, prev_i[L]),
        (1.0 / curr[pool_size]) * sum(i, 0, curr[pool_size] - 1, prev_i[U])
    );
}

2025-06-12 00:19:52,673 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:19:52,749 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Avgpool -> (
        (
            (1.0 / curr[pool_size]) * (sum i:prev[i][l])
        ),
        (
            (1.0 / curr[pool_size]) * (sum i:prev[i][u])
        ),
        (
            (1.0 / curr[pool_size]) * (sum i:prev[i][L])
        ),
        (
            (1.0 / curr[pool_size]) * (sum i:prev[i][U])
        )
    );
}

2025-06-12 00:19:52,749 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:19:52,749 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:20:01,717 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/len(prev)) * sum(prev_i[l] for i in 0..len(prev)-1),
        (1.0/len(prev)) * sum(prev_i[u] for i in 0..len(prev)-1),
        (1.0/len(prev)) * sum(prev_i[L] for i in 0..len(prev)-1),
        (1.0/len(prev)) * sum(prev_i[U] for i in 0..len(prev)-1)
    );
}

2025-06-12 00:20:01,717 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:01,788 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum(prev_i[l] for i in 0..curr[size]-1),
        (1.0 / curr[size]) * sum(prev_i[u] for i in 0..curr[size]-1),
        (1.0 / curr[size]) * sum(prev_i[L] for i in 0..curr[size]-1),
        (1.0 / curr[size]) * sum(prev_i[U] for i in 0..curr[size]-1)
    );
}

2025-06-12 00:20:01,788 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:01,902 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i (prev_i[l]),
        (1.0 / curr[size]) * sum_i (prev_i[u]),
        (1.0 / curr[size]) * sum_i (prev_i[L]),
        (1.0 / curr[size]) * sum_i (prev_i[U])
    );
}

2025-06-12 00:20:01,902 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:01,902 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:20:08,557 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1.0 / curr[num_inputs]) * (prev_0[l] + prev_1[l] + ... + prev_{N-1}[l]),
        (1.0 / curr[num_inputs]) * (prev_0[u] + prev_1[u] + ... + prev_{N-1}[u]),
        (1.0 / curr[num_inputs]) * (prev_0[L] + prev_1[L] + ... + prev_{N-1}[L]),
        (1.0 / curr[num_inputs]) * (prev_0[U] + prev_1[U] + ... + prev_{N-1}[U])
    );
}

2025-06-12 00:20:08,557 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:08,627 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[N]) * sum(i=0 to curr[N]-1 ; prev_i[l]),
        (1.0 / curr[N]) * sum(i=0 to curr[N]-1 ; prev_i[u]),
        (1.0 / curr[N]) * sum(i=0 to curr[N]-1 ; prev_i[L]),
        (1.0 / curr[N]) * sum(i=0 to curr[N]-1 ; prev_i[U])
    );
}

2025-06-12 00:20:08,627 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:08,763 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1/size) * sum_i(simplify_lower(prev_i, 1)),
        (1/size) * sum_i(simplify_upper(prev_i, 1)),
        (1/size) * sum_i(prev_i),
        (1/size) * sum_i(prev_i)
    );
}

2025-06-12 00:20:08,764 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:08,764 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:20:18,137 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (sum_i(prev_i[l]) / N),
        (sum_i(prev_i[u]) / N),
        (sum_i(prev_i[L]) / N),
        (sum_i(prev_i[U]) / N)
    );
}

2025-06-12 00:20:18,137 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:18,205 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (sum i. prev_i[l]) / N,
        (sum i. prev_i[u]) / N,
        (sum i. prev_i[L]) / N,
        (sum i. prev_i[U]) / N
    );
}

2025-06-12 00:20:18,206 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:18,296 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/curr[size]) * sum_i(simplify_lower(prev_i, 1.0)),
        (1.0/curr[size]) * sum_i(simplify_upper(prev_i, 1.0)),
        (1.0/curr[size]) * sum_i(prev_i),
        (1.0/curr[size]) * sum_i(prev_i)
    );
}

2025-06-12 00:20:18,296 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:18,296 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:20:26,564 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[num_inputs]) * sum(i, simplify_lower(prev_i, 1.0)),
        (1.0 / curr[num_inputs]) * sum(i, simplify_upper(prev_i, 1.0)),
        (1.0 / curr[num_inputs]) * sum(i, prev_i),
        (1.0 / curr[num_inputs]) * sum(i, prev_i)
    );
}

2025-06-12 00:20:26,564 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:26,682 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool ->
        (sum([prev_i[l] for i in 0..n]) / n,
         sum([prev_i[u] for i in 0..n]) / n,
         sum([prev_i[L] for i in 0..n]) / n,
         sum([prev_i[U] for i in 0..n]) / n
        );
}

2025-06-12 00:20:26,682 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:26,880 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (sum_i(prev_i[l]) / N),
        (sum_i(prev_i[u]) / N),
        (sum_i(prev_i[L]) / N),
        (sum_i(prev_i[U]) / N)
    );
}

2025-06-12 00:20:26,880 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:26,880 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:20:34,911 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1/size) * sum_i(prev_i[l]),
        (1/size) * sum_i(prev_i[u]),
        (1/size) * sum_i(prev_i[L]),
        (1/size) * sum_i(prev_i[U])
    );
}

2025-06-12 00:20:34,911 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:35,016 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: pool_size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/curr[pool_size]) * sum_i(prev_i[l]),
        (1.0/curr[pool_size]) * sum_i(prev_i[u]),
        (1.0/curr[pool_size]) * sum_i(prev_i[L]),
        (1.0/curr[pool_size]) * sum_i(prev_i[U])
    );
}

2025-06-12 00:20:35,016 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:35,117 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_over_i(prev_i[l]),
        (1.0 / curr[size]) * sum_over_i(prev_i[u]),
        (1.0 / curr[size]) * sum_over_i(prev_i[L]),
        (1.0 / curr[size]) * sum_over_i(prev_i[U])
    );
}

2025-06-12 00:20:35,117 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:35,117 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:20:35,117 - INFO - [Avgpool] Runtime: 87.12 seconds
2025-06-12 00:20:35,121 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_over_i(prev_i[l]),
        (1.0 / curr[size]) * sum_over_i(prev_i[u]),
        (1.0 / curr[size]) * sum_over_i(prev_i[L]),
        (1.0 / curr[size]) * sum_over_i(prev_i[U])
    );
}

2025-06-12 00:20:35,121 - INFO - 2025-06-12 00:20:35.121329 - Extracting HardSigmoid
2025-06-12 00:20:35,121 - INFO -
API: HardSigmoid -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:20:35,121 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:20:50,258 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        (
            (prev[l] * 0.2 + 0.5).clamp(0.0, 1.0),
            (prev[u] * 0.2 + 0.5).clamp(0.0, 1.0),
            (prev * 0.2 + 0.5).clamp(0.0, 1.0),
            (prev * 0.2 + 0.5).clamp(0.0, 1.0)
        );
}

2025-06-12 00:20:50,259 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:20:50,332 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (((prev[l]) >= -2.5) & ((prev[u]) <= 2.5)) ?
            (0.2 * prev[l] + 0.5, 0.2 * prev[u] + 0.5, 0.2 * prev + 0.5, 0.2 * prev + 0.5) :
        ((prev[l]) < -2.5 & (prev[u]) > 2.5) ?
            (0, 1, 0, 1) :
        (
            max(0, 0.2 * prev[l] + 0.5),
            min(1, 0.2 * prev[u] + 0.5),
            max(0, min(1, 0.2 * prev + 0.5)),
            max(0, min(1, 0.2 * prev + 0.5))
        );
}

2025-06-12 00:20:50,333 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:20:50,401 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0)
        : ((prev[l]) >= 2.5) ? (1, 1, 1, 1)
        : ((prev[l]) >= -2.5 && (prev[u]) <= 2.5)
            ? ( (prev[l] * 0.2 + 0.5), (prev[u] * 0.2 + 0.5), (prev * 0.2 + 0.5), (prev * 0.2 + 0.5) )
            : ( max(0, prev[l]*0.2+0.5), min(1, prev[u]*0.2+0.5),
                 (prev * ((min(2.5,prev[u]) - max(-2.5,prev[l])) / (prev[u]-prev[l]))*0.2 + 0.5),
                 (prev * ((min(2.5,prev[u]) - max(-2.5,prev[l])) / (prev[u]-prev[l]))*0.2 + 0.5) );
}

2025-06-12 00:20:50,401 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:20:50,401 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:21:03,566 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:21:03,652 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3)  ? (1, 1, 1, 1) :
        ((prev[l]) >= -3 && (prev[u]) <= 3) ?
            (0.16667 * prev[l] + 0.5,
             0.16667 * prev[u] + 0.5,
             0.16667 * prev + 0.5,
             0.16667 * prev + 0.5)
        :
        ((prev[l] < -3 && prev[u] > 3) ?
            (0, 1,
             (0.5 * prev + 0.5 * 3) / (3 - prev[l]),
             (0.5 * prev - 0.5 * -3) / (prev[u] + 3))
        :
            (max(0, 0.16667 * prev[l] + 0.5),
             min(1, 0.16667 * prev[u] + 0.5),
             0.16667 * prev + 0.5,
             0.16667 * prev + 0.5));
}

2025-06-12 00:21:03,652 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:21:03,722 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
        ( /* mixed case */
            max(0, min(1, 0.2 * prev[l] + 0.5)),
            max(0, min(1, 0.2 * prev[u] + 0.5)),
            max(0, min(1, 0.2 * prev + 0.5)),
            max(0, min(1, 0.2 * prev + 0.5))
        )));
}

2025-06-12 00:21:03,722 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:21:03,722 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:21:28,331 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l]) >= 2) ? (1, 1, 1, 1) :
        ((prev[u]) <= -2) ? (0, 0, 0, 0) :
        ((prev[l]) >= -2 && (prev[u]) <= 2) ?
            (0.25 * (prev[l]) + 0.5, 0.25 * (prev[u]) + 0.5, (0.25 * prev) + 0.5, (0.25 * prev) + 0.5) :
        ((prev[l]) < -2 && (prev[u]) > 2) ?
            (0, 1,
                ((0.25 * prev + 0.5) * ((prev[u] - 2)/(prev[u] - prev[l]))) + ((prev - prev[l]) * (1/(prev[u] - prev[l]))),
                ((0.25 * prev + 0.5) * ((2 - prev[l])/(prev[u] - prev[l]))) + (((prev[u] - prev)/(prev[u] - prev[l])))
            ) :
        ((prev[l]) < -2) ?
            (0, 0.25 * (prev[u]) + 0.5,
                ((0.25 * prev + 0.5) * ((prev[u] - 2)/(prev[u] - prev[l]))) + ((prev - prev[l]) * (1/(prev[u] - prev[l]))),
                0.25 * prev + 0.5
            ) :
            (0.25 * (prev[l]) + 0.5, 1,
                0.25 * prev + 0.5,
                ((0.25 * prev + 0.5) * ((2 - prev[l])/(prev[u] - prev[l]))) + (((prev[u] - prev)/(prev[u] - prev[l]))));
}

2025-06-12 00:21:28,331 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:21:28,520 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        (prev[u] <= -2.5) ? (0, 0, 0, 0) :
        (prev[l] >= 2.5) ? (1, 1, 1, 1) :
        (
            max(0, min(1, 0.2 * prev[l] + 0.5)),
            max(0, min(1, 0.2 * prev[u] + 0.5)),
            max(0, min(1, 0.2 * prev + 0.5)),
            max(0, min(1, 0.2 * prev + 0.5))
        );
}

2025-06-12 00:21:28,520 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:21:28,673 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
      ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
      ((prev[l]) >= 2.5)  ? (1, 1, 1, 1) :
      (
        let l_slope = 0.2,
            l_intercept = 0.5,
            lower_l = max(0, l_slope * prev[l] + l_intercept),
            upper_u = min(1, l_slope * prev[u] + l_intercept),
            lower_lin = (prev[l] >= -2.5) ? (l_slope * prev[l] + l_intercept) : 0,
            upper_lin = (prev[u] <= 2.5) ? (l_slope * prev[u] + l_intercept) : 1,
            lower_poly = max(0, min(1, l_slope * prev + l_intercept)),
            upper_poly = min(1, max(0, l_slope * prev + l_intercept))
        in (lower_l, upper_u, lower_poly, upper_poly)
      );
}

2025-06-12 00:21:28,673 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:21:28,673 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:21:40,857 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l]) >= 2)             ? (1, 1, 1, 1)
      : ((prev[u]) <= -2)            ? (0, 0, 0, 0)
      : (((prev[l]) >= -2) & ((prev[u]) <= 2)) ?
            ((0.25 * prev[l] + 0.5), (0.25 * prev[u] + 0.5), (0.25 * prev + 0.5), (0.25 * prev + 0.5))
      : ((prev[l]) < -2) ?
            (0, (0.25 * prev[u] + 0.5), 0, (0.25 * prev + 0.5))
      : /* (prev[u] > 2) */
            ((0.25 * prev[l] + 0.5), 1, (0.25 * prev + 0.5), 1);
}

2025-06-12 00:21:40,857 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:21:40,921 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    HardSigmoid ->
        ((prev[u]) <= -3.0) ? (0.0, 0.0, 0.0, 0.0) :
        ((prev[l]) >= 3.0)  ? (1.0, 1.0, 1.0, 1.0)  :
        (
            (max(0.0, min(1.0, 0.16666667 * (prev[l]) + 0.5))),
            (max(0.0, min(1.0, 0.16666667 * (prev[u]) + 0.5))),
            (max(0.0, min(1.0, 0.16666667 * (prev) + 0.5))),
            (max(0.0, min(1.0, 0.16666667 * (prev) + 0.5)))
        );
}

2025-06-12 00:21:40,921 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:21:40,990 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        (prev[u] <= -2.5) ?
            (0, 0, 0, 0) :
        (prev[l] >= 2.5) ?
            (1, 1, 1, 1) :
        (
            (max(0, min(1, 0.2*prev[l] + 0.5))),
            (max(0, min(1, 0.2*prev[u] + 0.5))),
            (max(0, min(1, 0.2*prev + 0.5))),
            (max(0, min(1, 0.2*prev + 0.5)))
        );
}

2025-06-12 00:21:40,990 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:21:40,990 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:21:53,358 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 327, in visitMaxOp
    exp2type = self.visit(node.expr2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Int and PolyExp

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3) ? (1, 1, 1, 1) :
        (
            max(0, min(1, 0.16666667 * (prev[l]) + 0.5)),
            max(0, min(1, 0.16666667 * (prev[u]) + 0.5)),
            max(0, min(1, 0.16666667 * (prev) + 0.5)),
            max(0, min(1, 0.16666667 * (prev) + 0.5))
        );
}

2025-06-12 00:21:53,359 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:21:53,431 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l] >= 2.5) ? (1, 1, 1, 1) :
        (max(0, min(1, 0.2 * prev[l] + 0.5)),
         max(0, min(1, 0.2 * prev[u] + 0.5)),
         max(0, min(1, 0.2 * prev + 0.5)),
         min(1, max(0, ((prev[u] - 2.5)*prev - prev[l]*0.2 + 1.5*prev[l])/(prev[u] - prev[l]))) )));
}

2025-06-12 00:21:53,431 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:21:53,496 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ?
            (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ?
            (1, 1, 1, 1) :
        (
            (max(0, min(1, 0.2 * (prev[l]) + 0.5))),
            (max(0, min(1, 0.2 * (prev[u]) + 0.5))),
            (max(0, min(1, 0.2 * (prev) + 0.5))),
            (max(0, min(1, 0.2 * (prev) + 0.5)))
        );
}

2025-06-12 00:21:53,496 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:21:53,496 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:22:18,192 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:22:18,254 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l] >= 2.5) ? (1, 1, 1, 1) :
        ( ((0.2 * prev[l] + 0.5) >= 0) ?
            (0.2 * prev[l] + 0.5, 0.2 * prev[u] + 0.5, (0.2 * prev + 0.5), (0.2 * prev + 0.5)) :
            (0, min(1, 0.2 * prev[u] + 0.5), 0, min(1, 0.2 * prev + 0.5)) ) ) );
}

2025-06-12 00:22:18,254 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:22:18,332 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid -> ((prev[u] <= -2.5) ? (0, 0, 0, 0)
        : ((prev[l] >= 2.5) ? (1, 1, 1, 1)
        : ((prev[l] >= -2.5 && prev[u] <= 2.5) ?
            (0.2*prev[l] + 0.5, 0.2*prev[u] + 0.5, 0.2*prev + 0.5, 0.2*prev + 0.5)
        : ((prev[l] < -2.5 && prev[u] > 2.5) ?
            (0, 1,
             ((0.2*prev[u] + 0.5)*((prev[l] + 2.5)/(prev[l] + prev[u]))) + (((1 - (0.2*prev[l] + 0.5))*(prev[u] - 2.5))/(prev[u] - prev[l])),
             ((0.2*prev + 0.5)*((prev[l] + 2.5)/(prev[l] + prev[u]))) + (((1 - (0.2*prev + 0.5))*(prev[u] - 2.5))/(prev[u] - prev[l])))
        : (max(0, 0.2*prev[l] + 0.5), min(1, 0.2*prev[u] + 0.5),
           max(0, 0.2*prev + 0.5), min(1, 0.2*prev + 0.5))))));
}

2025-06-12 00:22:18,332 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:22:18,332 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:22:32,693 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5)
            ? (0, 0, 0, 0)
        : ((prev[l]) >= 2.5)
            ? (1, 1, 1, 1)
        : ((prev[l]) >= -2.5 && (prev[u]) <= 2.5)
            ? ((0.2 * (prev[l]) + 0.5), (0.2 * (prev[u]) + 0.5), (0.2 * (prev) + 0.5), (0.2 * (prev) + 0.5))
        : ((prev[l]) < -2.5 && (prev[u]) > -2.5 && (prev[u]) <= 2.5)
            ? (0, (0.2 * (prev[u]) + 0.5), 0, ((0.2 * (prev) + 0.5) * ((prev[u] + 2.5) / (prev[u] - prev[l]))) - ((prev[u] + 2.5) * (prev[l]) / (prev[u] - prev[l])))
        : ((prev[l]) >= -2.5 && (prev[l]) < 2.5 && (prev[u]) > 2.5)
            ? ((0.2 * (prev[l]) + 0.5), 1, ((0.2 * (prev) + 0.5) * ((2.5 - prev[l]) / (prev[u] - prev[l]))) + ((prev[u] - 2.5) * 1 / (prev[u] - prev[l])), 1)
        : (0, 1, 0, 1);
}

2025-06-12 00:22:32,693 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:22:32,936 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (
            simplify_lower(prev, 0.2) + 0.5,
            simplify_upper(prev, 0.2) + 0.5,
            prev * 0.2 + 0.5,
            prev * 0.2 + 0.5
        );
}

2025-06-12 00:22:32,937 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:22:33,571 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:22:33,571 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:22:43,404 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l] >= 1) ?
            (1, 1, 1, 1) :
        ((prev[u] <= 0) ?
            (0, 0, 0, 0) :
            (max(0, min(1, prev[l])), max(0, min(1, prev[u])),
                max(0, min(1, prev)),
                max(0, min(1, prev)))))
}

2025-06-12 00:22:43,405 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:22:43,537 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0)
    : ((prev[l]) >= 2.5) ? (1, 1, 1, 1)
    : (
        max(0, min(1, 0.2 * (prev[l]) + 0.5)),
        max(0, min(1, 0.2 * (prev[u]) + 0.5)),
        max(0, min(1, 0.2 * (prev) + 0.5)),
        max(0, min(1, 0.2 * (prev) + 0.5))
    );
}

2025-06-12 00:22:43,538 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:22:43,667 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        ( ((0.2 * (prev[l] + 2.5))), (0.2 * (prev[u] + 2.5)), (0.2 * (prev + 2.5)), (0.2 * (prev + 2.5)) );
}

2025-06-12 00:22:43,668 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:22:43,668 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:22:57,237 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
      ((prev[u]) <= -2.5)
        ? (0, 0, 0, 0)
      : ((prev[l]) >= 2.5)
        ? (1, 1, 1, 1)
      : (
            max(0, min(1, 0.2 * (prev[l]) + 0.5)),
            min(1, max(0, 0.2 * (prev[u]) + 0.5)),
            max(0, min(1, 0.2 * (prev) + 0.5)),
            min(1, max(0, 0.2 * (prev) + 0.5))
        );
}

2025-06-12 00:22:57,238 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:22:57,426 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l] >= 2) ? (1, 1, 1, 1) :
        (prev[u] <= -2) ? (0, 0, 0, 0) :
        (prev[l] >= -2 && prev[u] <= 2) ?
            ((0.25*prev[l] + 0.5), (0.25*prev[u] + 0.5),
             (0.25*prev + 0.5), (0.25*prev + 0.5)) :
        (prev[l] < -2 && prev[u] <= 2) ?
            (0, (0.25*prev[u] + 0.5),
             0, (0.25*prev + 0.5)) :
        (prev[l] >= -2 && prev[u] > 2) ?
            ((0.25*prev[l] + 0.5), 1,
             (0.25*prev + 0.5), 1) :
        (0, 1,
         0, 1)
        );
}

2025-06-12 00:22:57,426 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:22:57,546 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        // Case 1: input entirely below lower threshold
        ((prev[u] <= -2.5) ? (
            0, 0, 0, 0
        // Case 2: input entirely above upper threshold
        ) : (prev[l] >= 2.5) ? (
            1, 1, 1, 1
        // General Case: input straddles thresholds
        ) : (
            // Compute float lower and upper
            max(0, min(1, 0.2*prev[l]+0.5)),
            max(0, min(1, 0.2*prev[u]+0.5)),
            // Poly lower
            max(0, min(1, prev*0.2+0.5)),
            max(0, min(1, prev*0.2+0.5))
        )
    );
}

2025-06-12 00:22:57,546 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:22:57,547 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:23:13,381 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
  HardSigmoid ->
    ((prev[u] <= -2.5) ?
      (0, 0, 0, 0)
    : (prev[l] >= 2.5) ?
      (1, 1, 1, 1)
    :
      (
        max(0, min(1, 0.2 * prev[l] + 0.5)),
        max(0, min(1, 0.2 * prev[u] + 0.5)),
        max(0, min(1, 0.2 * prev + 0.5)),
        max(0, min(1, 0.2 * prev + 0.5))
      )
    );
}

2025-06-12 00:23:13,381 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:23:13,502 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3) ? (1, 1, 1, 1) :
        ((prev[l]) >= -3 && (prev[u]) <= 3) ? (
            (0.16667 * prev[l] + 0.5),
            (0.16667 * prev[u] + 0.5),
            (0.16667 * prev + 0.5),
            (0.16667 * prev + 0.5)
        ) : (
            0,
            1,
            0,
            1
        );
}

2025-06-12 00:23:13,502 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:23:13,663 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid -> (
        // lower bound
        ((prev[l]) >= 1) ? (1) : (
            ((prev[u]) <= -1) ? (0) : (
                (prev[l]+1)/2
            )
        ),
        // upper bound
        ((prev[u]) <= -1) ? (0) : (
            ((prev[l]) >= 1) ? (1) : (
                (prev[u]+1)/2
            )
        ),
        // lower polyexp
        ((prev[l]) >= 1) ? (1) : (
            ((prev[u]) <= -1) ? (0) : (
                ((prev+1)/2)
            )
        ),
        // upper polyexp
        ((prev[u]) <= -1) ? (0) : (
            ((prev[l]) >= 1) ? (1) : (
                ((prev+1)/2)
            )
        )
    );
}

2025-06-12 00:23:13,663 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:23:13,664 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:23:13,664 - INFO - [HardSigmoid] Runtime: 158.54 seconds
2025-06-12 00:23:13,664 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardSigmoid -> (
        // lower bound
        ((prev[l]) >= 1) ? (1) : (
            ((prev[u]) <= -1) ? (0) : (
                (prev[l]+1)/2
            )
        ),
        // upper bound
        ((prev[u]) <= -1) ? (0) : (
            ((prev[l]) >= 1) ? (1) : (
                (prev[u]+1)/2
            )
        ),
        // lower polyexp
        ((prev[l]) >= 1) ? (1) : (
            ((prev[u]) <= -1) ? (0) : (
                ((prev+1)/2)
            )
        ),
        // upper polyexp
        ((prev[u]) <= -1) ? (0) : (
            ((prev[l]) >= 1) ? (1) : (
                ((prev+1)/2)
            )
        )
    );
}

2025-06-12 00:23:13,665 - INFO - 2025-06-12 00:23:13.665084 - Extracting HardSwish
2025-06-12 00:23:13,665 - INFO -
API: HardSwish -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:23:13,665 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:23:25,074 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        (prev[l] >= 3) ? (
            prev[l], prev[u], prev, prev
        ) : (
            (prev[u] <= -3) ? (
                0, 0, 0, 0
            ) : (
                0,
                max((prev[u] * ((prev[u] + 3)/6)), (prev[l] * ((prev[l] + 3)/6))),
                (prev * ((prev + 3)/6)),
                (prev * ((prev + 3)/6))
            )
        );
}

2025-06-12 00:23:25,075 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:23:25,243 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3)  ? (prev[l], prev[u], prev, prev) :
        (
            hard_swish_lower := (
                (prev[u] <= 0) ?
                    (prev[l] * max(0, prev[l]+3) / 6) :
                (prev[l] >= 0) ?
                    (prev[l] * min(6, prev[u]+3) / 6) :
                    0
            );
            hard_swish_upper := (
                (prev[l] >= 0) ?
                    (prev[u] * min(6, prev[u]+3) / 6) :
                (prev[u] <= 0) ?
                    0 :
                    ((prev[u] * (prev[u] + 3)) / 6)
            );
            hard_swish_L := 0;
            hard_swish_U := (prev[u] * (prev[u] + 3)) / 6;
            (hard_swish_lower, hard_swish_upper, hard_swish_L, hard_swish_U)
        );
}

2025-06-12 00:23:25,243 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:23:25,389 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 1)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[u] <= -1) ?
            (0, 0, 0, 0)
        : (
            ( (simplify_lower(prev, (prev[l]+1)/2)), (simplify_upper(prev, (prev[u]+1)/2)),
              prev * ((prev[L]+1)/2), prev * ((prev[U]+1)/2)
            ))
        );
}

2025-06-12 00:23:25,389 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:23:25,389 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:23:39,618 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish -> (
        (prev[u] <= -3) ? (0) : ((prev[l] >= 3) ? (prev[l]) : ((prev[l] * max(0, min(prev[u]+3,6)) / 6))),
        (prev[l] >= 3) ? (prev[u]) : ((prev[u] <= -3) ? (0) : ((prev[u] * max(0, min(prev[u]+3,6)) / 6))),
        (prev[l] >= 3) ? (prev) : ((prev[u] <= -3) ? (0) : (prev * max(0, min(prev+3,6)) / 6)),
        (prev[l] >= 3) ? (prev) : ((prev[u] <= -3) ? (0) : (prev * max(0, min(prev+3,6)) / 6))
    );
}

2025-06-12 00:23:39,618 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:23:39,743 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (   (prev[l] >= 3) ? (prev[l], prev[u], prev, prev) :
            (prev[u] <= -3) ? (0, 0, 0, 0) :
            let l_a = prev[l], u_a = prev[u] in
            let f_l = (l_a * max(0, min(6, l_a + 3))) / 6 in
            let f_u = (u_a * max(0, min(6, u_a + 3))) / 6 in
            (f_l, f_u,
             prev * (max(0, min(6, prev + 3)) / 6),
             prev * (max(0, min(6, prev + 3)) / 6)
            )
        );
}

2025-06-12 00:23:39,744 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:23:39,935 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3)
        ? ((prev[l]), (prev[u]), (prev), (prev))
        : (
            (prev[u]) <= -3
            ? (0, 0, 0, 0)
            : (
                // general case: interval spans -3..3
                (
                    // lower bound
                    simplify_lower(prev, (prev[l]) > -3 ? (prev[l]+3)/6 : 0),
                    // upper bound
                    simplify_upper(prev, (prev[u]) < 3 ? (prev[u]+3)/6 : 1),
                    // lower poly
                    prev * (prev[l]+3)/6,
                    // upper poly
                    prev * (prev[u]+3)/6
                )
            )
        );
}

2025-06-12 00:23:39,936 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:23:39,936 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:23:54,528 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3)
            ? (prev[l], prev[u], prev, prev)
            : ((prev[u] <= -3)
                ? (0, 0, 0, 0)
                : (
                    (prev[l] >= -3 && prev[u] <= 3)
                        ? ( (prev[l] * ((prev[l]+3)/6)), (prev[u] * ((prev[u]+3)/6)), (prev * ((prev+3)/6)), (prev * ((prev+3)/6)) )
                        : (
                            (prev[l] < -3 && prev[u] > 3)
                                ? (0, prev[u], 0, prev)
                                : (
                                    (prev[l] < -3)
                                        ? (0, prev[u] * ((prev[u]+3)/6), 0, prev * ((prev+3)/6))
                                        : (prev[l] * ((prev[l]+3)/6), prev[u], prev * ((prev+3)/6), prev)
                                  )
                           )
                  )
          )
}

2025-06-12 00:23:54,529 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:23:54,840 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 596, in visitFuncCall
    exprstype = self.visit(node.arglist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        (prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev)
    : (prev[u] <= -3) ?
            (0, 0, 0, 0)
    :
        (
            simplify_lower(prev, (prev[l] <= -3 ? 0 : (prev[u] >= 3 ? 1 : ((prev[l] + 3) * prev[l] / 6)))),
            simplify_upper(prev, (prev[u] <= -3 ? 0 : (prev[u] >= 3 ? 1 : ((prev[u] + 3) * prev[u] / 6)))),
            backsubs_lower((prev * ((prev + 3) / 6)), prev),
            backsubs_upper((prev * ((prev + 3) / 6)), prev)
        );
}

2025-06-12 00:23:54,840 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:23:55,227 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 383, in visitTernary
    raise TypeMismatchException(str(ltype) + " and " + str(rtype) + " are not lub_type")
constraintflow.core.astTC.TypeMismatchException: Int and Bool are not lub_type

Code:
transformer deeppoly{
    HardSwish ->
        // HardSwish(x) = x * ReLU6(x + 3) / 6
        (
            // Lower bound
            ((prev[l] + 3) <= 0) ? 0 :
            ((prev[u] + 3) >= 6) ? prev[l] :
            simplify_lower(prev, ((prev[l] + 3) / 6)),

            // Upper bound
            ((prev[l] + 3) <= 0) ? 0 :
            ((prev[u] + 3) >= 6) ? prev[u] :
            simplify_upper(prev, ((prev[u] + 3) / 6)),

            // Lower poly
            ((prev[l] + 3) <= 0) ? 0 :
            ((prev[u] + 3) >= 6) ? prev :
            (prev * ((prev[l] + 3) / 6)),

            // Upper poly
            ((prev[l] + 3) <= 0) ? 0 :
            ((prev[u] + 3) >= 6) ? prev :
            (prev * ((prev[u] + 3) / 6))
        );
}

2025-06-12 00:23:55,231 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:23:55,231 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:24:27,843 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:24:27,976 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on PolyExp and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        (prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev) :
        (prev[u] <= -3) ?
            (0, 0, 0, 0) :
        (
            0.5 * simplify_lower(prev, prev[l]) * (simplify_lower(prev, prev[l]) + 3) / 3,
            0.5 * simplify_upper(prev, prev[u]) * (simplify_upper(prev, prev[u]) + 3) / 3,
            0.5 * prev * (prev + 3) / 3,
            0.5 * prev * (prev + 3) / 3
        );
}

2025-06-12 00:24:27,976 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:24:28,055 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (
            (prev[l] >= 3) ? (prev[l], prev[u], prev, prev) :
            (prev[u] <= -3) ? (0, 0, 0, 0) :
            (
                (prev[l] >= -3) && (prev[u] <= 3) ?
                    (
                        (prev[l] * (prev[l] + 3) / 6),
                        (prev[u] * (prev[u] + 3) / 6),
                        (prev * (prev + 3) / 6),
                        (prev * (prev + 3) / 6)
                    ) :
                (
                    (prev[l] < -3 && prev[u] > 3) ?
                        (0, prev[u], 0, ((prev[u] * (prev[u] + 3) / 6)))
                    :
                        (min(0, prev[l] * (prev[l] + 3) / 6), max(prev[u], prev[u] * (prev[u] + 3) / 6), min(0, prev * (prev + 3) / 6), max(prev, prev * (prev + 3) / 6))
                )
            )
        );
}

2025-06-12 00:24:28,055 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:24:28,055 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:24:45,410 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:24:45,609 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish -> (
        (0 >= prev[u]) ? 0 :
        (6 <= prev[l]) ? prev[l] :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l] * prev[l] / 6) :
        max(0, prev[l] * max(0, min((prev[l] + 3), 6)) / 6),

        (0 >= prev[u]) ? 0 :
        (6 <= prev[l]) ? prev[u] :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[u] * prev[u] / 6) :
        max(0, prev[u] * max(0, min((prev[u] + 3), 6)) / 6),

        (0 >= prev[L]) ? 0 :
        (6 <= prev[L]) ? prev[L] :
        (prev[L] >= 0 && prev[U] <= 6) ? (prev[L] * prev[L] / 6):
        max(0, prev[L] * max(0, min((prev[L] + 3), 6)) / 6),

        (0 >= prev[U]) ? 0 :
        (6 <= prev[U]) ? prev[U] :
        (prev[L] >= 0 && prev[U] <= 6) ? (prev[U] * prev[U] / 6) :
        max(0, prev[U] * max(0, min((prev[U] + 3), 6)) / 6)
    );
}

2025-06-12 00:24:45,610 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:24:45,695 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3)) ? (
            prev[l], prev[u], prev, prev
        ) :
        ((prev[u] <= -3)) ? (
            0, 0, 0, 0
        ) :
        (
            simplify_lower(prev, prev[l] / 6 + 0.5),
            simplify_upper(prev, prev[u] / 6 + 0.5),
            (prev * (prev + 3)) / 6,
            (prev * (prev + 3)) / 6
        );
}

2025-06-12 00:24:45,696 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:24:45,696 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:25:00,886 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        :
        (((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        :
        (
            // Mixed region
            (prev[l] / 6 + prev[l], prev[u] / 6 + prev[u], (prev * (prev + 3))/6, (prev * (prev + 3))/6)
        ));
}

2025-06-12 00:25:00,886 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:25:01,318 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:25:01,609 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 638, in visitTransRetBasic
    raise TypeMismatchException("Expression in transformer is different from shape declaration")
constraintflow.core.astTC.TypeMismatchException: Expression in transformer is different from shape declaration

Code:
transformer deeppoly{
    HardSwish ->
        (
            ((prev[l]) >= 3) ? ((prev[l]), (prev[u]), (prev), (prev))
            : (((prev[u]) <= -3) ? (0, 0, 0, 0)
            : (
                (
                    // lower bound
                    (simplify_lower(prev, (prev[l]/6 + 0.5)) >= 0) ?
                        (prev[l]/6 * prev[l] + 0.5 * prev[l])
                        : 0,
                    // upper bound
                    (simplify_upper(prev, (prev[u]/6 + 0.5)) >= 0) ?
                        (prev[u]/6 * prev[u] + 0.5 * prev[u])
                        : (prev[u] >= 3 ? prev[u] : 0),
                    // lower poly
                    (prev/6 + 0.5)*prev,
                    // upper poly
                    (prev[u] <= 3 ? (prev/6 + 0.5)*prev : prev)
                )
            ))
        );
}

2025-06-12 00:25:01,610 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:25:01,610 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:25:15,626 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (((prev[l]) >= 3)
            ? ((prev[l]), (prev[u]), (prev), (prev))
            : (((prev[u]) <= -3)
                ? (0, 0, 0, 0)
                : (
                    (simplify_lower(prev, (prev[l]<-3) ? 0 : (prev[u]>3) ? 1 : ((prev[l]+3)/6))),
                    (simplify_upper(prev, (prev[u]>3) ? 1 : (prev[l]<-3) ? 0 : ((prev[u]+3)/6))),
                    ((prev * ((prev + 3)/6)).clamp(0, prev[u])),
                    ((prev * ((prev + 3)/6)).clamp(0, prev[u]))
                )
            )
        );
}

2025-06-12 00:25:15,626 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:25:15,703 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (prev[u] <= -3) ?
            (0, 0, 0, 0) :
        (prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] >= -3 && prev[u] <= 3) ?
            (simplify_lower(prev, (prev[l]+3)/6), simplify_upper(prev, (prev[u]+3)/6), replace_lower(prev, (prev[l]+3)/6), replace_upper(prev, (prev[u]+3)/6)) :
        (prev[l] < -3 && prev[u] > 3) ?
            (0, prev[u], 0, prev) :
        (prev[l] < -3) ?
            (0, simplify_upper(prev, (prev[u]+3)/6), 0, replace_upper(prev, (prev[u]+3)/6)) :
        (prev[u] > 3) ?
            (simplify_lower(prev, (prev[l]+3)/6), prev[u], replace_lower(prev, (prev[l]+3)/6), prev) :
        (0, 0, 0, 0);
}

2025-06-12 00:25:15,703 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:25:15,773 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3)
            ? ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[u]) <= -3)
            ? (0, 0, 0, 0)
        : (((prev[l]) >= -3) & ((prev[u]) <= 3))
            ? (
                ((prev[l]) * (prev[l]+3) / 6),
                ((prev[u]) * (prev[u]+3) / 6),
                ((prev * (prev+3)) / 6),
                ((prev * (prev+3)) / 6)
            )
        : (((prev[l]) < -3) & ((prev[u]) > 3))
            ? (
                0,
                ((prev[u]) > 0) ? (prev[u]) : 0,
                0,
                ((prev * (prev+3)) / 6)
            )
        : (
                0,
                ((prev[u]) * (prev[u]+3) / 6),
                0,
                ((prev * (prev+3)) / 6)
        );
}

2025-06-12 00:25:15,773 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:25:15,773 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:25:28,826 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ? (
            prev[l],
            prev[u],
            prev,
            prev
        ) : (
            ((prev[u]) <= -3) ? (
                0,
                0,
                0,
                0
            ) : (
                // interval bounds
                max(0, (prev[l]) * (min(6, max(0, prev[l]+3))/6)),
                max(0, (prev[u]) * (min(6, max(0, prev[u]+3))/6)),
                // Lower poly: maximum of 0 and a lower linear interpolation between the endpoints
                ((prev[u])-(-3))>=1e-6 ?
                   (prev * (min(6, max(0, prev[l]+3))/6)) : 0,
                // Upper poly: convex interpolation between hard and easy region
                ((prev[u])-(-3))>=1e-6 ?
                   (prev * (min(6, max(0, prev[u]+3))/6)) : 0
            )
        );
}

2025-06-12 00:25:28,827 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:25:29,009 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish -> (
        // lower bound
        ((prev[l]) >= 3) ? (prev[l]) :
        ((prev[u]) <= -3) ? (0) :
        ((prev[l]) >= 0) ? ((prev[l]) * ((prev[l]+3)/6)) :
        (0),

        // upper bound
        ((prev[u]) <= -3) ? (0) :
        ((prev[l]) >= 3) ? (prev[u]) :
        ((prev[u]) > 0) ? ((prev[u]) * ((prev[u]+3)/6)) :
        (0),

        // lower poly
        (((prev[u]) <= -3) ? (0) :
         ((prev[l]) >= 3) ? (prev) :
         (prev * ((prev+3)/6)) ),

        // upper poly
        (((prev[u]) <= -3) ? (0) :
         ((prev[l]) >= 3) ? (prev) :
         (prev * ((prev+3)/6)) )
    );
}

2025-06-12 00:25:29,010 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:25:29,153 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        : (
            simplify_lower(prev, (prev[l]+3)/6),
            simplify_upper(prev, (prev[u]+3)/6),
            replace_lower(prev, (prev[l]+3)/6),
            replace_upper(prev, (prev[u]+3)/6)
          );
}

2025-06-12 00:25:29,154 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:25:29,154 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:25:42,746 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[u] <= -3) ?
            (0, 0, 0, 0)
        : (
            (simplify_lower(prev, (prev[l]) / 6.0), simplify_upper(prev, (prev[u]) / 6.0), (prev * ((prev + 3.0)/6.0)), (prev * ((prev + 3.0)/6.0)))
        )));
}

2025-06-12 00:25:42,746 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:25:42,826 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
      ((prev[u]) <= -3) ? (0, 0, 0, 0)
      : ((prev[l]) >= 3) ? ((prev[l]), (prev[u]), (prev), (prev))
      : (
          (prev[l] >= -3 && prev[u] <= 3) ?
            (
              simplify_lower(prev, (prev[l] + 3) / 6), // lower bound
              simplify_upper(prev, (prev[u] + 3) / 6), // upper bound
              replace_lower(prev, (prev[l] + 3) / 6),   // polyexp lower
              replace_upper(prev, (prev[u] + 3) / 6)    // polyexp upper
            )
          :
            (
              0, // When lower < -3 and upper > 3, global lower bound is 0
              (prev[u]), // upper bound is still prev[u] at prev[u] >= 3
              0,  // Polyexp lower
              prev // Polyexp upper
            )
        );
}

2025-06-12 00:25:42,826 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:25:42,908 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[u] <= -3) ?
            (0, 0, 0, 0)
        : (
            (0.5 * ((prev[u] >= 3 ? prev[u] : ((prev[u] <= -3 ? 0 : ((prev[u]*(prev[u]+3))/(6)))))),
             0.5 * ((prev[l] >= 3 ? prev[l] : ((prev[l] <= -3 ? 0 : ((prev[l]*(prev[l]+3))/(6)))))),
             0.5 * ((prev >= 3 ? prev : ((prev <= -3 ? 0 : ((prev*(prev+3))/(6)))))),
             0.5 * ((prev >= 3 ? prev : ((prev <= -3 ? 0 : ((prev*(prev+3))/(6)))))))
        )
    );
}

2025-06-12 00:25:42,908 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:25:42,908 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:25:55,808 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 596, in visitFuncCall
    exprstype = self.visit(node.arglist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: clamp01 is not defined

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        : (
            min(0, prev[l]), // conservative lower float bound
            backsubs_upper( (prev * clamp01((prev + 3)/6)), prev ), // upper float bound
            0, // lower polyexp bound (an underestimate in uncertain region)
            (prev * clamp01((prev + 3)/6)) // upper polyexp bound
        );
}

2025-06-12 00:25:55,808 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:25:55,891 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        // Case 1: prev[l] >= 3
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
    :
        // Case 2: prev[u] <= -3
        ((prev[u]) <= -3) ?
            (0, 0, 0, 0)
    :
        // Case 3: Otherwise, poly approximation
        (
            // Lower bound
            ((simplify_lower(prev, 1/3) * (prev[l] + 3)).max(0)),
            // Upper bound
            ((simplify_upper(prev, 1/3) * (prev[u] + 3)).min(simplify_upper(prev, 1))),
            // PolyExp L
            (((prev) * (prev + 3)) / 3).max(0),
            // PolyExp U
            (((prev) * (prev + 3)) / 3).min(prev)
        );
}

2025-06-12 00:25:55,891 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:25:56,318 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:25:56,319 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:25:56,319 - INFO - [HardSwish] Runtime: 162.65 seconds
2025-06-12 00:25:56,319 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardSwish ->
        ( (prev[l] >= 3) ? (
                prev[l],
                prev[u],
                prev,
                prev
         ) : ( (prev[u] <= -3) ? (
                0,
                0,
                0,
                0
         ) : (
                simplify_lower(prev, (prev[l] + 3) / 6),
                simplify_upper(prev, (prev[u] + 3) / 6),
                replace_lower(prev, (prev[l] + 3) / 6),
                replace_upper(prev, (prev[u] + 3) / 6)
         ))
        );
}

2025-06-12 00:25:56,319 - INFO - 2025-06-12 00:25:56.319310 - Extracting HardTanh
2025-06-12 00:25:56,319 - INFO -
API: HardTanh -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:25:56,319 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:26:06,804 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1) :
                (((prev[l]) >= 1) ?
                    (1, 1, 1, 1) :
                        ((prev[l] >= -1) && (prev[u] <= 1)) ?
                            (prev[l], prev[u], prev, prev)
                        :
                            (max(prev[l], -1), min(prev[u], 1),
                                ((prev[l] < -1) ? ((prev[u]-1)/(prev[u]-prev[l]))*prev + ((prev[u]*(1+prev[l]))/(prev[u]-prev[l])) : prev),
                                ((prev[u] > 1) ? ((1-prev[l])/(prev[u]-prev[l]))*prev + ((prev[u]-1)*prev[l]/(prev[u]-prev[l])) : prev)
                            )
                );
}

2025-06-12 00:26:06,804 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:26:06,884 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ?
            (-1, -1, -1, -1)
        : ((prev[l] >= 1) ?
            (1, 1, 1, 1)
        : ((prev[l] >= -1) && (prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < -1) && (prev[u] > 1) ?
            (-1, 1, ((prev - prev[l]) * 2 / (prev[u] - prev[l])) - 1, ((prev - prev[l]) * 2 / (prev[u] - prev[l])) - 1)
        : ((prev[l] < -1) ?
            (-1, prev[u], ((prev - prev[l]) / (prev[u] - prev[l])) * (prev[u] + 1) - 1, prev)
        : // prev[u] > 1
            (prev[l], 1, prev, ((prev - prev[u]) / (prev[u] - prev[l])) * (1 - prev[l]) + prev[l])
        )))));
}

2025-06-12 00:26:06,884 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:26:06,960 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh -> ((prev[u] <= -1) ? (-1, -1, -1, -1)
        : ((prev[l] >= 1) ? (1, 1, 1, 1)
        : ((prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev)
        : ((prev[l] < -1 && prev[u] <= 1) ? (0, prev[u], 0, prev)
        : ((prev[l] >= -1 && prev[u] > 1) ? (prev[l], 1, prev, 1)
        : (0, 1, 0, 1))))));
}

2025-06-12 00:26:06,960 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:26:06,960 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:26:27,105 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(lower, upper) ->
        ((prev[l] >= upper) ? (upper, upper, upper, upper) :
        (prev[u] <= lower) ? (lower, lower, lower, lower) :
        (prev[l] >= lower && prev[u] <= upper) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < lower && prev[u] > upper) ? (lower, upper, lower + (prev - prev[l]) * (upper - lower) / (prev[u] - prev[l]), upper + (prev - prev[u]) * (lower - upper) / (prev[l] - prev[u])) :
        (prev[l] < lower) ? (lower, prev[u], lower + (prev - prev[l]) * (prev[u] - lower) / (prev[u] - prev[l]), prev) :
        (prev[u] > upper) ? (prev[l], upper, prev, upper + (prev - prev[u]) * (prev[l] - upper) / (prev[l] - prev[u])) :
        (prev[l], prev[u], prev, prev))
}

2025-06-12 00:26:27,106 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:26:27,314 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        (prev[u] <= -1) ? (-1, -1, -1, -1) :
        (prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < -1 && prev[u] > 1) ? (-1, 1, prev*(2/(prev[u]-prev[l]))-((prev[u]+prev[l])/(prev[u]-prev[l])), prev*(2/(prev[u]-prev[l]))-((prev[u]+prev[l])/(prev[u]-prev[l]))) :
        (prev[l] < -1) ? (-1, min(1, prev[u]), prev*(1/(prev[u]+1))-(prev[l]/(prev[u]+1)), prev*(1/(prev[u]+1))-(prev[l]/(prev[u]+1))) :
        (prev[u] > 1) ? (max(-1, prev[l]), 1, prev*(1/(1-prev[l]))-(prev[u]/(1-prev[l])), prev*(1/(1-prev[l]))-(prev[u]/(1-prev[l]))) :
        (prev[l], prev[u], prev, prev)
        );
}

2025-06-12 00:26:27,314 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:26:27,466 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        (prev[u] <= -1) ?
            (-1, -1, -1, -1)
        : (prev[l] >= 1) ?
            (1, 1, 1, 1)
        : (prev[l] >= -1 && prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev)
        : (prev[l] < -1 && prev[u] > 1) ?
            (-1, 1, prev, prev)
        : (prev[l] < -1) ?
            (-1, prev[u], ((prev - prev[l]) * ((prev[u] + 1)/(prev[u] - prev[l]))) - ((prev[u] + 1) * prev[l])/(prev[u] - prev[l]), prev)
        : (prev[u] > 1) ?
            (prev[l], 1, prev, ((prev - prev[u]) * ((1 - prev[l])/(prev[u] - prev[l]))) + ((prev[u] - 1) * prev[l])/(prev[u] - prev[l]))
        : (prev[l], prev[u], prev, prev);
}

2025-06-12 00:26:27,466 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:26:27,467 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:26:42,910 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ?
            (-1, -1, -1, -1)
        : ((prev[l] >= 1) ?
            (1, 1, 1, 1)
        : ((prev[l] >= -1 && prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < -1 && prev[u] <= 1) ?
            (0, prev[u], 0, prev)
        : ((prev[l] >= -1 && prev[u] > 1) ?
            (prev[l], 1, prev, 1)
        :
            (0, 1, 0, 1)
        )))))
}

2025-06-12 00:26:42,910 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:26:43,073 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->  ((prev[l] >= 1) ? (1, 1, 1, 1)
                    : ((prev[u] <= -1) ? (-1, -1, -1, -1)
                        : ((prev[l] >= -1 && prev[u] <= 1)
                            ? (prev[l], prev[u], prev, prev)
                            : ((prev[l] < -1 && prev[u] > 1)
                                ? (-1, 1, (prev * (2 / (prev[u] - prev[l]))) + ((prev[u] + prev[l]) / (prev[l] - prev[u])), (prev * (2 / (prev[u] - prev[l]))) + ((prev[u] + prev[l]) / (prev[l] - prev[u])))
                                : ((prev[l] < -1)
                                    ? (-1, prev[u], -1, ((prev[u] + 1) / (prev[u] - prev[l])) * prev - ((prev[l] + 1) * prev[u]) / (prev[u] - prev[l]))
                                    : (prev[l], 1, ((1 - prev[u]) / (prev[u] - prev[l])) * prev + (prev[u] - 1) * prev[l] / (prev[u] - prev[l]), 1)
                                )))))
}

2025-06-12 00:26:43,073 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:26:43,224 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(lower, upper) ->
        ((prev[l] >= upper) ? (upper, upper, upper, upper) :
        ((prev[u] <= lower) ? (lower, lower, lower, lower) :
        ((prev[l] >= lower && prev[u] <= upper) ? (prev[l], prev[u], prev, prev) :
        (max(prev[l], lower), min(prev[u], upper),
            ((prev * (min(prev[u], upper) - max(prev[l], lower))) / (prev[u] - prev[l]))
                + (min(prev[u], upper) * max(prev[l], lower) - prev[l] * prev[u]) / (prev[u] - prev[l]),
            ((prev * (min(prev[u], upper) - max(prev[l], lower))) / (prev[u] - prev[l]))
                + (min(prev[u], upper) * max(prev[l], lower) - prev[l] * prev[u]) / (prev[u] - prev[l]))
        )))
}

2025-06-12 00:26:43,224 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:26:43,224 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:26:59,899 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_val, max_val) ->
        (prev[u] <= min_val) ?
            (min_val, min_val, min_val, min_val) :
        (prev[l] >= max_val) ?
            (max_val, max_val, max_val, max_val) :
        (prev[l] >= min_val && prev[u] <= max_val) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < min_val && prev[u] > max_val) ?
            (min_val, max_val, prev, prev) :
        (prev[l] < min_val) ?
            (min_val, prev[u],
                min_val + ((prev - min_val) * (prev[u] - min_val)) / (prev[u] - prev[l]),
                prev) :
        (prev[u] > max_val) ?
            (prev[l], max_val,
                prev,
                max_val + ((prev - max_val) * (prev[u] - max_val)) / (prev[u] - prev[l])) :
        (prev[l], prev[u], prev, prev);
}

2025-06-12 00:26:59,899 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:27:00,042 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v) :
         (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v) :
         (prev[l] >= min_v & prev[u] <= max_v) ? (prev[l], prev[u], prev, prev) :
         (prev[l] < min_v & prev[u] > max_v) ? (min_v, max_v, min_v, max_v) :
         (prev[l] < min_v & prev[u] <= max_v) ? (min_v, prev[u], min_v, prev) :
         (prev[l] >= min_v & prev[u] > max_v) ? (prev[l], max_v, prev, max_v) :
         (min_v, max_v, min_v, max_v)
        );
}

2025-06-12 00:27:00,042 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:27:00,181 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v) :
         (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v) :
         (prev[l] >= min_v && prev[u] <= max_v) ? (prev[l], prev[u], prev, prev) :
         (prev[l] < min_v && prev[u] <= max_v) ? (min_v, prev[u], min_v + ((prev[u] - min_v) / (prev[u] - prev[l])) * (prev - prev[l]), prev) :
         (prev[l] >= min_v && prev[u] > max_v) ? (prev[l], max_v, prev, max_v + ((prev[l] - max_v) / (prev[u] - prev[l])) * (prev - prev[u])) :
         (min_v, max_v, min_v + ((max_v - min_v)/(prev[u] - prev[l])) * (prev - prev[l]), max_v + ((min_v - max_v)/(prev[u] - prev[l])) * (prev - prev[u])));
}

2025-06-12 00:27:00,182 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:27:00,182 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:27:37,015 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1.0) ? (
            -1.0, -1.0, -1.0, -1.0
        ) :
        ((prev[l] >= 1.0) ? (
            1.0, 1.0, 1.0, 1.0
        ) :
        ((prev[l] >= -1.0) & (prev[u] <= 1.0) ? (
            prev[l], prev[u], prev, prev
        ) :
        ((prev[l] < -1.0) & (prev[u] <= 1.0) ? (
            0.0 * (prev - prev[l]) / (prev[u] - prev[l]) + (-1.0 * (prev[u] - prev) / (prev[u] - prev[l])), prev[u], ((prev - prev[l]) / (prev[u] - prev[l])) + (-1.0 * (prev[u] - prev) / (prev[u] - prev[l])), prev
        ) :
        ((prev[l] >= -1.0) & (prev[u] > 1.0) ? (
            prev[l], 1.0, prev, (prev - prev[u]) / (prev[l] - prev[u]) + 1.0 * (prev[l] - prev) / (prev[l] - prev[u])
        ) :
        (
            -1.0, 1.0, ((prev - prev[l]) / (prev[u] - prev[l])) + (-1.0 * (prev[u] - prev) / (prev[u] - prev[l])), ((prev - prev[u]) / (prev[l] - prev[u])) + 1.0 * (prev[l] - prev) / (prev[l] - prev[u])
        ))))));
}

2025-06-12 00:27:37,015 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:27:37,147 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ? (-1, -1, -1, -1) :
            ((prev[l] >= 1) ? (1, 1, 1, 1) :
                ((prev[l] >= -1) && (prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
                    ((prev[l] < -1) && (prev[u] <= 1) ? (0, prev[u], 0, prev) :
                        ((prev[l] >= -1) && (prev[u] > 1) ? (prev[l], 1, prev, 1) :
                            (0, 1, 0, 1)
                        )
                    )
                )
            )
        );
}

2025-06-12 00:27:37,147 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:27:37,271 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh -> ((prev[u] <= -1) ? (-1, -1, -1, -1) :
                ((prev[l] >= 1) ? (1, 1, 1, 1) :
                   ((prev[l] >= -1) & (prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
                       ((prev[l] < -1) & (prev[u] <= 1) ? (0, prev[u], 0, prev) :
                           ((prev[l] >= -1) & (prev[u] > 1) ? (prev[l], 1, prev, 1) :
                               ((prev[l] < -1) & (prev[u] > 1) ? (0, 1, 0, 1) :
                                   (0, 0, 0, 0)))))));
}

2025-06-12 00:27:37,272 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:27:37,272 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:27:49,935 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh -> ((prev[u] <= -1) ? (-1, -1, -1, -1) :
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
            ((prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
                ((prev[l] < -1 && prev[u] <= 1) ? (0, prev[u], 0, prev) :
                    ((prev[l] >= -1 && prev[u] > 1) ? (prev[l], 1, prev, 1) :
                        ((prev[l] < -1 && prev[u] > 1) ? (0, 1, 0, 1) : (prev[l], prev[u], prev, prev))
                    )
                )
            )
        )
    );
}

2025-06-12 00:27:49,936 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:27:50,071 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1)) ? (
            -1, -1, -1, -1
        ) : (
            (prev[l] >= 1) ? (
                1, 1, 1, 1
            ) : (
                (prev[l] >= -1 && prev[u] <= 1) ? (
                    prev[l], prev[u], prev, prev
                ) : (
                    (prev[l] < -1 && prev[u] <= 1) ? (
                        -1, prev[u], -1, prev
                    ) : (
                        (prev[l] >= -1 && prev[u] > 1) ? (
                            prev[l], 1, prev, 1
                        ) : (
                            -1, 1, -1, 1
                        )
                    )
                )
            )
        );
}

2025-06-12 00:27:50,071 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:27:50,209 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ?
            (1, 1, 1, 1) :
        ((prev[l]) >= -1 && (prev[u]) <= 1) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l]) < -1 && (prev[u]) > -1 && (prev[u]) <= 1) ?
            (-1, prev[u], -1, prev + (prev[u]+1)*((prev - (-1))/(prev[u]-(-1))) - prev) :
        ((prev[l]) >= -1 && (prev[l]) < 1 && (prev[u]) > 1) ?
            (prev[l], 1, prev, prev + (1-prev[l])*((1-prev)/(1-prev[l])) - prev) :
        (-1, 1, -1, 1);
}

2025-06-12 00:27:50,210 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:27:50,212 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:28:03,627 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ?
            (-1, -1, -1, -1) :
        ((prev[l] >= 1) ?
            (1, 1, 1, 1) :
        ((prev[l] >= -1) & (prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < -1) & (prev[u] <= 1) ?
            (-1, prev[u], -1, prev) :
        ((prev[l] >= -1) & (prev[u] > 1) ?
            (prev[l], 1, prev, 1) :
        (-1, 1, -1, 1)
        )))));
}

2025-06-12 00:28:03,627 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:28:03,706 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v)
        : (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v)
        : (prev[l] >= min_v && prev[u] <= max_v)
            ? (prev[l], prev[u], prev, prev)
        : (prev[l] < min_v && prev[u] > max_v)
            ? (min_v, max_v, min_v + ((max_v-min_v)/(prev[u]-prev[l]))*(prev - prev[l]), min_v + ((max_v-min_v)/(prev[u]-prev[l]))*(prev - prev[l]))
        : (prev[l] < min_v)
            ? (min_v, prev[u] > max_v ? max_v : prev[u], min_v + ((prev[u]-min_v)/(prev[u]-prev[l]))*(prev - prev[l]), min_v + ((prev[u]-min_v)/(prev[u]-prev[l]))*(prev - prev[l]))
        : (prev[u] > max_v)
            ? (prev[l] < min_v ? min_v : prev[l], max_v, prev[l] + ((max_v-prev[l])/(prev[u]-prev[l]))*(prev - prev[l]), prev[l] + ((max_v-prev[l])/(prev[u]-prev[l]))*(prev - prev[l]))
        : (prev[l], prev[u], prev, prev)
        );
}

2025-06-12 00:28:03,706 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:28:03,961 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 638, in visitTransRetBasic
    raise TypeMismatchException("Expression in transformer is different from shape declaration")
constraintflow.core.astTC.TypeMismatchException: Expression in transformer is different from shape declaration

Code:
transformer deeppoly{
    HardTanh -> (
        (prev[l] >= 1) ? (1) : ((prev[u] <= -1) ? (-1) : (max(-1, prev[l]))),
        (prev[l] >= 1) ? (1) : ((prev[u] <= -1) ? (-1) : (min(1, prev[u]))),
        (prev[l] >= 1) ? (1) : ((prev[u] <= -1) ? (-1) : (max(-1, prev[L]))),
        (prev[l] >= 1) ? (1) : ((prev[u] <= -1) ? (-1) : (min(1, prev[U])))
    );
}

2025-06-12 00:28:03,961 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:28:03,961 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:28:17,373 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ? (
            -1, -1, -1, -1
        ) : (
            ((prev[l]) >= 1) ? (
                1, 1, 1, 1
            ) : (
                ((prev[l]) >= -1 && (prev[u]) <= 1) ? (
                    prev[l], prev[u], prev, prev
                ) : (
                    ((prev[l]) < -1 && (prev[u]) > 1) ? (
                        -1, 1, -1, 1
                    ) : (
                        ((prev[l]) < -1) ? (
                            -1, prev[u] > 1 ? 1 : prev[u],
                            -1, ((prev[u]-1)/((prev[u]-prev[l]))) * prev + (((1-prev[l])/(prev[u]-prev[l])) * -1)
                        ) : (
                            prev[l] < -1 ? -1 : prev[l], 1,
                            ((prev[u]+1)/((prev[u]-prev[l]))) * prev + (((-1-prev[l])/(prev[u]-prev[l])) * 1), 1
                        )
                    )
                )
            )
        );
}

2025-06-12 00:28:17,373 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:28:17,444 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_val, max_val) ->
        ((prev[l] >= max_val) ?
            (max_val, max_val, max_val, max_val)
        : ((prev[u] <= min_val) ?
            (min_val, min_val, min_val, min_val)
        : (
            max(min_val, prev[l]), min(max_val, prev[u]),
            (prev >= max_val) ? max_val : ((prev <= min_val) ? min_val : prev),
            (prev >= max_val) ? max_val : ((prev <= min_val) ? min_val : prev)
        )))
}

2025-06-12 00:28:17,444 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:28:17,522 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l]) >= 1) ? (1, 1, 1, 1)
        : ((prev[u]) <= -1) ? (-1, -1, -1, -1)
        : ((prev[l]) >= -1 && (prev[u]) <= 1) ? (prev[l], prev[u], prev, prev)
        : ((prev[l]) < -1 && (prev[u]) > 1) ? (-1, 1, prev, prev)
        : ((prev[l]) < -1) ? (-1, min(1, prev[u]), prev * (min(1, prev[u]) + 1) / (min(1, prev[u]) - prev[l]) - ((2 * min(1, prev[u])) * prev[l]) / (min(1, prev[u]) - prev[l]), min(1, prev[u]))
        : (max(-1, prev[l]), 1, max(-1, prev[l]), prev * (1 - max(-1, prev[l])) / (prev[u] - max(-1, prev[l])) + (prev[u] * (1 - max(-1, prev[l]))) / (prev[u] - max(-1, prev[l])))
;
}

2025-06-12 00:28:17,523 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:28:17,523 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:28:37,098 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        ((prev[u] <= -1) ? (-1, -1, -1, -1) :
        ((prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < -1 && prev[u] > 1) ? (-1, 1, prev, prev) :
        ((prev[l] < -1) ? (-1, min(1, prev[u]), -1, prev*(min(1,prev[u])+1)/(prev[u]+1) - ((2*min(1,prev[u]))/((prev[u]+1))*-1)) :
        ((prev[u] > 1) ? (max(-1, prev[l]), 1, prev*(1-max(-1,prev[l]))/(1-prev[l]) + ((2*max(-1,prev[l]))/(1-prev[l]))*1, 1) : (prev[l], prev[u], prev, prev))
        )))));
}

2025-06-12 00:28:37,098 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:28:37,174 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh[min, max] ->
        ((prev[u] <= min) ? (min, min, min, min) :
         (prev[l] >= max) ? (max, max, max, max) :
         (prev[l] >= min && prev[u] <= max) ? (prev[l], prev[u], prev, prev) :
         (prev[l] < min && prev[u] > max) ? (min, max,
             (prev - prev[l]) * (max - min) / (prev[u] - prev[l]) + min - ((max - min) * prev[u]) / (prev[u] - prev[l]),
             (prev - prev[l]) * (max - min) / (prev[u] - prev[l]) + min - ((max - min) * prev[u]) / (prev[u] - prev[l])) :
         (prev[l] < min) ? (min, prev[u],
             (prev - prev[l]) * (prev[u] - min) / (prev[u] - prev[l]) + min - ((prev[u] - min) * prev[u]) / (prev[u] - prev[l]),
             (prev - prev[l]) * (prev[u] - min) / (prev[u] - prev[l]) + min - ((prev[u] - min) * prev[u]) / (prev[u] - prev[l])) :
         (prev[u] > max) ? (prev[l], max,
             (prev - prev[u]) * (max - prev[l]) / (prev[l] - prev[u]) + max - ((max - prev[l]) * prev[l]) / (prev[l] - prev[u]),
             (prev - prev[u]) * (max - prev[l]) / (prev[l] - prev[u]) + max - ((max - prev[l]) * prev[l]) / (prev[l] - prev[u]))
        );
}

2025-06-12 00:28:37,174 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:28:37,245 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    HardTanh(min_val, max_val) ->
        ((prev[u] <= min_val) ? (min_val, min_val, min_val, min_val) :
            ((prev[l] >= max_val) ? (max_val, max_val, max_val, max_val) :
                ((prev[l] >= min_val & prev[u] <= max_val) ? (prev[l], prev[u], prev, prev) :
                    (prev[l] < min_val & prev[u] > max_val) ? (min_val, max_val,
                        prev * (max_val - min_val) / (prev[u] - prev[l]) + min_val - prev[l] * (max_val - min_val) / (prev[u] - prev[l]),
                        prev * (max_val - min_val) / (prev[u] - prev[l]) + min_val - prev[l] * (max_val - min_val) / (prev[u] - prev[l])
                    ) :
                    (prev[l] < min_val) ? (min_val, prev[u],
                        prev * (prev[u] - min_val) / (prev[u] - prev[l]) + min_val * (prev[l] - prev[u]) / (prev[u] - prev[l]),
                        prev
                    ) :
                    (prev[u] > max_val) ? (prev[l], max_val,
                        prev,
                        prev * (max_val - prev[l]) / (prev[u] - prev[l]) + max_val * (prev[u] - prev[l]) / (prev[u] - prev[l])
                    ) :
                    (prev[l], prev[u], prev, prev)
                )
            )
        );
}

2025-06-12 00:28:37,245 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:28:37,245 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:28:57,806 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh -> ((prev[l]) >= 1) ? (1, 1, 1, 1)
      : ((prev[u]) <= -1) ? (-1, -1, -1, -1)
      : ((prev[l] >= -1) & (prev[u] <= 1)) ? (prev[l], prev[u], prev, prev)
      : ((prev[l] < -1) & (prev[u] <= 1)) ? (-1, prev[u], -1 + (prev + 1)*(prev[u]/(prev[u] + 1)), prev)
      : ((prev[l] >= -1) & (prev[u] > 1)) ? (prev[l], 1, prev, prev*(1 - prev[l])/(prev[u] - prev[l]) + (prev[u] - 1)*prev[l]/(prev[u] - prev[l]))
      : (-1, 1, -1 + (prev + 1)*(1/(prev[u] + 1)), (prev)*(1/(prev[u] - prev[l])) + prev[u]*(1 - prev[l]/(prev[u] - prev[l])));
}

2025-06-12 00:28:57,806 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:28:57,885 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l] >= 1)) ? (1, 1, 1, 1) :
        ((prev[u] <= -1)) ? (-1, -1, -1, -1) :
        ((prev[l] >= -1 && prev[u] <= 1)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < -1 && prev[u] > 1)) ? (-1, 1, prev, prev) :
        ((prev[l] < -1 && prev[u] <= 1)) ? (-1, prev[u], prev, (prev[u] + 1) * (prev / (prev[u] + 1)) ) :
        ((prev[l] >= -1 && prev[u] > 1)) ? (prev[l], 1, prev, (1 - prev[l]) * (prev / (1 - prev[l]))) :
        (prev[l], prev[u], prev, prev);
}

2025-06-12 00:28:57,885 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:28:57,957 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v) :
            (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v) :
                (prev[l] >= min_v && prev[u] <= max_v) ? (prev[l], prev[u], prev, prev) :
                    (prev[l] < min_v && prev[u] > max_v) ? (min_v, max_v, min_v + (prev * (max_v - min_v) / (prev[u] - prev[l])), max_v + (prev * (max_v - min_v) / (prev[u] - prev[l]))) :
                        (prev[l] < min_v) ? (min_v, prev[u], min_v + ((prev * (prev[u] - min_v)) / (prev[u] - prev[l])), prev) :
                            (prev[u] > max_v) ? (prev[l], max_v, prev, max_v + ((prev * (max_v - prev[l])) / (prev[u] - prev[l]))) :
                                (prev[l], prev[u], prev, prev)
        );
}

2025-06-12 00:28:57,957 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:28:57,958 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:28:57,958 - INFO - [HardTanh] Runtime: 181.64 seconds
2025-06-12 00:28:57,958 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v) :
            (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v) :
                (prev[l] >= min_v && prev[u] <= max_v) ? (prev[l], prev[u], prev, prev) :
                    (prev[l] < min_v && prev[u] > max_v) ? (min_v, max_v, min_v + (prev * (max_v - min_v) / (prev[u] - prev[l])), max_v + (prev * (max_v - min_v) / (prev[u] - prev[l]))) :
                        (prev[l] < min_v) ? (min_v, prev[u], min_v + ((prev * (prev[u] - min_v)) / (prev[u] - prev[l])), prev) :
                            (prev[u] > max_v) ? (prev[l], max_v, prev, max_v + ((prev * (max_v - prev[l])) / (prev[u] - prev[l]))) :
                                (prev[l], prev[u], prev, prev)
        );
}

2025-06-12 00:28:57,958 - INFO - 2025-06-12 00:28:57.958270 - Extracting Max
2025-06-12 00:28:57,958 - INFO -
API: Max -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:28:57,958 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:29:11,984 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        ((prev_0[l] >= prev_1[u]) ? prev_0[L] :
          ((prev_1[l] >= prev_0[u]) ? prev_1[L] :
            ((prev_0[l] >= 0) ?
                prev_0[L] * (prev_0[u] / (prev_0[u] - prev_1[l])) +
                prev_1[L] * (1 - (prev_0[u] / (prev_0[u] - prev_1[l])))
             : (prev_1[l] >= 0) ?
                prev_1[L] * (prev_1[u] / (prev_1[u] - prev_0[l])) +
                prev_0[L] * (1 - (prev_1[u] / (prev_1[u] - prev_0[l])))
             : 0
            )
          )
        ),
        ((prev_0[u] >= prev_1[u]) ? prev_0[U] : prev_1[U])
    );
}

2025-06-12 00:29:11,985 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:29:12,055 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (
        prev_0[l], prev_0[u], prev_0[L], prev_0[U]
    ) : (f(prev_1, prev_0)) ? (
        prev_1[l], prev_1[u], prev_1[L], prev_1[U]
    ) : (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5,
        (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5
    );
}

2025-06-12 00:29:12,055 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:29:12,120 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> ( (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : ( max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
              0.5 * (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])),
              0.5 * (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))
            )
    );
}

2025-06-12 00:29:12,120 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:29:12,120 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:29:24,756 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
         (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
         (prev_0[L] * ((prev_0[u] - prev_1[l]) / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l]))) + (prev_1[L] * ((prev_1[u] - prev_0[l]) / (prev_1[u] - prev_1[l] + prev_0[u] - prev_0[l]))),
         (prev_0[U] * ((prev_0[u] - prev_1[l]) / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l]))) + (prev_1[U] * ((prev_1[u] - prev_0[l]) / (prev_1[u] - prev_1[l] + prev_0[u] - prev_0[l])))
     ));
}

2025-06-12 00:29:24,756 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:29:24,817 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])) / 2, (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])) / 2));
}

2025-06-12 00:29:24,817 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:29:24,883 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
         : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
         : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            ((prev_0[L] + prev_1[L] - abs(prev_0[L] - prev_1[L])) / 2),
            ((prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])) / 2))));
}

2025-06-12 00:29:24,883 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:29:24,883 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:29:38,056 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> f(prev_0, prev_1) ? (
        prev_0[l],
        prev_0[u],
        prev_0,
        prev_0
    ) : (
        f(prev_1, prev_0) ? (
            prev_1[l],
            prev_1[u],
            prev_1,
            prev_1
        ) : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0 * (prev_0[u] - prev_1[l]) + prev_1 * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])),
            (prev_0 * (prev_0[u] - prev_1[l]) + prev_1 * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))
        )
    )
}

2025-06-12 00:29:38,056 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:29:38,126 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (prev_0[l] >= prev_1[u]) ?
                (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
           : (prev_1[l] >= prev_0[u]) ?
                (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
           :
                (max(prev_0[l], prev_1[l]),
                 max(prev_0[u], prev_1[u]),
                 /* for PolyExp L */
                 (prev_0[L] * ((prev_0[l] >= prev_1[l]) ? 1 : 0)) + (prev_1[L] * ((prev_1[l] > prev_0[l]) ? 1 : 0)),
                 /* for PolyExp U: convex relaxation by an upper plane */
                 (prev_0[U] * ((prev_0[u] >= prev_1[u]) ? 1 : 0)) + (prev_1[U] * ((prev_1[u] > prev_0[u]) ? 1 : 0))
                );
}

2025-06-12 00:29:38,126 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:29:38,188 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (prev_0[l] >= prev_1[u]) ?
        (prev_0[l], prev_0[u], prev_0, prev_0)
    : (prev_1[l] >= prev_0[u]) ?
        (prev_1[l], prev_1[u], prev_1, prev_1)
    : (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5,
        (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5
    );
}

2025-06-12 00:29:38,189 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:29:38,189 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:29:52,666 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ?
              (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
           (f(prev_1, prev_0) ?
              (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
           (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                /* PolyExp L for max is often the supporting line of the lower bound */
                (prev_0[l] >= prev_1[l]) ? prev_0[L] : prev_1[L],
                /* PolyExp U for max is often the supporting line of the upper bound */
                (prev_0[u] >= prev_1[u]) ? prev_0[U] : prev_1[U])
    ));
}

2025-06-12 00:29:52,666 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:29:52,996 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (
        (prev_0[l] >= prev_1[u]) ? prev_0[l] : (
            (prev_1[l] >= prev_0[u]) ? prev_1[l] : max(prev_0[l], prev_1[l])
        ),
        (prev_0[u] >= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[l] >= prev_1[u]) ? prev_0 : (
            (prev_1[l] >= prev_0[u]) ? prev_1 : (
                prev_0*(prev_0[u]-prev_1[l])/(prev_0[u]-prev_1[l]) + prev_1*(prev_1[u]-prev_0[l])/(prev_1[u]-prev_0[l])
            )
        ),
        (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 00:29:52,996 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:29:53,138 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
          (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
          (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:29:53,138 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:29:53,138 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:30:08,559 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
          ((f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
          (max(prev_0[l], prev_1[l]),
           max(prev_0[u], prev_1[u]),
           (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) + (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
           (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) + (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
          )
         );
}

2025-06-12 00:30:08,559 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:30:08,628 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             ((prev_0[L] * ((prev_0[l] >= prev_1[l]) ? 1 : 0)) + (prev_1[L] * ((prev_1[l] > prev_0[l]) ? 1 : 0))),
             ((prev_0[U] * ((prev_0[u] >= prev_1[u]) ? 1 : 0)) + (prev_1[U] * ((prev_1[u] > prev_0[u]) ? 1 : 0))));
}

2025-06-12 00:30:08,628 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:30:08,691 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0, prev_0)
          : (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1, prev_1)
          : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             (prev_0[l] >= prev_1[l]) ? prev_0 : prev_1,
             (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1);
}

2025-06-12 00:30:08,692 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:30:08,692 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:30:22,445 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (
            prev_0[l],
            prev_0[u],
            prev_0[L],
            prev_0[U]
        ) : (
            (f(prev_1, prev_0)) ? (
                prev_1[l],
                prev_1[u],
                prev_1[L],
                prev_1[U]
            ) : (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                0.5 * (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])),
                0.5 * (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))
            )
        )
}

2025-06-12 00:30:22,445 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:30:22,516 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            ((f(prev_1, prev_0)) ?
                (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
                (
                    max(prev_0[l], prev_1[l]),
                    max(prev_0[u], prev_1[u]),
                    prev_0[L] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])) + prev_1[L]*((prev_1[u]-prev_0[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])),
                    prev_0[U] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])) + prev_1[U]*((prev_1[u]-prev_0[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l]))
                )
            );
}

2025-06-12 00:30:22,516 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:30:22,582 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
           : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
           : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
               (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L]))/2,
               (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))/2 ) ) );
}

2025-06-12 00:30:22,583 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:30:22,583 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:30:37,085 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> ( (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
                ( (prev_0[u] - prev_1[l]) >= (prev_1[u] - prev_0[l]) ) ?
                    (prev_0[U] + (prev_1[U] - prev_0[U]) * ((prev_0[u]) / ((prev_0[u]) - (prev_1[l])))) :
                    (prev_1[U] + (prev_0[U] - prev_1[U]) * ((prev_1[u]) / ((prev_1[u]) - (prev_0[l]))))
            )
    );
}

2025-06-12 00:30:37,085 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:30:37,149 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (0.5 * (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L]))),
            (0.5 * (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])))
        );
}

2025-06-12 00:30:37,150 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:30:37,217 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? prev_0[l] : (f(prev_1, prev_0) ? prev_1[l] : max(prev_0[l], prev_1[l])),
            f(prev_0, prev_1) ? prev_0[u] : (f(prev_1, prev_0) ? prev_1[u] : max(prev_0[u], prev_1[u])),
            f(prev_0, prev_1) ? prev_0[L] : (f(prev_1, prev_0) ? prev_1[L] : max(prev_0[L], prev_1[L])),
            f(prev_0, prev_1) ? prev_0[U] : (f(prev_1, prev_0) ? prev_1[U] : max(prev_0[U], prev_1[U]))
    );
}

2025-06-12 00:30:37,217 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:30:37,217 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:30:58,113 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> ( (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
          ( (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            ( max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
              (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])) / 2,
              (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])) / 2
            )
          )
    );
}

2025-06-12 00:30:58,113 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:30:58,266 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (f(prev_1, prev_0)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5,
                (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5
            );
}

2025-06-12 00:30:58,266 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:30:58,473 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ?
        (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
      (f(prev_1, prev_0) ?
        (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            ((prev_0[u] - prev_1[l]) > (prev_1[u] - prev_0[l]) ? prev_0[L] : prev_1[L]),
            ((prev_0[u] - prev_1[l]) > (prev_1[u] - prev_0[l]) ? prev_0[U] : prev_1[U])
        )
      )
    );
}

2025-06-12 00:30:58,474 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:30:58,474 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:31:16,089 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                ((prev_0[L] * (prev_0[u] - prev_1[l]) + prev_1[L] * (prev_1[u] - prev_0[l])) / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l])),
                ((prev_0[U] * (prev_0[u] - prev_1[l]) + prev_1[U] * (prev_1[u] - prev_0[l])) / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l]))
            );
}

2025-06-12 00:31:16,090 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:31:16,245 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]),
             max(prev_0[u], prev_1[u]),
             (prev_0[L] * theta_left) + (prev_1[L] * theta_right),
             (prev_0[U] * theta_left) + (prev_1[U] * theta_right)
            );
    where
        theta_left = (prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]));
        theta_right = 1 - theta_left;
}

2025-06-12 00:31:16,246 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:31:16,397 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
      ( (prev_0[l] >= prev_1[u]) ?
          (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : ( (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             ( (prev_0[L] + prev_1[L]) * 0.5 ),
             ( (prev_0[U] + prev_1[U]) * 0.5 )
           )
        )
      );
}

2025-06-12 00:31:16,408 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:31:16,408 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:31:28,655 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        ((prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]),
             max(prev_0[u], prev_1[u]),
             (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L]))/2,
             (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))/2
            )
        );
}

2025-06-12 00:31:28,656 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:31:28,776 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
    (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        // Poly lower bound.
        (prev_0[L] * (prev_0[l] >= prev_1[l]) + prev_1[L] * (prev_0[l] < prev_1[l])),
        // Poly upper bound.
        (prev_0[U] * (prev_0[u] >= prev_1[u]) + prev_1[U] * (prev_0[u] < prev_1[u]))
    ))
}

2025-06-12 00:31:28,777 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:31:28,892 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
           (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
           (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:31:28,893 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:31:28,893 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:31:28,893 - INFO - [Max] Runtime: 150.94 seconds
2025-06-12 00:31:28,894 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
           (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
           (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:31:28,894 - INFO - 2025-06-12 00:31:28.894426 - Extracting Maxpool
2025-06-12 00:31:28,894 - INFO -
API: Maxpool -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:31:28,894 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:31:52,463 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        ((prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        ((prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] * ((prev_0[u]-prev_1[l])/( (prev_0[u]-prev_1[l]) + (prev_1[u]-prev_0[l])))) +
                (prev_1[L] * ((prev_1[u]-prev_0[l])/( (prev_0[u]-prev_1[l]) + (prev_1[u]-prev_0[l])))),
                (prev_0[U] * ((prev_0[u]-prev_1[l])/( (prev_0[u]-prev_1[l]) + (prev_1[u]-prev_0[l])))) +
                (prev_1[U] * ((prev_1[u]-prev_0[l])/( (prev_0[u]-prev_1[l]) + (prev_1[u]-prev_0[l]))))
            )
        )
    );
}

2025-06-12 00:31:52,464 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:31:52,689 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 596, in visitFuncCall
    exprstype = self.visit(node.arglist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (
                  f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (
                    (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                     (prev_0[L] + prev_1[L]) / 2,  (prev_0[U] + prev_1[U]) / 2
                    )
                )
            );
}

2025-06-12 00:31:52,689 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:31:52,825 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0, prev_1, ..., prev_n),
        max(prev_0, prev_1, ..., prev_n)
    );
}

2025-06-12 00:31:52,840 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:31:52,840 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:32:05,370 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0[L], prev_1[L], ..., prev_n[L]),
        max(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:32:05,370 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:32:05,561 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : (prev_0 + prev_1) / 2),
        (prev_0[u] >= prev_1[l]) ? prev_0 : ((prev_1[u] >= prev_0[l]) ? prev_1 : (prev_0 + prev_1) / 2)
    );
}

2025-06-12 00:32:05,561 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:32:05,678 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool ->
        (max(prev_0[l], prev_1[l], ..., prev_n[l]),
         max(prev_0[u], prev_1[u], ..., prev_n[u]),
         max(prev_0[L], prev_1[L], ..., prev_n[L]),
         max(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 00:32:05,678 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:32:05,678 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:32:15,271 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        (argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == i) ? prev_i[L] : 0,
        (argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == j) ? prev_j[U] : 0
    );
}

2025-06-12 00:32:15,271 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:32:15,368 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] + prev_1[L])/2,
                (prev_0[U] + prev_1[U])/2
            );
}

2025-06-12 00:32:15,369 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:32:15,471 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0, prev_1, ..., prev_n),
        max(prev_0, prev_1, ..., prev_n)
    );
}

2025-06-12 00:32:15,471 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:32:15,471 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:32:28,079 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0, prev_1, ..., prev_n),
        max(prev_0, prev_1, ..., prev_n)
    );
}

2025-06-12 00:32:28,079 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:32:28,201 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        (if prev_0[l] >= max(prev_1[u], ..., prev_n[u]) then prev_0
         else if prev_1[l] >= max(prev_0[u], prev_2[u], ..., prev_n[u]) then prev_1
         ...
         else PolyExp overapprox of max(prev_0,...,prev_n)),
        (if prev_0[u] >= max(prev_1[l], ..., prev_n[l]) then prev_0
         else if prev_1[u] >= max(prev_0[l], prev_2[l], ..., prev_n[l]) then prev_1
         ...
         else PolyExp overapprox of max(prev_0,...,prev_n))
    );
}

2025-06-12 00:32:28,201 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:32:28,342 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ? (
            prev_0[l], prev_0[u], prev_0[L], prev_0[U]
        ) : (
            (prev_1[l] >= prev_0[u]) ? (
                prev_1[l], prev_1[u], prev_1[L], prev_1[U]
            ) : (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                // Poly lower bound
                // Select a convex combination for lower: lambda in [0,1]
                // Here, use lambda = (prev_1[u] - prev_0[l]) / ((prev_1[u] - prev_0[l]) + (prev_0[u] - prev_1[l]))
                ((prev_1[u] - prev_0[l]) / ((prev_1[u] - prev_0[l]) + (prev_0[u] - prev_1[l])))*prev_0[L] +
                ((prev_0[u] - prev_1[l]) / ((prev_1[u] - prev_0[l]) + (prev_0[u] - prev_1[l])))*prev_1[L],
                // Poly upper bound: max of the upper expression
                max(prev_0[U], prev_1[U])
            )
        );
}

2025-06-12 00:32:28,342 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:32:28,343 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:32:52,389 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            (prev_0[L] * ((prev_0[l] >= prev_1[l]) ? 1 : 0) + prev_1[L] * ((prev_1[l] > prev_0[l]) ? 1 : 0)),
            (prev_0[U] * ((prev_0[u] >= prev_1[u]) ? 1 : 0) + prev_1[U] * ((prev_1[u] > prev_0[u]) ? 1 : 0)) );
}

2025-06-12 00:32:52,389 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:32:52,452 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0[L], prev_1[L], ..., prev_n[L]),
        max(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:32:52,452 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:32:52,521 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        (argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 0 ? prev_0 : (argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 1 ? prev_1 : ...)),
        (argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 0 ? prev_0 : (argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 1 ? prev_1 : ...))
    );
}

2025-06-12 00:32:52,522 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:32:52,522 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:33:01,426 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:33:01,427 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:33:01,497 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool ->
        (max(prev_0[l], prev_1[l], ..., prev_n[l]),
         max(prev_0[u], prev_1[u], ..., prev_n[u]),
         (argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 0) ? prev_0 : ((argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 1) ? prev_1 : ... : prev_n),
         (argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 0) ? prev_0 : ((argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 1) ? prev_1 : ... : prev_n)
        );
}

2025-06-12 00:33:01,497 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:33:01,579 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : (0.5*(prev_0 + prev_1))),
        (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 00:33:01,579 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:33:01,579 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:33:10,435 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : (prev_0 + prev_1)/2),
        (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 00:33:10,435 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:33:10,499 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0[L], prev_1[L], ..., prev_n[L]),
        max(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:33:10,499 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:33:10,581 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
         ((prev_0[L] + prev_1[L]) / 2),
         ((prev_0[U] + prev_1[U]) / 2));
}

2025-06-12 00:33:10,581 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:33:10,581 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:33:21,747 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : 0.5 * (prev_0 + prev_1)),
        (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 00:33:21,747 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:33:21,904 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        ((prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            ((prev_1[l] >= prev_0[u]) ?
                (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
                (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                    (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
                    (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
                    (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
                    (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
                )
            )
        );
}

2025-06-12 00:33:21,905 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:33:22,174 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> ((prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0, prev_0) :
               (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1, prev_1) :
               (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5,
                (prev_0 + prev_1 + abs(prev_0 - prev_1)) * 0.5));
}

2025-06-12 00:33:22,174 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:33:22,175 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:33:32,889 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        ((prev_0[u] <= prev_1[l]) ? prev_1 : ((prev_1[u] <= prev_0[l]) ? prev_0 : (prev_0 + prev_1) * 0.5)),
        ((prev_0[u] >= prev_1[l]) ? prev_0 : ((prev_1[u] >= prev_0[l]) ? prev_1 : (prev_0 + prev_1) * 0.5))
    );
}

2025-06-12 00:33:32,889 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:33:32,959 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        ( (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
          (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
          (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
           (prev_0[L] >= prev_1[U]) ? prev_0[L] : ((prev_1[L] >= prev_0[U]) ? prev_1[L] : max(prev_0[L], prev_1[L])),
           (prev_0[U] >= prev_1[L]) ? prev_0[U] : ((prev_1[U] >= prev_0[L]) ? prev_1[U] : max(prev_0[U], prev_1[U]))
          )
        );
}

2025-06-12 00:33:32,959 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:33:33,034 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (max(prev_0[l], prev_1[l]),
         max(prev_0[u], prev_1[u]),
         (prev_0[l] >= prev_1[l]) ? prev_0 : prev_1,
         (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1);
}

2025-06-12 00:33:33,034 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:33:33,034 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:33:52,371 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[L] >= prev_1[U]) ? prev_0[L] : ((prev_1[L] >= prev_0[U]) ? prev_1[L] : max(prev_0[L], prev_1[L])),
        (prev_0[U] >= prev_1[L]) ? prev_0[U] : ((prev_1[U] >= prev_0[L]) ? prev_1[U] : max(prev_0[U], prev_1[U]))
    );
}

2025-06-12 00:33:52,371 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:33:52,447 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        ( (max(prev_0[l], prev_1[l])),
          (max(prev_0[u], prev_1[u])),
          (max(prev_0, prev_1)),
          (max(prev_0, prev_1)) );
}

2025-06-12 00:33:52,448 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:33:52,513 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0[L], prev_1[L], ..., prev_n[L]),
        max(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:33:52,513 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:33:52,513 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:33:52,513 - INFO - [Maxpool] Runtime: 143.62 seconds
2025-06-12 00:33:52,513 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    MaxPool -> (
        max(prev_0[l], prev_1[l], ..., prev_n[l]),
        max(prev_0[u], prev_1[u], ..., prev_n[u]),
        max(prev_0[L], prev_1[L], ..., prev_n[L]),
        max(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:33:52,513 - INFO - 2025-06-12 00:33:52.513820 - Extracting Min
2025-06-12 00:33:52,513 - INFO -
API: Min -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:33:52,513 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:34:04,344 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:34:04,345 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:34:04,514 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (f(prev_0, prev_1) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (f(prev_1, prev_0) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
             (prev_0[L] + prev_1[L] - abs(prev_0[L] - prev_1[L])) * 0.5,
             (prev_0[U] + prev_1[U] - abs(prev_0[U] - prev_1[U])) * 0.5))
           );
}

2025-06-12 00:34:04,514 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:34:04,628 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
            (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:34:04,628 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:34:04,628 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:34:11,557 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] >= prev_1[U]) ? prev_1[U] : prev_0[U]
    );
}

2025-06-12 00:34:11,557 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:34:11,712 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        (prev_0[l] <= prev_1[l]) ? prev_0[l] : prev_1[l],
        (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:34:11,712 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:34:11,827 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        ((prev_0[l]) <= (prev_1[l])) ? (prev_0[l]) : (prev_1[l]),
        ((prev_0[u]) <= (prev_1[u])) ? (prev_0[u]) : (prev_1[u]),
        ((prev_0[L]) <= (prev_1[L])) ? (prev_0[L]) : (prev_1[L]),
        ((prev_0[U]) <= (prev_1[U])) ? (prev_0[U]) : (prev_1[U])
    );
}

2025-06-12 00:34:11,827 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:34:11,827 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:34:20,771 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]),
            min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U] );
}

2025-06-12 00:34:20,771 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:34:20,873 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:34:20,873 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:34:20,941 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (prev_0[u] <= prev_1[l]) ?
            (prev_0[l], prev_0[u], prev_0, prev_0) :
        (prev_1[u] <= prev_0[l]) ?
            (prev_1[l], prev_1[u], prev_1, prev_1) :
            (
                min(prev_0[l], prev_1[l]),
                min(prev_0[u], prev_1[u]),
                (prev_0 + prev_1 - abs(prev_0 - prev_1)) * 0.5,
                (prev_0 + prev_1 - abs(prev_0 - prev_1)) * 0.5
            );
}

2025-06-12 00:34:20,942 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:34:20,942 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:34:28,574 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:34:28,574 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:34:28,643 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        (min(prev_0[l], prev_1[l])),
        (min(prev_0[u], prev_1[u])),
        (min(prev_0, prev_1)),
        (min(prev_0, prev_1))
    );
}

2025-06-12 00:34:28,643 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:34:28,711 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (f(prev_0, prev_1)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (f(prev_1, prev_0)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (
            min(prev_0[l], prev_1[l]),
            min(prev_0[u], prev_1[u]),
            (prev_0[L] + prev_1[L] - abs(prev_0[L] - prev_1[L])) / 2,
            (prev_0[U] + prev_1[U] - abs(prev_0[U] - prev_1[U])) / 2
        );
}

2025-06-12 00:34:28,711 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:34:28,711 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:34:52,352 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:34:52,352 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:34:52,421 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> ( (min(prev_0[l], prev_1[l])),
             (min(prev_0[u], prev_1[u])),

             (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
             (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
           );
}

2025-06-12 00:34:52,421 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:34:52,484 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (prev_0[l] <= prev_1[l]) ?
            (prev_0[l], min(prev_0[u], prev_1[u]), prev_0[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U])
        :
            (prev_1[l], min(prev_0[u], prev_1[u]), prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:34:52,484 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:34:52,484 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:35:02,066 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:02,066 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:02,133 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            ((prev_0[L]) <= (prev_1[L])) ? prev_0[L] : prev_1[L],
            ((prev_0[U]) <= (prev_1[U])) ? prev_0[U] : prev_1[U]
           );
}

2025-06-12 00:35:02,133 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:02,194 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:02,194 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:02,194 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:35:11,656 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:11,656 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:11,772 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (prev_0[l] <= prev_1[l]) ? (
            prev_0[l],
            (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
        ) : (
            prev_1[l],
            (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
        );
}

2025-06-12 00:35:11,773 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:11,943 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:11,943 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:11,943 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:35:18,632 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        (prev_0[l] <= prev_1[l]) ? prev_0[l] : prev_1[l],
        (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:18,632 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:18,777 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:18,777 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:18,945 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
        (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:18,946 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:18,946 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:35:27,493 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L], (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:35:27,493 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:27,607 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
        (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:27,607 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:27,730 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:27,730 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:27,730 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:35:52,498 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> ((prev_0[l] <= prev_1[l]) ? (
        prev_0[l],
        (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    ) : (
        prev_1[l],
        (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    ))
}

2025-06-12 00:35:52,512 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:52,651 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:52,651 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:52,794 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:35:52,795 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:52,795 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:35:52,795 - INFO - [Min] Runtime: 120.28 seconds
2025-06-12 00:35:52,795 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:35:52,795 - INFO - 2025-06-12 00:35:52.795937 - Extracting Minpool
2025-06-12 00:35:52,796 - INFO -
API: Minpool -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:35:52,796 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:35:59,527 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:59,527 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:35:59,663 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly {
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:59,664 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:35:59,793 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] < prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] < prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:35:59,793 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:35:59,793 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:36:06,735 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:36:06,735 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:36:06,849 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (min(prev_0[l], prev_1[l], ..., prev_n[l]), min(prev_0[u], prev_1[u], ..., prev_n[u]), min(prev_0[L], prev_1[L], ..., prev_n[L]), min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 00:36:06,861 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:36:06,984 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:36:06,984 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:36:06,984 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:36:14,057 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]),
         min(prev_0[u], prev_1[u]),
         (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
         (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:36:14,057 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:36:14,213 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:36:14,214 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:36:14,449 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]),
         min(prev_0[u], prev_1[u]),
         (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
         (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:36:14,449 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:36:14,449 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:36:26,046 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l], ..., prev_n[l]),
         min(prev_0[u], prev_1[u], ..., prev_n[u]),
         min(prev_0[L], prev_1[L], ..., prev_n[L]),
         min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 00:36:26,046 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:36:26,285 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ...),
        min(prev_0[u], prev_1[u], ...),
        if(prev_0[l] <= prev_1[l] && prev_0[l] <= ...) { prev_0[L] } else if(prev_1[l] <= prev_0[l] && prev_1[l] <= ...) { prev_1[L] } else { ... },
        if(prev_0[u] <= prev_1[u] && prev_0[u] <= ...) { prev_0[U] } else if(prev_1[u] <= prev_0[u] && prev_1[u] <= ...) { prev_1[U] } else { ... }
    );
}

2025-06-12 00:36:26,285 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:36:26,409 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:36:26,409 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:36:26,410 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:36:34,477 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:36:34,477 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:36:52,397 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[l] <= prev_1[l]) ? prev_0 : prev_1, (prev_0[u] <= prev_1[u]) ? prev_0 : prev_1);
}

2025-06-12 00:36:52,397 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:36:52,464 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        PolyExp.min(prev_0[L], prev_1[L], ..., prev_n[L]),
        PolyExp.min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:36:52,464 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:36:52,464 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:37:00,325 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_1[U] : prev_0[U]);
}

2025-06-12 00:37:00,325 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:37:00,408 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[u]) ? prev_0[L] : prev_1[L],
        (prev_0[u] <= prev_1[l]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:37:00,408 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:37:00,513 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l], ..., prev_n[l]),
                min(prev_0[u], prev_1[u], ..., prev_n[u]),
                min(prev_0[L], prev_1[L], ..., prev_n[L]),
                min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 00:37:00,513 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:37:00,513 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:37:07,656 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l], ..., prev_n[l]), min(prev_0[u], prev_1[u], ..., prev_n[u]), min(prev_0[L], prev_1[L], ..., prev_n[L]), min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 00:37:07,657 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:37:07,721 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0, prev_1, ..., prev_n),
        min(prev_0, prev_1, ..., prev_n)
    );
}

2025-06-12 00:37:07,721 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:37:07,788 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:37:07,788 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:37:07,788 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:37:17,378 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l], ..., prev_n[l]),
         min(prev_0[u], prev_1[u], ..., prev_n[u]),
         (prev_0[L] <= prev_1[L] && ... && prev_0[L] <= prev_n[L]) ? prev_0[L] : ((prev_1[L] <= prev_2[L] && ... && prev_1[L] <= prev_n[L]) ? prev_1[L] : ... ),
         (prev_0[U] <= prev_1[U] && ... && prev_0[U] <= prev_n[U]) ? prev_0[U] : ((prev_1[U] <= prev_2[U] && ... && prev_1[U] <= prev_n[U]) ? prev_1[U] : ... )
        );
}

2025-06-12 00:37:17,378 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:37:17,439 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 00:37:17,439 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:37:17,508 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:37:17,509 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:37:17,509 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:37:25,915 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:37:25,915 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:37:26,035 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]),
         min(prev_0[u], prev_1[u]),
         (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
         (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 00:37:26,036 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:37:26,249 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
         // lower poly
         ((prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L]),
         // upper poly
         ((prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U])
        );
}

2025-06-12 00:37:26,255 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:37:26,255 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:37:36,081 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
        (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 00:37:36,081 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:37:36,157 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_N[l]),
        min(prev_0[u], prev_1[u], ..., prev_N[u]),
        (argmin(prev_0[l], prev_1[l], ..., prev_N[l]) == 0 ? prev_0[L] : (argmin(prev_0[l], prev_1[l], ..., prev_N[l]) == 1 ? prev_1[L] : ... : prev_N[L])),
        (argmin(prev_0[u], prev_1[u], ..., prev_N[u]) == 0 ? prev_0[U] : (argmin(prev_0[u], prev_1[u], ..., prev_N[u]) == 1 ? prev_1[U] : ... : prev_N[U]))
    );
}

2025-06-12 00:37:36,157 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:37:52,362 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_1[U] : prev_0[U]);
}

2025-06-12 00:37:52,362 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:37:52,362 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:37:52,362 - INFO - [Minpool] Runtime: 119.57 seconds
2025-06-12 00:37:52,362 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_1[U] : prev_0[U]);
}

2025-06-12 00:37:52,362 - INFO - 2025-06-12 00:37:52.362786 - Extracting Mult
2025-06-12 00:37:52,362 - INFO -
API: Mult -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:37:52,362 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:38:06,518 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:38:06,518 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:38:06,580 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u])),
             max(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u])),
             prev_0 * prev_1,
             prev_0 * prev_1);
}

2025-06-12 00:38:06,580 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:38:06,660 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (f(prev_0,0) && f(prev_1,0)) ? (
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) : (
        (f(0,prev_0) && f(0,prev_1)) ? (
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) : (
        (
            min(
                simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
                simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
                simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
                simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
            ),
            max(
                simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
                simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
                simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
                simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
            ),
            prev_0 * prev_1,
            prev_0 * prev_1
        )));
}

2025-06-12 00:38:06,660 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:38:06,660 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:38:19,101 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        max(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        (prev_1[u] >= 0) ? ((prev_1[u]) * prev_0) : ((prev_1[l]) * prev_0),
        (prev_1[l] >= 0) ? ((prev_1[l]) * prev_0) : ((prev_1[u]) * prev_0)
    );
}

2025-06-12 00:38:19,102 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:38:19,220 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (
            min(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_lower(prev_1, prev_0[l]),
                simplify_lower(prev_1, prev_0[u])
            ),
            max(
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u]),
                simplify_upper(prev_1, prev_0[l]),
                simplify_upper(prev_1, prev_0[u])
            ),
            prev_0 * prev_1,
            prev_0 * prev_1
        );
}

2025-06-12 00:38:19,220 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:38:19,373 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (simplify_lower(prev_0,1)*simplify_lower(prev_1,1)).min(simplify_lower(prev_0,1)*simplify_upper(prev_1,1)).min(simplify_upper(prev_0,1)*simplify_lower(prev_1,1)).min(simplify_upper(prev_0,1)*simplify_upper(prev_1,1)),
          (simplify_lower(prev_0,1)*simplify_lower(prev_1,1)).max(simplify_lower(prev_0,1)*simplify_upper(prev_1,1)).max(simplify_upper(prev_0,1)*simplify_lower(prev_1,1)).max(simplify_upper(prev_0,1)*simplify_upper(prev_1,1)),
          (prev_0 * prev_1),
          (prev_0 * prev_1)
        );
}

2025-06-12 00:38:19,373 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:38:19,373 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:38:38,180 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:38:38,180 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:38:38,260 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ((prev_0[l] >= 0) & (prev_1[l] >= 0)) ?
            (simplify_lower(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), prev_0*prev_1, prev_0*prev_1)
        : ((prev_0[u] <= 0) & (prev_1[u] <= 0)) ?
            (simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), prev_0*prev_1, prev_0*prev_1)
        : ((prev_0[l] >= 0) & (prev_1[u] <= 0)) ?
            (simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), prev_0*prev_1, prev_0*prev_1)
        : ((prev_0[u] <= 0) & (prev_1[l] >= 0)) ?
            (simplify_lower(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), prev_0*prev_1, prev_0*prev_1)
        :
            (min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u])),
             max(simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u])),
             prev_0*prev_1,
             prev_0*prev_1);
}

2025-06-12 00:38:38,260 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:38:52,356 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        backsubs_lower(prev_0 * prev_1, prev_0) + backsubs_lower(prev_0 * prev_1, prev_1),
        backsubs_upper(prev_0 * prev_1, prev_0) + backsubs_upper(prev_0 * prev_1, prev_1)
    );
}

2025-06-12 00:38:52,356 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:38:52,356 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:39:12,038 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        max(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:12,039 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:39:12,112 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( ((prev_0[l] >= 0) & (prev_1[l] >= 0)) ?
            (simplify_lower(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), prev_0 * prev_1, prev_0 * prev_1)
        : ((prev_0[u] <= 0) & (prev_1[u] <= 0)) ?
            (simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), prev_0 * prev_1, prev_0 * prev_1)
        : ((prev_0[l] >= 0) & (prev_1[u] <= 0)) ?
            (simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), prev_0 * prev_1, prev_0 * prev_1)
        : ((prev_0[u] <= 0) & (prev_1[l] >= 0)) ?
            (simplify_lower(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), prev_0 * prev_1, prev_0 * prev_1)
        : (
            min(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_lower(prev_1, prev_0[l]),
                simplify_lower(prev_1, prev_0[u])
            ),
            max(
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u]),
                simplify_upper(prev_1, prev_0[l]),
                simplify_upper(prev_1, prev_0[u])
            ),
            prev_0 * prev_1,
            prev_0 * prev_1
        )
    );
}

2025-06-12 00:39:12,113 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:39:12,194 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        // PolyExp lower and upper approximation
        prev_0[l] >= 0 && prev_1[l] >= 0 ? (prev_0[L] * prev_1[L]) :
        prev_0[u] <= 0 && prev_1[u] <= 0 ? (prev_0[U] * prev_1[U]) :
        0,
        prev_0[u] >= 0 && prev_1[u] >= 0 ? (prev_0[U] * prev_1[U]) :
        prev_0[l] <= 0 && prev_1[l] <= 0 ? (prev_0[L] * prev_1[L]) :
        0
    );
}

2025-06-12 00:39:12,194 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:39:12,194 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:39:26,291 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (simplify_lower(prev_0,1)*simplify_lower(prev_1,1)).min(
            simplify_lower(prev_0,1)*simplify_upper(prev_1,1),
            simplify_upper(prev_0,1)*simplify_lower(prev_1,1),
            simplify_upper(prev_0,1)*simplify_upper(prev_1,1)),
          (simplify_lower(prev_0,1)*simplify_lower(prev_1,1)).max(
            simplify_lower(prev_0,1)*simplify_upper(prev_1,1),
            simplify_upper(prev_0,1)*simplify_lower(prev_1,1),
            simplify_upper(prev_0,1)*simplify_upper(prev_1,1)),
          prev_0*prev_1,
          prev_0*prev_1
        );
}

2025-06-12 00:39:26,293 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:39:26,508 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:26,509 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:39:26,627 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        max(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:26,628 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:39:26,628 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:39:36,010 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
        simplify_upper(prev_0,1) * simplify_upper(prev_1,1),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:36,010 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:39:36,167 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:36,232 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:39:36,381 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:36,381 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:39:36,381 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:39:50,234 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (prev_0[l] >= 0 && prev_1[l] >= 0) ? (
            simplify_lower(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            replace_lower(prev_0, prev_1[L]),
            replace_upper(prev_0, prev_1[U])
        ) : (prev_0[u] <= 0 && prev_1[u] <= 0) ? (
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            replace_lower(prev_0, prev_1[U]),
            replace_upper(prev_0, prev_1[L])
        ) : (
            min(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_lower(prev_1, prev_0[l]),
                simplify_lower(prev_1, prev_0[u])
            ),
            max(
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u]),
                simplify_upper(prev_1, prev_0[l]),
                simplify_upper(prev_1, prev_0[u])
            ),
            min(
                replace_lower(prev_0, prev_1[L]),
                replace_lower(prev_0, prev_1[U]),
                replace_lower(prev_1, prev_0[L]),
                replace_lower(prev_1, prev_0[U])
            ),
            max(
                replace_upper(prev_0, prev_1[L]),
                replace_upper(prev_0, prev_1[U]),
                replace_upper(prev_1, prev_0[L]),
                replace_upper(prev_1, prev_0[U])
            )
        );
}

2025-06-12 00:39:50,234 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:39:50,446 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ((prev_0[l] >= 0) & (prev_1[l] >= 0)) ? (
            simplify_lower(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) :
        ((prev_0[u] <= 0) & (prev_1[u] <= 0)) ? (
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) : (
            min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u])),
            max(simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u])),
            0,
            max(prev_0 * prev_1, 0)
        );
}

2025-06-12 00:39:50,446 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:39:50,601 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
    (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:39:50,601 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:39:50,601 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:40:04,624 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        max(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        prev_0 * (prev_1[u] >= 0 ? prev_1[L] : prev_1[U]) + prev_1 * (prev_0[u] >= 0 ? prev_0[L] : prev_0[U]) -
            (prev_0[l] >= 0 ? prev_0[l] : prev_0[u]) * (prev_1[l] >= 0 ? prev_1[l] : prev_1[u]),
        prev_0 * (prev_1[l] >= 0 ? prev_1[U] : prev_1[L]) + prev_1 * (prev_0[l] >= 0 ? prev_0[U] : prev_0[L]) -
            (prev_0[u] <= 0 ? prev_0[u] : prev_0[l]) * (prev_1[u] <= 0 ? prev_1[u] : prev_1[l])
    );
}

2025-06-12 00:40:04,624 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:40:04,739 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:40:04,740 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:40:04,866 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        max(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:40:04,866 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:40:04,866 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:40:19,017 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0[l] >= 0 ? prev_1[l] >= 0 ? prev_0[L] * prev_1[L] : prev_0[L] * prev_1[U] : prev_1[L] * prev_0[U],
        prev_0[u] <= 0 ? prev_1[u] <= 0 ? prev_0[U] * prev_1[U] : prev_0[U] * prev_1[L] : prev_1[U] * prev_0[L]
    );
}

2025-06-12 00:40:19,017 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:40:19,174 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:40:19,174 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:40:19,295 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        max(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 00:40:19,295 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:40:19,295 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:40:35,526 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (simplify_lower(prev_0,1) * simplify_lower(prev_1,1)).min(simplify_lower(prev_0,1) * simplify_upper(prev_1,1))
            .min(simplify_upper(prev_0,1) * simplify_lower(prev_1,1))
            .min(simplify_upper(prev_0,1) * simplify_upper(prev_1,1)),
          (simplify_lower(prev_0,1) * simplify_lower(prev_1,1)).max(simplify_lower(prev_0,1) * simplify_upper(prev_1,1))
            .max(simplify_upper(prev_0,1) * simplify_lower(prev_1,1))
            .max(simplify_upper(prev_0,1) * simplify_upper(prev_1,1)),
          prev_0 * simplify_lower(prev_1,1) + simplify_lower(prev_0,1) * (prev_1 - simplify_lower(prev_1,1)),
          prev_0 * simplify_upper(prev_1,1) + simplify_upper(prev_0,1) * (prev_1 - simplify_upper(prev_1,1))
        );
}

2025-06-12 00:40:35,526 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:40:35,764 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (f(prev_0, prev_1)) ? (
            simplify_lower(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u]),
            replace_lower(prev_1, prev_0[L]),
            replace_upper(prev_1, prev_0[U])
        ) : (
            (f(prev_1, prev_0)) ? (
                simplify_lower(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u]),
                replace_lower(prev_0, prev_1[L]),
                replace_upper(prev_0, prev_1[U])
            ) : (
                min(
                    prev_0[l] * prev_1[l],
                    prev_0[l] * prev_1[u],
                    prev_0[u] * prev_1[l],
                    prev_0[u] * prev_1[u]
                ),
                max(
                    prev_0[l] * prev_1[l],
                    prev_0[l] * prev_1[u],
                    prev_0[u] * prev_1[l],
                    prev_0[u] * prev_1[u]
                ),
                0,
                max(
                    prev_0[u] * prev_1[u],
                    prev_0[l] * prev_1[u],
                    prev_0[u] * prev_1[l],
                    prev_0[l] * prev_1[l]
                )
            )
        );
}

2025-06-12 00:40:35,780 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:40:36,002 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
      (
        min(
          simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
          simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
          simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
          simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
          simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
          simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
          simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
          simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        prev_0 * simplify_lower(prev_1,1) + prev_1 * simplify_lower(prev_0,1) - simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
        prev_0 * simplify_upper(prev_1,1) + prev_1 * simplify_upper(prev_0,1) - simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
      );
}

2025-06-12 00:40:36,002 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:40:36,003 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:40:36,003 - INFO - [Mult] Runtime: 163.64 seconds
2025-06-12 00:40:36,003 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Mult ->
      (
        min(
          simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
          simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
          simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
          simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
          simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
          simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
          simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
          simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        prev_0 * simplify_lower(prev_1,1) + prev_1 * simplify_lower(prev_0,1) - simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
        prev_0 * simplify_upper(prev_1,1) + prev_1 * simplify_upper(prev_0,1) - simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
      );
}

2025-06-12 00:40:36,003 - INFO - 2025-06-12 00:40:36.003877 - Extracting Relu
2025-06-12 00:40:36,004 - INFO -
API: Relu -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:40:36,004 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:40:43,569 - INFO - [STEP 1] Sample 1: Validation passed.
2025-06-12 00:40:43,569 - INFO - [Relu] Runtime: 7.57 seconds
2025-06-12 00:40:43,569 - INFO - Succeed. Saved to logs/2025-06-12_00-14-14/results/GPT-4.1/success/Relu.txt

2025-06-12 00:40:43,569 - INFO - 2025-06-12 00:40:43.569435 - Extracting Relu6
2025-06-12 00:40:43,569 - INFO -
API: Relu6 -> Model: GPT-4.1 @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 00:40:43,569 - INFO - [STEP 1] Starting step 1/1
2025-06-12 00:41:05,691 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
        ((prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, ((prev[u]/(prev[u]-prev[l]))*prev) - ((prev[u]*prev[l])/(prev[u]-prev[l]))) :
        ((prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, prev + ((6-prev[u])/(prev[u]-prev[l]))*(prev-u)) :
        (0, 6, 0, ((6/(prev[u]-prev[l]))*(prev-prev[l])))))));
}

2025-06-12 00:41:05,691 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:41:05,876 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 191, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: and is not defined on Bool and Float

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
        ((prev[l] >= 6) ? (6, 6, 6, 6) :
        ((prev[l] >= 0 and prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0 and prev[u] <= 6) ?
            (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0 and prev[u] > 6) ?
            (prev[l], 6, prev, prev + ((6 - prev[u]) / (prev[u] - prev[l])) * (prev - prev[u])) :
            (0, 6, 0,
                ((6 - prev[l]) / (prev[u] - prev[l])) * prev +
                ((prev[u] - 6) / (prev[u] - prev[l])) * 6 -
                ((prev[l] * (6 - prev[l])) / (prev[u] - prev[l]))
            )
        )))));
}

2025-06-12 00:41:05,877 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:41:06,555 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:41:06,555 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 00:41:31,324 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
    // Case 1: prev[l] >= 6
    ((prev[l] >= 6) ?
        (6, 6, 6, 6) :
    // Case 2: prev[u] <= 0
    ((prev[u] <= 0) ?
        (0, 0, 0, 0) :
    // Case 3: prev[l] >= 0 && prev[u] <= 6
    ((prev[l] >= 0 && prev[u] <= 6) ?
        (prev[l], prev[u], prev, prev) :
    // Case 4: prev[l] < 0 && prev[u] > 0 && prev[u] <= 6
    ((prev[l] < 0 && prev[u] > 0 && prev[u] <= 6) ?
        (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
    // Case 5: prev[l] >= 0 && prev[l] < 6 && prev[u] > 6
    ((prev[l] >= 0 && prev[l] < 6 && prev[u] > 6) ?
        (prev[l], 6, prev, (((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + 6)) :
    // Case 6: prev[l] < 0 && prev[u] > 6
        (0, 6, 0, max(
            ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])),
            (((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + 6)
        ))
    )))))
}

2025-06-12 00:41:31,325 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:41:31,392 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ? (6, 6, 6, 6) :
        ((prev[u] <= 0)) ? (0, 0, 0, 0) :
        ((prev[l] >= 0) & (prev[u] <= 6)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u]*prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev, ((6 - prev[l])/(prev[u] - prev[l])) * prev + ((prev[u] - 6) * prev[l])/(prev[u] - prev[l]))) :
        (0, 6, 0, (6/(prev[u] - prev[l])) * prev + ((prev[u] - 6)*(-prev[l])/(prev[u] - prev[l])) );
}

2025-06-12 00:41:31,392 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:41:31,471 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ?
            (0, 0, 0, 0)
        : ((prev[l]) >= 6) ?
            (6, 6, 6, 6)
        : (((prev[l]) >= 0) & ((prev[u]) <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : (((prev[l]) < 0) & ((prev[u]) <= 6)) ?
            (0, prev[u], 0, ((prev[u]/(prev[u] - prev[l])) * prev) - ((prev[u]*prev[l])/(prev[u] - prev[l])))
        : (((prev[l]) >= 0) & ((prev[u]) > 6)) ?
            (prev[l], 6, prev, prev + ((6-prev[u])/(prev[u]-prev[l])) * (prev - prev[l]) )
        :
            (0, 6, 0, ((prev[u]/(prev[u]-prev[l])) * prev - (prev[u]*prev[l])/(prev[u]-prev[l])) + ((6-prev[l])/(prev[u]-prev[l])) * (prev - prev[u])) ;
}

2025-06-12 00:41:31,471 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:41:31,471 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 00:41:47,972 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ? (6, 6, 6, 6)
        : (((prev[u]) <= 0) ? (0, 0, 0, 0)
        : (((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev)
        : (((prev[l]) < 0 && (prev[u]) > 6) ? (0, 6, 0, 6)
        : (((prev[l]) < 0) ? (0, min(prev[u], 6), 0, ((min(prev[u], 6) / (prev[u] - prev[l])) * prev) - ((min(prev[u], 6) * prev[l]) / (prev[u] - prev[l])))
        : ((prev[u]) > 6) ? (max(prev[l], 0), 6, prev, ((6 - prev[l]) / (prev[u] - prev[l])) * prev + (prev[u] * (6 - prev[l]) / (prev[u] - prev[l])))
        : (0, 6, 0, 6))))));
}

2025-06-12 00:41:47,972 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:41:48,047 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0)
            ? (0, 0, 0, 0)
        : ((prev[l]) >= 6)
            ? (6, 6, 6, 6)
        : ((prev[l]) >= 0 && (prev[u]) <= 6)
            ? (prev[l], prev[u], prev, prev)
        : ((prev[l]) < 0 && (prev[u]) <= 6)
            ? (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
        : ((prev[l]) >= 0 && (prev[u]) > 6)
            ? (prev[l], 6, prev, ((6 - prev[l]) / (prev[u] - prev[l]) * (prev - prev[l]) + prev[l]))
        : (0, 6, 0, min(((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])), ((6 - prev[l]) / (prev[u] - prev[l]) * (prev - prev[l]) + prev[l])));
}

2025-06-12 00:41:48,047 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:41:48,125 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0)
        : (((prev[l]) >= 6) ? (6, 6, 6, 6)
        : (((prev[l]) >= 0) ?
            ((prev[l]), min(prev[u], 6), prev, prev)
        : (((prev[u]) <= 6) ?
            (0, (prev[u]), 0, prev)
        :
            (0, 6, 0, prev * ((prev[u]-0)/((prev[u]-prev[l]))) - ((prev[l] * prev[u])/((prev[u]-prev[l]))) )
        )));
}

2025-06-12 00:41:48,125 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:41:48,125 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 00:42:05,485 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6) :
        ((prev[u] <= 0)) ?
            (0, 0, 0, 0) :
        ((prev[l] >= 0) && (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) && (prev[u] <= 6)) ?
            (0, prev[u], 0, prev * prev[u] / (prev[u] - prev[l]) - prev[u] * prev[l] / (prev[u] - prev[l])) :
        ((prev[l] >= 0) && (prev[u] > 6)) ?
            (prev[l], 6, prev, prev * (6 - prev[l]) / (prev[u] - prev[l]) + prev[u] * (prev[u] - 6) / (prev[u] - prev[l])) :
        (0, 6, 0,
            (prev * 6 / (prev[u] - prev[l]) - prev[u] * prev[l] / (prev[u] - prev[l])) * (6 - prev[l]) / (prev[u] - prev[l])
            + prev[u] * (prev[u] - 6) / (prev[u] - prev[l]));
}

2025-06-12 00:42:05,486 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:42:05,559 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ?
            (6, 6, 6, 6) :
        (prev[u] <= 0) ?
            (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ?
            (0, prev[u], 0, prev * (prev[u] / (prev[u] - prev[l])) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ?
            (prev[l], 6, prev, prev + (6 - prev[u])) :
        (0, 6, 0, prev * (6 / (prev[u] - prev[l])) - (prev[l] * 6 / (prev[u] - prev[l])));
}

2025-06-12 00:42:05,559 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:42:05,650 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u]/(prev[u]-prev[l])) * prev - (prev[u]*prev[l])/(prev[u]-prev[l])) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, prev + ((6-prev[u])/(prev[u]-prev[l]))*(prev - prev[u])) :
        (prev[l] < 0 && prev[u] > 6) ? (0, 6, 0, min((prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l]), prev + ((6-prev[u])/(prev[u]-prev[l]))*(prev-prev[u]))) ;
}

2025-06-12 00:42:05,650 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:42:05,651 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 00:42:30,235 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ?
            (6, 6, 6, 6) :
        (prev[u] <= 0) ?
            (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ?
            (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ?
            (prev[l], 6, prev, prev + (6 - prev[u])) :
        // Mixed case: prev[l] < 0 && prev[u] > 6
            (0, 6, 0, (6 * (prev - prev[l]) / (prev[u] - prev[l])))
;

2025-06-12 00:42:30,235 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:42:30,314 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, (((6 - prev[l]) / (prev[u] - prev[l])) * (prev)) + ((prev[u] * (prev[l] - 6)) / (prev[u] - prev[l]))) :
        (0, 6, 0, ((6 / (prev[u] - prev[l])) * prev) - ((6 * prev[l]) / (prev[u] - prev[l])));
}

2025-06-12 00:42:30,314 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:42:30,450 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Neuron and Int

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ? (6, 6, 6, 6) :
        (((prev[u]) <= 0) ? (0, 0, 0, 0) :
        (((prev[l]) >= 0) ?
            ((min(prev[u], 6)), (min(prev[u], 6)), (min(prev, 6)), (min(prev, 6))) :
            ((prev[u] <= 6) ?
                (0, prev[u], 0, ((prev[u]) / ((prev[u]) - (prev[l]))) * prev - (((prev[u]) * (prev[l])) / ((prev[u]) - (prev[l])))) :
                (0, 6, 0, (6 / (prev[u] - prev[l])) * prev - (6 * prev[l]) / (prev[u] - prev[l])))
        )
    );
}

2025-06-12 00:42:30,450 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:42:30,450 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 00:42:50,937 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0) :
        ((prev[l]) >= 6) ? (6, 6, 6, 6) :
        ((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < 0 && (prev[u]) <= 6) ?
            (0,
             prev[u],
             0,
             (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l] / (prev[u] - prev[l]))
            ) :
        ((prev[l]) >= 0 && (prev[u]) > 6) ?
            (prev[l],
             6,
             prev,
             ((6 - prev[l]) / (prev[u] - prev[l])) * prev + ((prev[u] - 6) / (prev[u] - prev[l])) * 6
            ) :
        ( // (prev[l]) < 0 && (prev[u]) > 6
            0,
            6,
            0,
            max(
                (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l] / (prev[u] - prev[l])),
                ((6 - prev[l]) / (prev[u] - prev[l])) * prev + ((prev[u] - 6) / (prev[u] - prev[l])) * 6
            )
        );
}

2025-06-12 00:42:50,938 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:42:51,011 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6)
      : (prev[u] <= 0) ? (0, 0, 0, 0)
      : (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev)
      : (prev[l] < 0 && prev[u] > 6) ? (0, 6, 0, (((6 - prev[l])/(prev[u] - prev[l])) * prev) + ((prev[u] - 6)/(prev[u] - prev[l])) * 6))
      : (prev[l] < 0) ? (0, prev[u], 0, ((prev[u]/(prev[u] - prev[l])) * prev) - ((prev[u] * prev[l])/(prev[u] - prev[l])))
      : (prev[u] > 6) ? (prev[l], 6, prev, ((6 - prev[l])/(prev[u] - prev[l])) * prev + ((prev[u] - 6)/(prev[u] - prev[l])) * 6)
      : (0, 6, 0, 6);
}

2025-06-12 00:42:51,011 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:42:51,092 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
        ((prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev + (6 - prev[u]), prev + (6 - prev[u])) :
        (0, 6, 0,
            (6/(prev[u]-prev[l])) * prev
            - (prev[l]*6)/(prev[u]-prev[l])
            + (6-prev[u])/(prev[u]-prev[l]) * (prev - prev[l])  // affine upper bound for clamp above
        )
        ))));
}

2025-06-12 00:42:51,092 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:42:51,092 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 00:43:06,513 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6) :
        ((prev[u] <= 0)) ?
            (0, 0, 0, 0) :
        ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, (prev * (prev[u] / (prev[u] - prev[l]))) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev, 6) :
        ((prev[l] < 0) & (prev[u] > 6)) ?
            (0, 6, 0, ((prev * (6 / (prev[u] - prev[l]))) - ((prev[u] * prev[l]) / (prev[u] - prev[l])) + ((6 - prev[u]) * prev / (prev[u] - prev[l]))))
        );
}

2025-06-12 00:43:06,513 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:43:06,616 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Neuron and Int

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (
            prev[u] <= 0 ? (0, 0, 0, 0) :
            (
                (prev[l] >= 0) ?
                    (prev[l], min(prev[u], 6), prev, min(prev, 6)) :
                    (
                        prev[u] <= 6 ?
                            (0, prev[u], 0, ((prev[u]/(prev[u]-prev[l])) * prev) - ((prev[u]*prev[l])/(prev[u]-prev[l]))) :
                            (0, 6, 0, ((6-prev[l])/(prev[u]-prev[l]) * prev) - ((6*prev[l])/(prev[u]-prev[l])))
                    )
            )
        );
}

2025-06-12 00:43:06,619 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:43:06,698 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u]/(prev[u]-prev[l])) * prev - ((prev[u]*prev[l])/(prev[u]-prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l])) * (prev - prev[l]) + prev[l]) :
        (0, 6, 0, min((prev[u]/(prev[u]-prev[l])) * prev - ((prev[u]*prev[l])/(prev[u]-prev[l])), ((6-prev[l])/(prev[u]-prev[l])) * (prev - prev[l]) + prev[l]));
}

2025-06-12 00:43:06,698 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:43:06,698 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 00:43:26,630 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ?
            (0, 0, 0, 0) :
        ((prev[l]) >= 6) ?
            (6, 6, 6, 6) :
        ((prev[l]) >= 0 && (prev[u]) <= 6) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l]) < 0 && (prev[u]) <= 6) ?
            (0, prev[u], 0, ((prev[u])/(prev[u]-prev[l]))*prev - ((prev[u])*prev[l])/(prev[u]-prev[l]))) :
        ((prev[l]) >= 0 && (prev[u]) > 6) ?
            (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l]))*prev + (prev[u]-6)/(prev[u]-prev[l])*6) :
        // general case: prev[l] < 0 && prev[u] > 6
            (0, 6, 0, ((6/(prev[u]-prev[l]))*prev) + (prev[u]-6)/(prev[u]-prev[l])*6 - ((prev[u])*prev[l])/(prev[u]-prev[l])));
}

2025-06-12 00:43:26,630 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:43:26,730 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l])) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, (((6-prev[l])/(prev[u]-prev[l])) * (prev)) + ((prev[u]-6)/(prev[u]-prev[l]))*6)) :
        (prev[l] < 0 && prev[u] > 6) ? (0, 6, 0, 6) :
        (0, 6, 0, 6);
}

2025-06-12 00:43:26,730 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:43:26,810 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ? (6, 6, 6, 6) :
        ((prev[u]) <= 0) ? (0, 0, 0, 0) :
        ((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < 0 && (prev[u]) > 0 && (prev[u]) <= 6) ? (0, prev[u], 0, (prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l])) :
        ((prev[l]) >= 0 && (prev[l]) < 6 && (prev[u]) > 6) ? (prev[l], 6, prev, (6-prev[l])/(prev[u]-prev[l])*prev + (prev[u]-6)/(prev[u]-prev[l])*6) :
        (0, 6, 0, max((6-prev[l])/(prev[u]-prev[l])*prev + (prev[u]-6)/(prev[u]-prev[l])*6, (prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l])));
}

2025-06-12 00:43:26,810 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:43:26,810 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 00:43:51,028 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6)
        : (prev[u] <= 0) ? (0, 0, 0, 0)
        : (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev)
        : (prev[l] < 0 && prev[u] > 6) ? (
            0,
            6,
            0,
            (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l])
        )
        : (prev[l] < 0 && prev[u] <= 6) ? (
            0,
            prev[u],
            0,
            (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l])
        )
        : (prev[l] >= 0 && prev[u] > 6) ? (
            prev[l],
            6,
            prev,
            ((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + prev[l]
        )
        : (0, 6, 0, 6);
}

2025-06-12 00:43:51,028 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:43:51,222 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Relu6 ->
        ((prev[l]) >= 6) ?
            (6, 6, 6, 6) : (
        ((prev[u]) <= 0) ?
            (0, 0, 0, 0) : (
        ((prev[l]) >= 0 && (prev[u]) <= 6) ?
            ((prev[l]), (prev[u]), (prev), (prev)) : (
        ((prev[l]) < 0 && (prev[u]) > 6) ?
            (0, 6, 0, ((6 - prev[l]) / (prev[u] - prev[l])) * (prev) - (6 * prev[l] / (prev[u] - prev[l]))) : (
        ((prev[l]) < 0 && (prev[u]) >= 0 && (prev[u]) <= 6) ?
            (0, (prev[u]), 0, ((prev[u]) / (prev[u] - prev[l])) * (prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) : (
        ((prev[l]) >= 0 && (prev[l]) < 6 && (prev[u]) > 6) ?
            ((prev[l]), 6, (prev), ((6 - prev[l]) / (prev[u] - prev[l])) * (prev) - (6 * prev[l] / (prev[u] - prev[l]))) :
            (0, 6, 0, 6)
    ))))));
}

2025-06-12 00:43:51,236 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:43:51,387 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
      (prev[l] >= 6) ? (6, 6, 6, 6) :
      (prev[u] <= 0) ? (0, 0, 0, 0) :
      (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
      (prev[l] < 0 && prev[u] > 6) ? (0, 6,
          ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u]*prev[l]) / (prev[u] - prev[l])),
          ((6 - prev[l]) / (prev[u] - prev[l])) * prev + ((prev[u] - 6) * (-prev[l]) / (prev[u] - prev[l]))
      ) :
      (prev[l] < 0) ? (0, prev[u] < 6 ? prev[u] : 6,
          0,
          (prev[u] < 6)
          ? (((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u]*prev[l]) / (prev[u] - prev[l])))
          : (((6 - prev[l]) / (prev[u] - prev[l])) * prev + ((prev[u] - 6) * (-prev[l]) / (prev[u] - prev[l])))
      ) :
      (prev[u] > 6) ? (prev[l] > 0 ? prev[l] : 0, 6,
          prev,
          ((6 - prev[l]) / (prev[u] - prev[l])) * prev + ((prev[u] - 6) * (-prev[l]) / (prev[u] - prev[l]))
      ) :
      (0, 6, 0, prev);
}

2025-06-12 00:43:51,388 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:43:51,388 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 00:44:14,635 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0)
            ? (0, 0, 0, 0)
        : (((prev[l]) >= 6)
            ? (6, 6, 6, 6)
        : (((prev[l]) >= 0) & ((prev[u]) <= 6)
            ? (prev[l], prev[u], prev, prev)
        : (((prev[l]) < 0) & ((prev[u]) <= 6)
            ? (0, prev[u], 0, ((prev[u])/(prev[u]-(prev[l])))*prev - ((prev[u])*prev[l])/(prev[u]-(prev[l])))
        : (((prev[l]) >= 0) & ((prev[u]) > 6)
            ? (prev[l], 6, prev, prev + ((6-prev[u])/(prev[u]-prev[l]))*(prev - prev[l]))
        : (0, 6, 0, ((6/(prev[u]-prev[l]))*prev - ((prev[l])*6)/(prev[u]-prev[l])))))));
}

2025-06-12 00:44:14,635 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 00:44:14,767 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ? (6, 6, 6, 6) :
        ((prev[u] <= 0)) ? (0, 0, 0, 0) :
        ((prev[l] >= 0) && (prev[u] <= 6)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) && (prev[u] <= 6)) ? (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l])) :
        ((prev[l] >= 0) && (prev[u] > 6)) ? (prev[l], 6, prev, prev + (6 - prev[u])) :
        (0, 6, 0, (6 / (prev[u] - prev[l])) * prev - (prev[l] * 6) / (prev[u] - prev[l]));
}

2025-06-12 00:44:14,767 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 00:44:14,894 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 181, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6) :
        ((prev[u] <= 0)) ?
            (0, 0, 0, 0) :
        ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, ((prev[u])/(prev[u] - prev[l]))*prev - ((prev[u])*prev[l])/(prev[u] - prev[l])) :
        ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev + (6 - prev[u]), prev + (6 - prev[u])) :
        (0, 6, 0, (6/(prev[u] - prev[l]))*prev - (6*prev[l])/(prev[u] - prev[l]));
}

2025-06-12 00:44:14,895 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 00:44:14,895 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 00:44:14,895 - INFO - [Relu6] Runtime: 211.33 seconds
2025-06-12 00:44:14,895 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6) :
        ((prev[u] <= 0)) ?
            (0, 0, 0, 0) :
        ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, ((prev[u])/(prev[u] - prev[l]))*prev - ((prev[u])*prev[l])/(prev[u] - prev[l])) :
        ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev + (6 - prev[u]), prev + (6 - prev[u])) :
        (0, 6, 0, (6/(prev[u] - prev[l]))*prev - (6*prev[l])/(prev[u] - prev[l]));
}

2025-06-12 00:44:14,898 - INFO -  Total runtime for all operators: 1800.17 seconds
