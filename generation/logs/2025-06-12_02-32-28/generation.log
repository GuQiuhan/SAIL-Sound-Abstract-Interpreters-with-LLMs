2025-06-12 02:32:28,368 - INFO - 2025-06-12 02:32:28.368072 - Extracting Abs
2025-06-12 02:32:28,369 - INFO -
API: Abs -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:32:28,369 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:32:38,414 - INFO - [STEP 1] Sample 1: Validation passed.
2025-06-12 02:32:38,414 - INFO - [Abs] Runtime: 10.05 seconds
2025-06-12 02:32:38,415 - INFO - Succeed. Saved to logs/2025-06-12_02-32-28/results/GPT-4o/success/Abs.txt

2025-06-12 02:32:38,415 - INFO - 2025-06-12 02:32:38.415900 - Extracting Add
2025-06-12 02:32:38,416 - INFO -
API: Add -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:32:38,416 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:32:44,458 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:44,459 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:32:44,578 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:44,579 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:32:44,696 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:44,697 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:32:44,697 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:32:51,474 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:51,474 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:32:51,610 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:51,610 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:32:51,740 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:51,740 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:32:51,741 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:32:57,424 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:57,425 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:32:57,569 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add ->
        (prev_0[l] + prev_1[l],
         prev_0[u] + prev_1[u],
         prev_0[L] + prev_1[L],
         prev_0[U] + prev_1[U]);
}

2025-06-12 02:32:57,569 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:32:57,706 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:32:57,706 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:32:57,707 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:33:03,369 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:03,370 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:03,437 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:03,437 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:03,500 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:03,501 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:03,501 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:33:08,536 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (prev_0[l] + prev_1[l], prev_0[u] + prev_1[u], prev_0[L] + prev_1[L], prev_0[U] + prev_1[U]);
}

2025-06-12 02:33:08,536 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:08,636 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:08,636 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:08,754 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (prev_0[l] + prev_1[l], prev_0[u] + prev_1[u], prev_0[L] + prev_1[L], prev_0[U] + prev_1[U]);
}

2025-06-12 02:33:08,754 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:08,754 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:33:15,333 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:15,333 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:15,399 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        (prev_0[l] + prev_1[l]),
        (prev_0[u] + prev_1[u]),
        (prev_0[L] + prev_1[L]),
        (prev_0[U] + prev_1[U])
    );
}

2025-06-12 02:33:15,399 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:15,469 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:15,469 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:15,469 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:33:20,916 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        (prev_0[l] + prev_1[l]),
        (prev_0[u] + prev_1[u]),
        (prev_0[L] + prev_1[L]),
        (prev_0[U] + prev_1[U])
    );
}

2025-06-12 02:33:20,916 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:20,998 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> ((prev_0[l] + prev_1[l]), (prev_0[u] + prev_1[u]), (prev_0 + prev_1), (prev_0 + prev_1));
}

2025-06-12 02:33:20,999 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:21,067 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (prev_0[l] + prev_1[l], prev_0[u] + prev_1[u], prev_0 + prev_1, prev_0 + prev_1);
}

2025-06-12 02:33:21,067 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:21,067 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:33:27,024 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:27,024 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:27,088 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:27,088 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:27,146 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:27,146 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:27,146 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:33:35,410 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:35,410 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:35,469 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:35,470 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:35,534 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:35,534 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:35,534 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:33:40,847 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:40,847 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:40,906 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0 + prev_1,
        prev_0 + prev_1
    );
}

2025-06-12 02:33:40,906 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:40,969 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:40,969 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:40,969 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:33:40,969 - INFO - [Add] Runtime: 62.55 seconds
2025-06-12 02:33:40,969 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Add -> (
        prev_0[l] + prev_1[l],
        prev_0[u] + prev_1[u],
        prev_0[L] + prev_1[L],
        prev_0[U] + prev_1[U]
    );
}

2025-06-12 02:33:40,969 - INFO - 2025-06-12 02:33:40.969435 - Extracting Affine
2025-06-12 02:33:40,969 - INFO -
API: Affine -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:33:40,969 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:33:47,745 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine ->
        (
            sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
            sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
            sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
            sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
        );
}

2025-06-12 02:33:47,745 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:33:47,905 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:33:47,905 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:33:47,965 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine(weight, bias) -> (
        sum_i simplify_lower(prev_i, weight[i]) + bias,
        sum_i simplify_upper(prev_i, weight[i]) + bias,
        sum_i replace_lower(prev_i, weight[i]) + bias,
        sum_i replace_upper(prev_i, weight[i]) + bias
    );
}

2025-06-12 02:33:47,965 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:33:47,965 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:34:07,668 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum_i{simplify_lower(prev_i, curr[weight_i])} + curr[bias],
        sum_i{simplify_upper(prev_i, curr[weight_i])} + curr[bias],
        sum_i{replace_lower(prev_i, curr[weight_i])} + curr[bias],
        sum_i{replace_upper(prev_i, curr[weight_i])} + curr[bias}

2025-06-12 02:34:07,669 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:34:07,733 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:34:07,733 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:34:07,799 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight_i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight_i])) + curr[bias]
    );
}

2025-06-12 02:34:07,799 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:34:07,799 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:34:18,010 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum map i in 0..N: simplify_lower(prev_i, curr[weight][i]) + curr[bias],
        sum map i in 0..N: simplify_upper(prev_i, curr[weight][i]) + curr[bias],
        sum map i in 0..N: replace_lower(prev_i, curr[weight][i]) + curr[bias],
        sum map i in 0..N: replace_upper(prev_i, curr[weight][i]) + curr[bias]
    );
}

2025-06-12 02:34:18,010 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:34:18,114 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:34:18,114 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:34:18,174 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:34:18,174 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:34:18,174 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:34:26,493 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:34:26,493 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:34:26,570 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        // Lower bound
        (sum_{i} simplify_lower(prev_i, curr[weight][i]) + curr[bias]),
        // Upper bound
        (sum_{i} simplify_upper(prev_i, curr[weight][i]) + curr[bias]),
        // Poly lower
        (sum_{i} replace_lower(prev_i, curr[weight][i]) + curr[bias]),
        // Poly upper
        (sum_{i} replace_upper(prev_i, curr[weight][i]) + curr[bias])
    );
}

2025-06-12 02:34:26,570 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:34:26,779 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i simplify_lower(prev_i, curr[weight][i]) + curr[bias],
        sum_i simplify_upper(prev_i, curr[weight][i]) + curr[bias],
        sum_i replace_lower(prev_i, curr[weight][i]) + curr[bias],
        sum_i replace_upper(prev_i, curr[weight][i]) + curr[bias]
    );
}

2025-06-12 02:34:26,783 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:34:26,783 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:34:36,517 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum( i=0 to N-1, simplify_lower(prev_i, curr[weight_i]) ) + curr[bias],
        sum( i=0 to N-1, simplify_upper(prev_i, curr[weight_i]) ) + curr[bias],
        sum( i=0 to N-1, replace_lower(prev_i, curr[weight_i]) ) + curr[bias],
        sum( i=0 to N-1, replace_upper(prev_i, curr[weight_i]) ) + curr[bias]
    );
}

2025-06-12 02:34:36,517 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:34:36,585 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias]),
        (sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias]),
        (sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias]),
        (sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias])
    );
}

2025-06-12 02:34:36,586 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:34:36,647 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        (sum over i: simplify_lower(prev_i, curr[weight][i]) ) + curr[bias],
        (sum over i: simplify_upper(prev_i, curr[weight][i]) ) + curr[bias],
        (sum over i: replace_lower(prev_i, curr[weight][i]) ) + curr[bias],
        (sum over i: replace_upper(prev_i, curr[weight][i]) ) + curr[bias]
    );
}

2025-06-12 02:34:36,647 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:34:36,647 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:34:44,880 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    )
}

2025-06-12 02:34:44,880 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:34:52,584 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:34:52,584 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:34:52,762 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Affine -> (
        (i = 0; s = 0; while (i < curr[weight].size) { s = s + simplify_lower(prev_i, curr[weight][i]); i = i + 1; }; s + curr[bias]),
        (i = 0; s = 0; while (i < curr[weight].size) { s = s + simplify_upper(prev_i, curr[weight][i]); i = i + 1; }; s + curr[bias]),
        (i = 0; s = 0; while (i < curr[weight].size) { s = s + replace_lower(prev_i, curr[weight][i]); i = i + 1; }; s + curr[bias]),
        (i = 0; s = 0; while (i < curr[weight].size) { s = s + replace_upper(prev_i, curr[weight][i]); i = i + 1; }; s + curr[bias])
    );
}

2025-06-12 02:34:52,762 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:34:52,763 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:35:01,255 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        (sum_i simplify_lower(prev_i, curr[weight][i]) + curr[bias]),
        (sum_i simplify_upper(prev_i, curr[weight][i]) + curr[bias]),
        (sum_i replace_lower(prev_i, curr[weight][i]) + curr[bias]),
        (sum_i replace_upper(prev_i, curr[weight][i]) + curr[bias])
    );
}

2025-06-12 02:35:01,258 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:35:01,326 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i=0..N-1){simplify_lower(prev_i, curr[weight][i])} + curr[bias],
        sum(i=0..N-1){simplify_upper(prev_i, curr[weight][i])} + curr[bias],
        sum(i=0..N-1){replace_lower(prev_i, curr[weight][i])} + curr[bias],
        sum(i=0..N-1){replace_upper(prev_i, curr[weight][i])} + curr[bias}

2025-06-12 02:35:01,326 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:35:01,438 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:01,438 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:35:01,438 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:35:12,634 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine ->
        (
            sum_i(simplify_lower(prev_i, curr[weight_i])) + curr[bias],
            sum_i(simplify_upper(prev_i, curr[weight_i])) + curr[bias],
            sum_i(replace_lower(prev_i, curr[weight_i])) + curr[bias],
            sum_i(replace_upper(prev_i, curr[weight_i])) + curr[bias]
        );
}

2025-06-12 02:35:12,634 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:35:12,704 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine ->
        let lower = (i in 0..N).sum(simplify_lower(prev_i, curr[weight][i])) + curr[bias];
        let upper = (i in 0..N).sum(simplify_upper(prev_i, curr[weight][i])) + curr[bias];
        let lower_poly = (i in 0..N).sum(replace_lower(prev_i, curr[weight][i])) + curr[bias];
        let upper_poly = (i in 0..N).sum(replace_upper(prev_i, curr[weight][i])) + curr[bias];
        (lower, upper, lower_poly, upper_poly);
}

2025-06-12 02:35:12,704 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:35:12,773 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:12,773 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:35:12,773 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:35:21,423 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:21,423 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:35:21,487 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
  Affine ->
    (
      sum(i, simplify_lower(prev_i, curr[weight][i])) + curr[bias],
      sum(i, simplify_upper(prev_i, curr[weight][i])) + curr[bias],
      sum(i, replace_lower(prev_i, curr[weight][i])) + curr[bias],
      sum(i, replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:21,487 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:35:21,557 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        prev.fold(0, (acc, prev_i, i) => acc + simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        prev.fold(0, (acc, prev_i, i) => acc + simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        prev.fold(0, (acc, prev_i, i) => acc + replace_lower(prev_i, curr[weight][i])) + curr[bias],
        prev.fold(0, (acc, prev_i, i) => acc + replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:21,557 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:35:21,557 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:35:29,459 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Affine -> (
        sum over i (simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum over i (simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum over i (replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum over i (replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:29,459 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:35:29,564 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly {
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:29,566 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:35:29,732 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:29,732 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:35:29,732 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:35:29,732 - INFO - [Affine] Runtime: 108.76 seconds
2025-06-12 02:35:29,732 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Affine -> (
        sum_i(simplify_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(simplify_upper(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_lower(prev_i, curr[weight][i])) + curr[bias],
        sum_i(replace_upper(prev_i, curr[weight][i])) + curr[bias]
    );
}

2025-06-12 02:35:29,733 - INFO - 2025-06-12 02:35:29.733033 - Extracting Avgpool
2025-06-12 02:35:29,733 - INFO -
API: Avgpool -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:35:29,733 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:35:59,341 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum(i in 0..size-1){prev_i[l]},
        (1.0/size) * sum(i in 0..size-1){prev_i[u]},
        (1.0/size) * sum(i in 0..size-1){prev_i[L]},
        (1.0/size) * sum(i in 0..size-1){prev_i[U]}
    );
}

2025-06-12 02:35:59,341 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:35:59,468 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1/size) * sum(i:0..size-1, prev_i[l]),
        (1/size) * sum(i:0..size-1, prev_i[u]),
        (1/size) * sum(i:0..size-1, prev_i[L]),
        (1/size) * sum(i:0..size-1, prev_i[U])
    );
}

2025-06-12 02:35:59,468 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:35:59,628 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1/len(prev)) * sum(map(simplify_lower, prev, 1)),
        (1/len(prev)) * sum(map(simplify_upper, prev, 1)),
        (1/len(prev)) * sum(prev),
        (1/len(prev)) * sum(prev)
    );
}

2025-06-12 02:35:59,630 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:35:59,630 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:36:06,835 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1 / curr[pool_size]) * sum(i:0..curr[pool_size]-1, prev_i[l]),
        (1 / curr[pool_size]) * sum(i:0..curr[pool_size]-1, prev_i[u]),
        (1 / curr[pool_size]) * sum(i:0..curr[pool_size]-1, prev_i[L]),
        (1 / curr[pool_size]) * sum(i:0..curr[pool_size]-1, prev_i[U])
    );
}

2025-06-12 02:36:06,835 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:36:06,949 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1/length(prev)) * sum(forall i in prev: prev_i[l]),
        (1/length(prev)) * sum(forall i in prev: prev_i[u]),
        (1/length(prev)) * sum(forall i in prev: prev_i[L]),
        (1/length(prev)) * sum(forall i in prev: prev_i[U])
    );
}

2025-06-12 02:36:06,949 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:36:07,500 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_over_i(prev_i[l]),
        (1.0 / curr[size]) * sum_over_i(prev_i[u]),
        (1.0 / curr[size]) * sum_over_i(prev_i[L]),
        (1.0 / curr[size]) * sum_over_i(prev_i[U])
    );
}

2025-06-12 02:36:07,500 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:36:07,500 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:36:27,550 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool ->
        (
            (sum(map(prev_i, i, 0, N, prev_i[l])) / N),
            (sum(map(prev_i, i, 0, N, prev_i[u])) / N),
            (sum(map(prev_i, i, 0, N, prev_i[L])) / N),
            (sum(map(prev_i, i, 0, N, prev_i[U])) / N)
        );
}

2025-06-12 02:36:27,552 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:36:27,814 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum_i(simplify_lower(prev_i, 1.0)),
        (1.0/size) * sum_i(simplify_upper(prev_i, 1.0)),
        (1.0/size) * sum_i(replace_lower(prev_i, 1.0)),
        (1.0/size) * sum_i(replace_upper(prev_i, 1.0))
    );
}

2025-06-12 02:36:27,815 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:36:27,993 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i(simplify_lower(prev_i, 1.0)),
        (1.0 / curr[size]) * sum_i(simplify_upper(prev_i, 1.0)),
        (1.0 / curr[size]) * sum_i(prev_i),
        (1.0 / curr[size]) * sum_i(prev_i)
    );
}

2025-06-12 02:36:27,994 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:36:27,994 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:36:37,262 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum_i(prev_i[l]),
        (1.0/size) * sum_i(prev_i[u]),
        (1.0/size) * sum_i(prev_i[L]),
        (1.0/size) * sum_i(prev_i[U])
    );
}

2025-06-12 02:36:37,263 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:36:37,558 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i(prev_i[l]),
        (1.0 / curr[size]) * sum_i(prev_i[u]),
        (1.0 / curr[size]) * sum_i(prev_i[L]),
        (1.0 / curr[size]) * sum_i(prev_i[U])
    );
}

2025-06-12 02:36:37,559 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:36:37,704 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/len(prev)) * sum(i : 0..len(prev)-1, prev_i[l]),
        (1.0/len(prev)) * sum(i : 0..len(prev)-1, prev_i[u]),
        (1.0/len(prev)) * sum(i : 0..len(prev)-1, prev_i[L]),
        (1.0/len(prev)) * sum(i : 0..len(prev)-1, prev_i[U])
    );
}

2025-06-12 02:36:37,704 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:36:37,704 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:36:52,514 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/size) * sum(for i in 0..(size-1): prev_i[l]),
        (1.0/size) * sum(for i in 0..(size-1): prev_i[u]),
        (1.0/size) * sum(for i in 0..(size-1): prev_i[L]),
        (1.0/size) * sum(for i in 0..(size-1): prev_i[U])
    );
}

2025-06-12 02:36:52,515 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:36:52,927 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i prev_i[l],
        (1.0 / curr[size]) * sum_i prev_i[u],
        (1.0 / curr[size]) * sum_i prev_i[L],
        (1.0 / curr[size]) * sum_i prev_i[U]
    );
}

2025-06-12 02:36:52,928 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:36:53,061 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/curr[pool_size]) * sum_{i=0}^{curr[pool_size]-1} prev_i[l],
        (1.0/curr[pool_size]) * sum_{i=0}^{curr[pool_size]-1} prev_i[u],
        (1.0/curr[pool_size]) * sum_{i=0}^{curr[pool_size]-1} prev_i[L],
        (1.0/curr[pool_size]) * sum_{i=0}^{curr[pool_size]-1} prev_i[U]
    );
}

2025-06-12 02:36:53,061 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:36:53,061 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:37:05,252 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum(i in 0..curr[size]-1){prev_i[l]},
        (1.0 / curr[size]) * sum(i in 0..curr[size]-1){prev_i[u]},
        (1.0 / curr[size]) * sum(i in 0..curr[size]-1){prev_i[L]},
        (1.0 / curr[size]) * sum(i in 0..curr[size]-1){prev_i[U]}
    );
}

2025-06-12 02:37:05,252 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:37:05,465 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (
            sum_i (prev_i[l]) / N
        ),
        (
            sum_i (prev_i[u]) / N
        ),
        (
            (sum_i prev_i[L]) / N
        ),
        (
            (sum_i prev_i[U]) / N
        )
    );
}

2025-06-12 02:37:05,465 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:37:05,613 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        sum_i(prev_i[l]) / N,
        sum_i(prev_i[u]) / N,
        (sum_i(prev_i) / N),
        (sum_i(prev_i) / N)
    );
}

2025-06-12 02:37:05,613 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:37:05,613 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:37:15,527 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * (sum_i: simplify_lower(prev_i, 1.0)),
        (1.0 / curr[size]) * (sum_i: simplify_upper(prev_i, 1.0)),
        (1.0 / curr[size]) * (sum_i: prev_i[L]),
        (1.0 / curr[size]) * (sum_i: prev_i[U])
    );
}

2025-06-12 02:37:15,527 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:37:15,643 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 185, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: / is not defined on Int and Neuron list

Code:
transformer deeppoly{
    Avgpool -> (
        (1/|prev|) * sum_i(prev_i[l]),
        (1/|prev|) * sum_i(prev_i[u]),
        (1/|prev|) * sum_i(prev_i[L]),
        (1/|prev|) * sum_i(prev_i[U])
    );
}

2025-06-12 02:37:15,643 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:37:15,905 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool ->
        (1.0/size) * (sum_i simplify_lower(prev_i, 1.0)),
        (1.0/size) * (sum_i simplify_upper(prev_i, 1.0)),
        (1.0/size) * (sum_i prev_i[L]),
        (1.0/size) * (sum_i prev_i[U]);
}

2025-06-12 02:37:15,905 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:37:15,905 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:37:24,031 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0/num_inputs) * (prev_0[l] + prev_1[l] + ... + prev_{N-1}[l]),
        (1.0/num_inputs) * (prev_0[u] + prev_1[u] + ... + prev_{N-1}[u]),
        (1.0/num_inputs) * (prev_0[L] + prev_1[L] + ... + prev_{N-1}[L]),
        (1.0/num_inputs) * (prev_0[U] + prev_1[U] + ... + prev_{N-1}[U])
    );
}

2025-06-12 02:37:24,031 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:37:24,138 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        sum([prev_i[l] for i in 0..N]) / N,
        sum([prev_i[u] for i in 0..N]) / N,
        (sum([prev_i[L] for i in 0..N])) / N,
        (sum([prev_i[U] for i in 0..N])) / N
    );
}

2025-06-12 02:37:24,138 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:37:24,369 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_idx is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        sum_idx( (1/N) * prev_idx[l] ),
        sum_idx( (1/N) * prev_idx[u] ),
        sum_idx( (1/N) * prev_idx[L] ),
        sum_idx( (1/N) * prev_idx[U] )
    );
}

2025-06-12 02:37:24,369 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:37:24,369 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:37:34,798 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i simplify_lower(prev_i, 1.0),
        (1.0 / curr[size]) * sum_i simplify_upper(prev_i, 1.0),
        (1.0 / curr[size]) * sum_i prev_i[L],
        (1.0 / curr[size]) * sum_i prev_i[U]
    );
}

2025-06-12 02:37:34,798 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:37:34,930 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: sum_i is not defined

Code:
transformer deeppoly{
    Avgpool -> (
        (sum_i(prev_i[l]) / K),
        (sum_i(prev_i[u]) / K),
        (sum_i(prev_i[L]) / K),
        (sum_i(prev_i[U]) / K)
    );
}

2025-06-12 02:37:34,930 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:37:35,000 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1.0/curr[size]) * sum(i in 0..curr[size]-1: prev_i[l]),
        (1.0/curr[size]) * sum(i in 0..curr[size]-1: prev_i[u]),
        (1.0/curr[size]) * sum(i in 0..curr[size]-1: prev_i[L]),
        (1.0/curr[size]) * sum(i in 0..curr[size]-1: prev_i[U])
    );
}

2025-06-12 02:37:35,000 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:37:35,000 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:37:52,459 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 405, in visitGetElement
    raise UndefinedVarException(node.elem.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: size is undefined

Code:
transformer deeppoly{
    Avgpool -> (
        (1.0 / curr[size]) * sum_i simplify_lower(prev_i, 1.0),
        (1.0 / curr[size]) * sum_i simplify_upper(prev_i, 1.0),
        (1.0 / curr[size]) * sum_i (prev_i),
        (1.0 / curr[size]) * sum_i (prev_i)
    );
}

2025-06-12 02:37:52,459 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:37:52,527 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    AvgPool -> (
        (1.0/size) * sum_i simplify_lower(prev_i, 1.0),
        (1.0/size) * sum_i simplify_upper(prev_i, 1.0),
        (1.0/size) * sum_i prev_i,
        (1.0/size) * sum_i prev_i
    );
}

2025-06-12 02:37:52,527 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:37:52,602 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Avgpool -> (
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[l]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[u]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[L]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[U])
    );
}

2025-06-12 02:37:52,602 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:37:52,602 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:37:52,602 - INFO - [Avgpool] Runtime: 142.87 seconds
2025-06-12 02:37:52,602 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Avgpool -> (
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[l]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[u]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[L]),
        (1/len(prev)) * sum_i=0^{len(prev)-1}(prev_i[U])
    );
}

2025-06-12 02:37:52,602 - INFO - 2025-06-12 02:37:52.602619 - Extracting HardSigmoid
2025-06-12 02:37:52,602 - INFO -
API: HardSigmoid -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:37:52,602 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:38:05,093 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (
            0,
            0,
            0,
            0
        ) : ((prev[l]) >= 2.5) ? (
            1,
            1,
            1,
            1
        ) : (
            (max(0, min(1, 0.2 * (prev[l]) + 0.5))),
            (max(0, min(1, 0.2 * (prev[u]) + 0.5))),
            (0.2 * prev + 0.5),
            (0.2 * prev + 0.5)
        );
}

2025-06-12 02:38:05,093 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:38:05,162 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5)  ? (1, 1, 1, 1)  :
        (
            let lower_float = max(0, min(1, 0.2 * (prev[l]) + 0.5));
            let upper_float = max(0, min(1, 0.2 * (prev[u]) + 0.5));
            let L_poly = max(0, min(1, 0.2 * (prev[L]) + 0.5));
            let U_poly = min(1, max(0, 0.2 * (prev[U]) + 0.5));
            lower_float, upper_float, L_poly, U_poly
        );
}

2025-06-12 02:38:05,162 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:38:05,398 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 327, in visitMaxOp
    exp2type = self.visit(node.expr2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Int and PolyExp

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        ((prev[u] <= -1) ? (0, 0, 0, 0) :
        (max(0, min(1, 0.5 * prev[l] + 0.5)), min(1, max(0, 0.5 * prev[u] + 0.5)),
         max(0, min(1, 0.5 * prev + 0.5)),
         min(1, max(0, 0.5 * prev + 0.5)))
        )
    );
}

2025-06-12 02:38:05,398 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:38:05,399 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:38:30,853 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        // HardSigmoid(x) = max(0, min(1, alpha * x + beta)), typically alpha=0.2, beta=0.5
        let alpha = 0.2;
        let beta = 0.5;

        (prev[u] <= (-beta/alpha)) ?
            (0, 0, 0, 0) :

        (prev[l] >= ((1-beta)/alpha)) ?
            (1, 1, 1, 1) :

        (prev[l] >= (-beta/alpha) & prev[u] <= ((1-beta)/alpha)) ?
            (alpha*prev[l] + beta, alpha*prev[u] + beta, alpha*prev + beta, alpha*prev + beta) :

        (prev[l] < (-beta/alpha) & prev[u] > ((1-beta)/alpha)) ?
            (0, 1, 0, 1) :

        (prev[l] < (-beta/alpha) & prev[u] <= ((1-beta)/alpha)) ?
            (0, alpha*prev[u] + beta, 0, alpha*prev + beta) :

        (prev[l] >= (-beta/alpha) & prev[u] > ((1-beta)/alpha)) ?
            (alpha*prev[l] + beta, 1, alpha*prev + beta, 1) :

        (0, 1, 0, 1)
;

2025-06-12 02:38:30,853 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:38:30,924 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5)
        ? (0, 0, 0, 0)
        : (((prev[l]) >= 2.5)
            ? (1, 1, 1, 1)
            : (
                ((prev[l]) >= -2.5 && (prev[u]) <= 2.5)
                ? (0.2 * (prev[l]) + 0.5, 0.2 * (prev[u]) + 0.5, (0.2 * prev + 0.5), (0.2 * prev + 0.5))
                : (min(1, max(0, 0.2 * (prev[l]) + 0.5)), max(1, 0.2 * (prev[u]) + 0.5), 0, 1)
            )
        );
}

2025-06-12 02:38:30,924 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:38:31,010 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l]) >= 2) ? (1, 1, 1, 1) :
        ((prev[u]) <= -2) ? (0, 0, 0, 0) :
        ((prev[l]) >= -2 && (prev[u]) <= 2) ?
            (0.25 * prev[l] + 0.5,
             0.25 * prev[u] + 0.5,
             0.25 * prev + 0.5,
             0.25 * prev + 0.5)
        :
        ((prev[l]) < -2 && (prev[u]) > 2) ?
            (0, 1, 0, 1)
        :
        ((prev[l]) < -2) ?
            (0,
             0.25 * prev[u] + 0.5,
             0,
             0.25 * prev + 0.5)
        :
        (0.25 * prev[l] + 0.5,
         1,
         0.25 * prev + 0.5,
         1);
}

2025-06-12 02:38:31,010 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:38:31,010 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:38:52,446 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l] >= 2.5) ? (1, 1, 1, 1) :
        (
            // Else: mix, linear between (0, 0) @ -2.5 and (1, 1) @ 2.5
            simplify_lower(prev, 0.2) + 0.5,
            simplify_upper(prev, 0.2) + 0.5,
            (prev * 0.2) + 0.5,
            (prev * 0.2) + 0.5
        )));
}

2025-06-12 02:38:52,446 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:38:52,826 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:38:52,915 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid -> (
        (prev[l] >= 1) ? 1 : (
            (prev[u] <= -1) ? 0 : (
                (0.5 * prev[l] + 0.5).max(0),
                (0.5 * prev[u] + 0.5).min(1),
                (prev[L] * 0.5 + 0.5).clip(0,1),
                (prev[U] * 0.5 + 0.5).clip(0,1)
            )
        )
    );
}

2025-06-12 02:38:52,915 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:38:52,915 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:39:06,344 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (
            max(0, min(1, 0.2 * prev[l] + 0.5)),                     // lower float bound
            max(0, min(1, 0.2 * prev[u] + 0.5)),                     // upper float bound
            max(0, min(1, 0.2 * prev + 0.5)),                        // lower poly bound
            max(0, min(1, 0.2 * prev + 0.5))                         // upper poly bound
        );
}

2025-06-12 02:39:06,345 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:39:06,412 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l]) >= 1)
            ? (1, 1, 1, 1)
        : ((prev[u]) <= 0)
            ? (0, 0, 0, 0)
        : ((prev[l]) >= 0 && (prev[u]) <= 1)
            ? (prev[l], prev[u], prev, prev)
        : ((prev[l]) < 0 && (prev[u]) > 1)
            ? (0, 1, prev, prev)
        : ((prev[l]) < 0)
            ? (0, prev[u], 0, prev)
        : (prev[l], 1, prev, 1);
}

2025-06-12 02:39:06,412 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:39:06,550 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        (
            // Lower concrete bound
            ((simplify_lower(prev, 1/6.0) + 0.5) < 0) ? 0 :
            ((simplify_lower(prev, 1/6.0) + 0.5) > 1) ? 1 : (simplify_lower(prev, 1/6.0) + 0.5),

            // Upper concrete bound
            ((simplify_upper(prev, 1/6.0) + 0.5) < 0) ? 0 :
            ((simplify_upper(prev, 1/6.0) + 0.5) > 1) ? 1 : (simplify_upper(prev, 1/6.0) + 0.5),

            // Lower poly
            ((prev[l] >= 0) & (prev[u] <= 3)) ? (prev * (1/6.0) + 0.5) :
            (prev[u] <= 0) ? 0 :
            (prev[l] >= 3) ? 1 :
            ((prev * (1/6.0) + 0.5) >= 0) ? (prev * (1/6.0) + 0.5) : 0,

            // Upper poly
            ((prev[l] >= 0) & (prev[u] <= 3)) ? (prev * (1/6.0) + 0.5) :
            (prev[u] <= 0) ? 0 :
            (prev[l] >= 3) ? 1 :
            ((prev * (1/6.0) + 0.5) <= 1) ? (prev * (1/6.0) + 0.5) : 1
        );
}

2025-06-12 02:39:06,550 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:39:06,550 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:39:20,667 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5)  ? (1, 1, 1, 1) :
        (
            // scalar lower
            simplify_lower(prev, 0.2) + 0.5,
            // scalar upper
            simplify_upper(prev, 0.2) + 0.5,
            // poly lower
            prev*0.2 + 0.5,
            // poly upper
            prev*0.2 + 0.5
        );
}

2025-06-12 02:39:20,667 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:39:20,787 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ?
            (0, 0, 0, 0) :
        (((prev[l]) >= 2.5) ?
            (1, 1, 1, 1) :
        (
            float k = 0.2;
            float b = 0.5;
            // For l, u
            float lower = max(0, min(1, k * (prev[l]) + b));
            float upper = max(0, min(1, k * (prev[u]) + b));
            // For linear poly upper/lower as standard DeepPoly
            PolyExp L_poly = max(0, min(1, k * (prev) + b));
            PolyExp U_poly = max(0, min(1, k * (prev) + b));
            (lower, upper, L_poly, U_poly)
        ));
}

2025-06-12 02:39:20,788 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:39:20,995 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -2) ? (0, 0, 0, 0) :
        (prev[l] >= 2) ? (1, 1, 1, 1) :
        (prev[l] >= -2 && prev[u] <= 2) ? (0.25 * prev[l] + 0.5, 0.25 * prev[u] + 0.5, 0.25 * prev + 0.5, 0.25 * prev + 0.5) :
        (prev[l] < -2 && prev[u] > -2 && prev[u] <= 2) ? (0, 0.25 * prev[u] + 0.5, 0, 0.25 * prev + 0.5) :
        (prev[l] >= -2 && prev[l] < 2 && prev[u] > 2) ? (0.25 * prev[l] + 0.5, 1, 0.25 * prev + 0.5, 1) :
        (prev[l] < -2 && prev[u] > 2) ? (0, 1, 0, 1) :
        (0, 1, 0, 1)
        );
}

2025-06-12 02:39:20,995 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:39:20,995 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:39:33,494 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0)
        : ((prev[l]) >= 2.5) ? (1, 1, 1, 1)
        : (
            let l_slope = 1.0 / 5.0;
            let u_slope = 1.0 / 5.0;
            let l_intercept = 0.5;
            let u_intercept = 0.5;
            let l_out = l_slope * prev[l] + l_intercept;
            let u_out = u_slope * prev[u] + u_intercept;
            let lower = max(0, l_out);
            let upper = min(1, u_out);
            (
                lower,
                upper,
                max(0, min(1, l_slope * prev + l_intercept)),
                min(1, max(0, u_slope * prev + u_intercept))
            )
        );
}

2025-06-12 02:39:33,494 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:39:33,818 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:39:34,312 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:39:34,312 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:39:52,455 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (
            let lower = max(0, min(1, 0.2 * (prev[l]) + 0.5));
            let upper = max(0, min(1, 0.2 * (prev[u]) + 0.5));
            let poly_l = ((prev[u]) * (0.2 * (prev) + 0.5 - 0.2 * (prev[u]))) / ((prev[u]) - (prev[l])) + (0.2 * (prev[l]) + 0.5) * ((prev) - (prev[l])) / ((prev[u]) - (prev[l]));
            let poly_u = ((prev[l]) * (0.2 * (prev) + 0.5 - 0.2 * (prev[l]))) / ((prev[u]) - (prev[l])) + (0.2 * (prev[u]) + 0.5) * ((prev[u]) - (prev)) / ((prev[u]) - (prev[l]));
            lower, upper, poly_l, poly_u
        );
}

2025-06-12 02:39:52,455 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:39:52,525 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ?
            (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ?
            (1, 1, 1, 1) :
        (
            (max(0, min(1, 0.2 * (prev[l]) + 0.5))),
            (max(0, min(1, 0.2 * (prev[u]) + 0.5))),
            (max(0, min(1, 0.2 * (prev) + 0.5))),
            (max(0, min(1, 0.2 * (prev) + 0.5)))
        );
}

2025-06-12 02:39:52,525 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:39:52,592 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid -> (
        ((prev[u]) <= -2.5) ? (0) :
        ((prev[l]) >= 2.5) ? (1) :
        (max(0, min(1, 0.2 * (prev[l]) + 0.5))),

        ((prev[u]) <= -2.5) ? (0) :
        ((prev[l]) >= 2.5) ? (1) :
        (max(0, min(1, 0.2 * (prev[u]) + 0.5))),

        ((prev[u]) <= -2.5) ? (0) :
        ((prev[l]) >= 2.5) ? (1) :
        (max(0, min(1, 0.2 * (prev) + 0.5))),

        ((prev[u]) <= -2.5) ? (0) :
        ((prev[l]) >= 2.5) ? (1) :
        (max(0, min(1, 0.2 * (prev) + 0.5)))
    );
}

2025-06-12 02:39:52,592 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:39:52,592 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:40:07,062 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5)            ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5)             ? (1, 1, 1, 1) :
        ((prev[l]) >= -2.5 and (prev[u]) <= 2.5)
            ? (0.2 * prev[l] + 0.5, 0.2 * prev[u] + 0.5, 0.2 * prev + 0.5, 0.2 * prev + 0.5) :
        ((prev[l]) < -2.5 and (prev[u]) > 2.5)
            ? (0, 1, 0.2 * prev + 0.5, 0.2 * prev + 0.5)
            : (max(0, 0.2 * prev[l] + 0.5), min(1, 0.2 * prev[u] + 0.5), 0.2 * prev + 0.5, 0.2 * prev + 0.5);
}

2025-06-12 02:40:07,062 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:40:07,146 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 327, in visitMaxOp
    exp2type = self.visit(node.expr2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: max is not defined on Int and PolyExp

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -3) ? (0, 0, 0, 0)
        : ((prev[l] >= 3) ? (1, 1, 1, 1)
        : (max(0, (0.2 * prev[l] + 0.5)), min(1, (0.2 * prev[u] + 0.5)), (0.2 * prev + 0.5), min(1, max(0, 0.2 * prev + 0.5)))
        ));
}

2025-06-12 02:40:07,146 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:40:07,219 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 327, in visitMaxOp
    exp2type = self.visit(node.expr2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Int and PolyExp

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l] >= 2)
            ? (1, 1, 1, 1)
            : ((prev[u] <= -2)
                ? (0, 0, 0, 0)
                : (max(0, min(1, 0.25 * prev[l] + 0.5)), max(0, min(1, 0.25 * prev[u] + 0.5)),
                    max(0, min(1, 0.25 * prev + 0.5)), max(0, min(1, 0.25 * prev + 0.5)))
              )
        );
}

2025-06-12 02:40:07,219 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:40:07,219 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:40:25,496 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[l]) >= 2) ? (1, 1, 1, 1)
        : ((prev[u]) <= -2) ? (0, 0, 0, 0)
        : ((prev[l]) >= -2 && (prev[u]) <= 2) ?
            (0.25*prev[l] + 0.5, 0.25*prev[u] + 0.5, 0.25*prev + 0.5, 0.25*prev + 0.5)
        : (
            max(0, 0.25*prev[l] + 0.5),
            min(1, 0.25*prev[u] + 0.5),
            0.25*prev + 0.5,
            (0.25*(prev[u]-prev[l])/(prev[u]-prev[l]))*prev
                + (
                    (0.25*prev[u] + 0.5)
                    - 0.25*prev[u]*prev[l]/(prev[u]-prev[l])
                )
        );
}

2025-06-12 02:40:25,496 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:40:25,623 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u] <= -2.5)) ? (0, 0, 0, 0) :
        ((prev[l] >= 2.5)) ? (1, 1, 1, 1) :
        (
            max(0, min(1, 0.2 * prev[l] + 0.5)),                      // l
            max(0, min(1, 0.2 * prev[u] + 0.5)),                      // u
            (0.2 * prev + 0.5).clamp(0, 1),                           // L
            (
                ((prev[l] >= -2.5) & (prev[u] <= 2.5)) ? (0.2 * prev + 0.5) :
                ((prev[l] < -2.5) & (prev[u] > 2.5)) ? (prev * (1/5) + 0.5) :
                ((prev[l] < -2.5)) ? ((1 - 0) / (prev[u] + 2.5) * (prev + 2.5)) :
                ((prev[u] > 2.5)) ? ((1 - 0) / (2.5 - prev[l]) * (prev - prev[l])) : (0.2 * prev + 0.5)
            ).clamp(0, 1)
        );
}

2025-06-12 02:40:25,623 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:40:26,609 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:40:26,609 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:40:38,862 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (
            max(0.2 * (prev[l]) + 0.5, 0),
            min(0.2 * (prev[u]) + 0.5, 1),
            (0.2 * prev + 0.5),
            (0.2 * prev + 0.5)
        );
}

2025-06-12 02:40:38,862 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:40:38,979 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ? (0, 0, 0, 0) :
        ((prev[l]) >= 2.5) ? (1, 1, 1, 1) :
        (
            let l = prev[l];
            let u = prev[u];
            let slope = 1/5;
            let bias = 0.5;
            let lower = max(0, min(1, slope * l + bias));
            let upper = max(0, min(1, slope * u + bias));
            let L = max(0, slope * prev + bias);
            let U = min(1, slope * prev + bias);
            (lower, upper, L, U)
        );
}

2025-06-12 02:40:38,980 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:40:39,198 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ?
            (0, 0, 0, 0)
        : (((prev[l]) >= 2.5) ?
            (1, 1, 1, 1)
        : (
            (max(0, min(1, 0.2 * (prev[l]) + 0.5))),
            (max(0, min(1, 0.2 * (prev[u]) + 0.5))),
            (max(0, min(1, 0.2 * prev + 0.5))),
            (max(0, min(1, 0.2 * prev + 0.5)))
        ));
}

2025-06-12 02:40:39,198 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:40:39,198 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:40:39,198 - INFO - [HardSigmoid] Runtime: 166.60 seconds
2025-06-12 02:40:39,199 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardSigmoid ->
        ((prev[u]) <= -2.5) ?
            (0, 0, 0, 0)
        : (((prev[l]) >= 2.5) ?
            (1, 1, 1, 1)
        : (
            (max(0, min(1, 0.2 * (prev[l]) + 0.5))),
            (max(0, min(1, 0.2 * (prev[u]) + 0.5))),
            (max(0, min(1, 0.2 * prev + 0.5))),
            (max(0, min(1, 0.2 * prev + 0.5)))
        ));
}

2025-06-12 02:40:39,199 - INFO - 2025-06-12 02:40:39.199225 - Extracting HardSwish
2025-06-12 02:40:39,199 - INFO -
API: HardSwish -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:40:39,199 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:40:55,064 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 603, in visitFuncCall
    raise TypeMismatchException("Arguments of " + name + " are not the correct type(s)")
constraintflow.core.astTC.TypeMismatchException: Arguments of replace_lower are not the correct type(s)

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ? (
            prev[l], prev[u], prev, prev
        ) : (((prev[u]) <= -3) ? (
            0, 0, 0, 0
        ) : (
            (simplify_lower(prev, (prev[l] + prev[u]) / 6 + 0.5)),
            (simplify_upper(prev, (prev[l] + prev[u]) / 6 + 0.5)),
            (replace_lower(prev, (prev[L] + prev[U]) / 6 + 0.5)),
            (replace_upper(prev, (prev[L] + prev[U]) / 6 + 0.5))
        ));
}

2025-06-12 02:40:55,064 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:40:55,243 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
      ((prev[l]) >= 3) ?
        ((prev[l]), (prev[u]), (prev), (prev)) :
      (((prev[u]) <= -3) ?
        (0, 0, 0, 0) :
        (
          backsubs_lower(((prev)*(min(6, max(0, (prev)+3))) / 6), prev),
          backsubs_upper(((prev)*(min(6, max(0, (prev)+3))) / 6), prev),
          ((prev)*(min(6, max(0, (prev)+3))) / 6),
          ((prev)*(min(6, max(0, (prev)+3))) / 6)
        )
      );
}

2025-06-12 02:40:55,243 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:40:55,374 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        // HardSwish(x) = x * relu6(x+3)/6
        let l = prev[l];
        let u = prev[u];
        let L = prev[L];
        let U = prev[U];

        (l >= 3) ? (
            (l, u, L, U)
        ) : (u <= -3) ? (
            (0, 0, 0, 0)
        ) : (
            // Piecewise linear bounds construction
            let l_hs =
                (l <= -3) ? 0 :
                (l >= 3) ? l :
                l * max(0, min(6, l + 3)) / 6;

            let u_hs =
                (u <= -3) ? 0 :
                (u >= 3) ? u :
                u * max(0, min(6, u + 3)) / 6;

            // Poly lower: (u/(u-l))*(prev + 3) * prev / 6 - (l*u)/(u-l) * prev / 6 if (l < u && l < 3 && u > -3)
            let slope = (u - l != 0) ? (u / (u - l)) : 0;
            let gL =
                (l <= -3) ? 0 :
                (u >= 3) ? prev :
                (slope * (prev + 3) * prev / 6) - ((l * u) / (u - l) * prev / 6);

            // Poly upper (Symbolic, matching gL for simplicity here, user should refine for best precision if needed.)
            let gU =
                (l <= -3) ? 0 :
                (u >= 3) ? prev :
                (u / (u - l)) * (prev + 3) * prev / 6 - (l * u) / (u - l) * prev / 6;

            (l_hs, u_hs, gL, gU)
        );
}

2025-06-12 02:40:55,374 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:40:55,375 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:41:09,550 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:41:09,723 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3)
            ? (prev[l], prev[u], prev, prev)
        : ((prev[u] <= -3)
            ? (0, 0, 0, 0)
        : (
            0,
            func max_hswish_upper(Float l, Float u) = max(
                (u/6)*(min(max(u+3,0),6)),
                (l/6)*(min(max(l+3,0),6))
            );
            max_hswish_upper(prev[l], prev[u]),
            prev * ((min(max(prev+3,0),6))/6),
            prev * ((min(max(prev+3,0),6))/6)
        ))
    );
}

2025-06-12 02:41:09,724 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:41:09,990 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3)) ? (
            prev[l], prev[u], prev, prev
        ) : ((prev[u] <= -3) ? (
            0, 0, 0, 0
        ) : (
            min((prev[l]/6) * (prev[l] + 3), (prev[u]/6) * (prev[u] + 3), 0),
            max((prev[l]/6) * (prev[l] + 3), (prev[u]/6) * (prev[u] + 3), 0),
            (prev/6) * (prev + 3),
            (prev/6) * (prev + 3)
        ));
}

2025-06-12 02:41:09,990 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:41:09,991 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:41:28,827 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ? (
            0, 0, 0, 0
        ) : (
            ((prev[l]) >= 3) ? (
                prev[l], prev[u], prev, prev
            ) : (
                (prev[l] >= 0) ?
                (
                    (prev[l] * max(0, min(6, prev[l]+3)))/6,
                    (prev[u] * max(0, min(6, prev[u]+3)))/6,
                    (prev * max(0, min(6, prev+3)))/6,
                    (prev * max(0, min(6, prev+3)))/6
                ) :
                (
                    0,
                    max(
                        (prev[u] * max(0, min(6, prev[u]+3)))/6,
                        (prev[l] * max(0, min(6, prev[l]+3)))/6
                    ),
                    (prev * max(0, min(6, prev+3)))/6,
                    (prev * max(0, min(6, prev+3)))/6
                )
            )
        );
}

2025-06-12 02:41:28,828 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:41:29,316 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 596, in visitFuncCall
    exprstype = self.visit(node.arglist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: min_hswish_slope is not defined

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        : (
            (simplify_lower(prev, min_hswish_slope(prev[l], prev[u]))),
            (simplify_upper(prev, max_hswish_slope(prev[l], prev[u]))),
            (replace_lower(prev, min_hswish_slope(prev[l], prev[u]))),
            (replace_upper(prev, max_hswish_slope(prev[l], prev[u])))
        );
}

2025-06-12 02:41:29,316 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:41:29,689 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3) ? (
            prev[l], prev[u], prev, prev
        ) : ((prev[u] <= -3) ? (
            0, 0, 0, 0
        ) : (
            // Middle case: prev[l] < 3 and prev[u] > -3
            // Lower bound
            (simplify_lower(prev, (1/6)) * simplify_lower(prev, prev[l] + 3)),
            // Upper bound
            (simplify_upper(prev, (1/6)) * simplify_upper(prev, prev[u] + 3)),
            // Lower poly
            (replace_lower(prev, (1/6)) * (replace_lower(prev, prev[L] + 3))),
            // Upper poly
            (replace_upper(prev, (1/6)) * (replace_upper(prev, prev[U] + 3)))
        ))
}

2025-06-12 02:41:29,689 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:41:29,689 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:41:52,503 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev)) :
        ((prev[u]) <= -3) ?
            (0, 0, 0, 0) :
        (((prev[l]) >= -3) & ((prev[u]) <= 3)) ?
            -- Inside [-3, 3]: use linear bounds
            ( ((prev[l]) * (prev[l] + 3)) / 6,
              ((prev[u]) * (prev[u] + 3)) / 6,
              ((prev) * (prev + 3)) / 6,
              ((prev) * (prev + 3)) / 6 ) :
        -- Spans all three segments
        (0,
         max((prev[u]), (prev[u]) * (prev[u] + 3)/6, (prev[l]) * (prev[l] + 3)/6),
         0,
         max((prev) * (prev + 3)/6, (prev))
        );
}

2025-06-12 02:41:52,503 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:41:52,582 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (prev[u] <= -3) ? (
            0, 0, 0, 0
        ) : (
            (prev[l] >= 3) ? (
                prev[l], prev[u], prev, prev
            ) : (
                (prev[l] >= -3 && prev[u] <= 3) ? (
                    // On [-3,3]: lower bound at min endpoint, upper bound at max endpoint.
                    (simplify_lower(prev, min((prev[l]+3)*prev[l]/6, (prev[u]+3)*prev[u]/6))),
                    (simplify_upper(prev, max((prev[l]+3)*prev[l]/6, (prev[u]+3)*prev[u]/6))),
                    ((prev + 3) * prev / 6),
                    ((prev + 3) * prev / 6)
                ) : (
                    // Mixed regions, general case
                    0,
                    simplify_upper(prev, max((prev[u]+3)*prev[u]/6, (prev[l]+3)*prev[l]/6, prev[u], prev[l])),
                    0,
                    ((prev + 3) * prev / 6)
                )
            )
        );
}

2025-06-12 02:41:52,582 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:41:52,657 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            // region x >= 3: hardswish(x) = x
            ((prev[l]), (prev[u]), (prev), (prev)) :
        ((prev[u]) <= -3) ?
            // region x <= -3: hardswish(x) = 0
            (0, 0, 0, 0) :
        (
            // middle region: linear bounds
            // Lower bound: 0 if prev[l]<-3 else 1/6*x + 0.5*x + 0.5 * min(max(x+3,0),6)
            l = (prev[l] >= 0) ? ((prev[l]) * (1/6) + (prev[l]) / 2 + (0.5 * min(max((prev[l])+3,0),6))) : 0,
            // Upper bound: use at prev[u]
            u = (prev[u]) * (1/6) + (prev[u]) / 2 + (0.5 * min(max((prev[u])+3,0),6)),
            // PolyExp lower: abstract as (prev) * (min(max((prev)+3,0),6)) / 6
            L = (prev) * (min(max((prev)+3,0),6))/6,
            // PolyExp upper: abstract as (prev) * (min(max((prev)+3,0),6))/6
            U = (prev) * (min(max((prev)+3,0),6))/6,
            (l, u, L, U)
        );
}

2025-06-12 02:41:52,658 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:41:52,658 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:42:03,607 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3)
            ? ((prev[l]), (prev[u]), (prev), (prev))
            : (
                ((prev[u]) <= -3)
                    ? (0, 0, 0, 0)
                    : (
                        ( (prev[l]) <= -3 && (prev[u]) >= 3 )
                            ? (
                                0,
                                (prev[u]),
                                (prev / 6) * ((prev[u]) + 3),
                                ((prev / 6) * ((prev[u]) + 3))
                            )
                            : (
                                (prev / 6) * clamp((prev) + 3, 0, 6),
                                (prev / 6) * clamp((prev) + 3, 0, 6),
                                (prev / 6) * clamp((prev) + 3, 0, 6),
                                (prev / 6) * clamp((prev) + 3, 0, 6)
                            )
                      )
              );
}

2025-06-12 02:42:03,608 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:42:03,685 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[u] <= -3) ?
            (0, 0, 0, 0) :
        (
            (prev[l] >= -3 && prev[u] <= 3) ?
                (simplify_lower(prev, (prev[l] + 3) / 6), simplify_upper(prev, (prev[u] + 3) / 6), replace_lower(prev, (prev[l] + 3) / 6), replace_upper(prev, (prev[u] + 3) / 6)) :
            (0, simplify_upper(prev, (prev[u] + 3) / 6), 0, replace_upper(prev, (prev[u] + 3) / 6))
        )));
}

2025-06-12 02:42:03,685 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:42:03,756 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish -> ((prev[u]) <= -3) ? (0, 0, 0, 0)
    : (((prev[l]) >= 3) ? (prev[l], prev[u], prev, prev)
    : (
       (prev[l] >= -3) & (prev[u] <= 3)
         ? (
             (prev[l]*((prev[l]+3)/6)), (prev[u]*((prev[u]+3)/6)), (prev*((prev+3)/6)), (prev*((prev+3)/6)))
         : (
            0, (prev[u]*((prev[u]+3)/6)), 0, (prev*((prev+3)/6))
           )
      )
     );
}

2025-06-12 02:42:03,756 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:42:03,756 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:42:18,202 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
    ((prev[u]) <= -3) ?
        (0, 0, 0, 0) :
    ((prev[l]) >= 3) ?
        (prev[l], prev[u], prev, prev) :
    (((prev[l]) >= -3) & ((prev[u]) <= 3)) ?
        (simplify_lower(prev, (prev[l]+3)*(prev[l])/6), simplify_upper(prev, (prev[u]+3)*(prev[u])/6),
         replace_lower(prev, (prev[l]+3)*(prev[l])/6), replace_upper(prev, (prev[u]+3)*(prev[u])/6)) :
    (0, simplify_upper(prev, (prev[u]+3)*(prev[u])/6), 0, replace_upper(prev, (prev[u]+3)*(prev[u])/6));
}

2025-06-12 02:42:18,202 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:42:18,583 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:42:18,662 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ?
            (0, 0, 0, 0) :
        ((prev[l]) >= 3) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l]) >= -3 && (prev[u]) <= 3) ?
            ((prev[l] * (prev[l]+3) / 6), (prev[u] * (prev[u]+3) / 6), ((prev * (prev+3)) / 6), ((prev * (prev+3)) / 6)) :
        (0, (prev[u] * (prev[u]+3) / 6), 0, ((prev * (prev+3)) / 6));
}

2025-06-12 02:42:18,662 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:42:18,662 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:42:33,371 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3) ? (prev[l], prev[u], prev, prev) :
        (((prev[l]) >= 0) ?
            (
                (prev[l] * (prev[l] + 3)) / 6,
                (prev[u] * (prev[u] + 3)) / 6,
                (prev * (prev + 3)) / 6,
                (prev * (prev + 3)) / 6
            ) :
            (((prev[u]) <= 0) ?
                (
                    0,
                    (prev[u] * (prev[u] + 3)) / 6,
                    0,
                    (prev * (prev + 3)) / 6
                ) :
                (
                    0,
                    max((prev[u] * (prev[u] + 3)) / 6, 0),
                    0,
                    (prev * (prev + 3)) / 6
                )
            )
        );
}

2025-06-12 02:42:33,374 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:42:33,471 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        : (
            // l, u
            ((simplify_lower(prev, (1/6.0))*simplify_lower(prev,1) + simplify_lower(prev,1)*0.5 + simplify_lower(prev,1)*0.5),
             (simplify_upper(prev, (1/6.0))*simplify_upper(prev,1) + simplify_upper(prev,1)*0.5 + simplify_upper(prev,1)*0.5),
            // L, U (linear relaxations)
             (prev*(simplify_lower(prev,1)+3)/6),
             (prev*(simplify_upper(prev,1)+3)/6)
            )
        );
}

2025-06-12 02:42:33,471 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:42:33,545 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3) ? (prev[l], prev[u], prev, prev) :
        (
            (prev[l] >= -3) && (prev[u] <= 3)
            ?
            (
                (prev[l] * max(0, min(6, prev[l]+3)) / 6),
                (prev[u] * max(0, min(6, prev[u]+3)) / 6),
                (prev * max(0, min(6, prev+3)) / 6),
                (prev * max(0, min(6, prev+3)) / 6)
            )
            :
            (
                0,
                max(prev[u], prev[u] * max(0, min(6, prev[u]+3)) / 6, prev[l] * max(0, min(6, prev[l]+3)) / 6),
                0,
                prev * max(0, min(6, prev+3)) / 6
            )
        );
}

2025-06-12 02:42:33,545 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:42:33,545 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:42:52,596 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 207, in visitBinOp
    rtype = self.visit(node.right)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 588, in visitFuncCall
    raise UndefinedVarException(name + " is not defined")
constraintflow.core.astTC.UndefinedVarException: clamp is not defined

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l] >= 3) ?
            (prev[l], prev[u], prev, prev)
        : (prev[u] <= -3) ?
            (0, 0, 0, 0)
        :
            (
                (min(0, prev[l]) >= -3 ?
                    0.5 * (prev[l] + min(3, max(0, prev[l]))) / 3 * prev[l] :
                    0
                ),
                0.5 * (max(0, prev[u]) + min(3, max(0, prev[u]))) / 3 * prev[u],
                0.5 * (prev + 3) * clamp((prev + 3) / 6, 0, 1),
                0.5 * (prev + 3) * clamp((prev + 3) / 6, 0, 1)
            )
        );
}

2025-06-12 02:42:52,596 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:42:52,955 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:42:53,032 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[u]) <= -3) ? (0, 0, 0, 0) :
        ((prev[l]) >= 3) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) >= -3 && (prev[u]) <= 3) ? (
            ((prev[l] + 3) * prev[l] / 6), ((prev[u] + 3) * prev[u] / 6),
            ((prev + 3) * prev / 6), ((prev + 3) * prev / 6)
        ) :
        (
            0,
            (prev[u] > 3) ? prev[u] : ((prev[u] + 3) * prev[u] / 6),
            0,
            (prev[u] > 3) ? prev : ((prev + 3) * prev / 6)
        );
}

2025-06-12 02:42:53,032 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:42:53,032 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:43:06,465 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ? // Region x >= 3, HardSwish(x) = x
            ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[u]) <= -3) ? // Region x <= -3, HardSwish(x) = 0
            (0, 0, 0, 0)
        : // Region -3 < x < 3, use linear bounds
            (
                simplify_lower(prev, (prev[l]+3)/6), // lower float bound
                simplify_upper(prev, (prev[u]+3)/6), // upper float bound
                replace_lower(prev, (prev[l]+3)/6),  // lower poly bound
                replace_upper(prev, (prev[u]+3)/6)   // upper poly bound
            );
}

2025-06-12 02:43:06,466 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:43:06,573 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on Neuron and PolyExp

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev)) :
        ((prev[u]) <= -3) ?
            (0, 0, 0, 0) :
        (
            max(0, prev[l] * (prev[l] + 3) / 6),
            min(prev[u], prev[u] * (prev[u] + 3) / 6),
            prev * (prev + 3) / 6,
            prev * (prev + 3) / 6
        );
}

2025-06-12 02:43:06,573 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:43:06,646 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        (prev[l] >= 3)
            ? (prev[l], prev[u], prev, prev)
        : ((prev[u] <= -3)
            ? (0, 0, 0, 0)
        : (
            ( (prev[l] >= -3) && (prev[u] <= 3) )
                ? (
                    (prev[l]) * (prev[l] + 3) / 6,
                    (prev[u]) * (prev[u] + 3) / 6,
                    prev * (prev + 3) / 6,
                    prev * (prev + 3) / 6
                  )
            :
                  (
                  0,
                  max( (prev[u]) * (prev[u] + 3) / 6, 0 ),
                  0,
                  prev * (prev + 3) / 6
                  )
        )
        );
}

2025-06-12 02:43:06,647 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:43:06,647 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:43:22,529 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        : (((prev[u]) <= -3) ?
            (0, 0, 0, 0)
        : (
            // general case: interval spans both -3 and 3
            (min(0, prev[l])),
            (max(prev[u], 0)),
            // Lower poly: convex hull (secant) or lower tangent
            ((prev + 3) * max(0, min(6, prev + 3)) / 6),
            // Upper poly: secant between endpoints
            (prev * ((prev[u] + 3) / 6))
        ))
}

2025-06-12 02:43:22,529 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:43:22,619 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish -> (
        (prev[u] <= -3) ? 0 : (
            (prev[l] >= 3) ? prev[l] : (
                simplify_lower(prev, (prev[l] + 3) / 6),
                simplify_upper(prev, (prev[u] + 3) / 6)
            )
        ),
        (prev[u] <= -3) ? 0 : (
            (prev[l] >= 3) ? prev[u] : (
                simplify_upper(prev, (prev[u] + 3) / 6),
                simplify_upper(prev, (prev[u] + 3) / 6)
            )
        ),
        (prev[u] <= -3) ? 0 : (
            (prev[l] >= 3) ? prev : (
                replace_lower(prev, (prev[l] + 3) / 6),
                replace_upper(prev, (prev[u] + 3) / 6)
            )
        ),
        (prev[u] <= -3) ? 0 : (
            (prev[l] >= 3) ? prev : (
                replace_upper(prev, (prev[u] + 3) / 6),
                replace_upper(prev, (prev[u] + 3) / 6)
            )
        )
    );
}

2025-06-12 02:43:22,619 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:43:22,687 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ? (
            prev[l], prev[u], prev, prev
        ) : (
            ((prev[u]) <= -3) ? (
                0, 0, 0, 0
            ) : (
                (prev[l] <= -3 && prev[u] >= 3) ? (
                    0, prev[u], 0, prev
                ) : (
                    // Linear approximation in the [-3, 3] interval
                    // hardswish(x) = x * relu6(x+3)/6, relu6(x) = min(max(x,0),6)
                    let slope = (hardswish(prev[u]) - hardswish(prev[l])) / (prev[u] - prev[l]);
                    let bias = hardswish(prev[l]) - slope*prev[l];
                    hardswish(prev[l]),
                    hardswish(prev[u]),
                    slope*prev + bias,
                    slope*prev + bias
                )
            )
        );
}

2025-06-12 02:43:22,691 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:43:22,691 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:43:22,691 - INFO - [HardSwish] Runtime: 163.49 seconds
2025-06-12 02:43:22,691 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardSwish ->
        ((prev[l]) >= 3) ? (
            prev[l], prev[u], prev, prev
        ) : (
            ((prev[u]) <= -3) ? (
                0, 0, 0, 0
            ) : (
                (prev[l] <= -3 && prev[u] >= 3) ? (
                    0, prev[u], 0, prev
                ) : (
                    // Linear approximation in the [-3, 3] interval
                    // hardswish(x) = x * relu6(x+3)/6, relu6(x) = min(max(x,0),6)
                    let slope = (hardswish(prev[u]) - hardswish(prev[l])) / (prev[u] - prev[l]);
                    let bias = hardswish(prev[l]) - slope*prev[l];
                    hardswish(prev[l]),
                    hardswish(prev[u]),
                    slope*prev + bias,
                    slope*prev + bias
                )
            )
        );
}

2025-06-12 02:43:22,691 - INFO - 2025-06-12 02:43:22.691867 - Extracting HardTanh
2025-06-12 02:43:22,691 - INFO -
API: HardTanh -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:43:22,692 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:43:52,468 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    HardTanh ->
        ((prev[u]) <= -1) ? (
            -1, -1, -1, -1
        ) : (
            ((prev[l]) >= 1) ? (
                1, 1, 1, 1
            ) : (
                ((prev[l]) >= -1 && (prev[u]) <= 1) ? (
                    prev[l], prev[u], prev, prev
                ) : (
                    ((prev[l]) < -1 && (prev[u]) > 1) ? (
                        -1, 1,
                        prev * (2 / (prev[u] - prev[l])) - ((prev[u] + prev[l]) / (prev[u] - prev[l])),
                        prev * (2 / (prev[u] - prev[l])) - ((prev[u] + prev[l]) / (prev[u] - prev[l]))
                    ) : (
                        ((prev[l]) < -1) ? (
                            -1, prev[u] > 1 ? 1 : prev[u],
                            prev * (1 / (prev[u] - prev[l])) - (prev[l] / (prev[u] - prev[l])),
                            prev * ((prev[u] > 1 ? 1 : prev[u]) - (-1)) / (prev[u] - prev[l]) - ((prev[u] > 1 ? 1 : prev[u]) * prev[l]) / (prev[u] - prev[l])
                        ) : (
                            ((prev[u]) > 1) ? (
                                prev[l] < -1 ? -1 : prev[l], 1,
                                prev * (1 / (prev[u] - prev[l])) + (prev[u] / (prev[u] - prev[l])),
                                prev * (1 / (prev[u] - prev[l])) + (prev[u] / (prev[u] - prev[l]))
                            ) : (0,0,0,0)
                        )
                    )
                )
            )
        );
}

2025-06-12 02:43:52,468 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:43:52,548 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ?
            (1, 1, 1, 1) :
        ((prev[l]) >= -1 && (prev[u]) <= 1) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l]) < -1 && (prev[u]) <= 1) ?
            (0, prev[u], 0, prev) :
        ((prev[l]) >= -1 && (prev[u]) > 1) ?
            (prev[l], 1, prev, 1) :
        ((prev[l]) < -1 && (prev[u]) > 1) ?
            (0, 1, 0, 1) :
            (prev[l], prev[u], prev, prev);
}

2025-06-12 02:43:52,548 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:43:52,630 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        (prev[l] >= 1) ? (1, 1, 1, 1)
        : (prev[u] <= -1) ? (-1, -1, -1, -1)
        : (prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev)
        : (prev[l] < -1 && prev[u] <= 1) ? (-1, prev[u], (prev - prev[l]) * (1 / (prev[u] - prev[l])) * (prev + prev[u] - 1) + (-1), prev)
        : (prev[l] >= -1 && prev[u] > 1) ? (prev[l], 1, prev, (prev - prev[u]) * (1 / (prev[u] - prev[l])) * (prev - prev[l] + 1) + 1)
        : (prev[l] < -1 && prev[u] > 1) ? (-1, 1, (prev - prev[l]) * (1 / (prev[u] - prev[l])) * (prev + prev[u] - 1) + (-1), (prev - prev[u]) * (1 / (prev[u] - prev[l])) * (prev - prev[l] + 1) + 1)
        : (-1, 1, -1, 1);
}

2025-06-12 02:43:52,630 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:43:52,630 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:44:09,192 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        (prev[u] <= -1) ? (-1, -1, -1, -1) :
        (prev[l] >= -1 && prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < -1 && prev[u] > 1) ?
            (-1, 1, prev, prev) :
        (prev[l] < -1 && prev[u] <= 1) ?
            (-1, prev[u], -1, ((prev[u] + 1)/(prev[u] - prev[l]) * prev) - ((prev[u] + 1) * prev[l] / (prev[u] - prev[l]))) :
        ((prev[l] >= -1 && prev[l] < 1 && prev[u] > 1) ?
            (prev[l], 1, ((1 - prev[l])/(prev[u] - prev[l]) * prev) + (prev[u] * (1 - prev[l]) / (prev[u] - prev[l])), 1)
        : (prev[l], prev[u], prev, prev))
        );
}

2025-06-12 02:44:09,192 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:44:09,259 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1) :
        (((prev[l]) >= 1) ?
            (1, 1, 1, 1) :
        (((prev[l]) >= -1) & ((prev[u]) <= 1) ?
            (prev[l], prev[u], prev, prev) :
        (((prev[l]) < -1) & ((prev[u]) > 1) ?
            (-1, 1, ((prev - prev[l]) / (prev[u] - prev[l])) * 2 - 1, 1 - ((prev[u] - prev) / (prev[u] - prev[l])) * 2) :
        (((prev[l]) < -1) ?
            (-1, min(prev[u], 1), ((prev - prev[l]) / (min(prev[u],1) - prev[l])) * (min(prev[u],1) + 1) - 1, min(prev,1)) :
        ((prev[u]) > 1) ?
            (max(prev[l], -1), 1, max(prev, -1), ((1 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + max(prev, -1)) :
        (prev[l], prev[u], prev, prev)
        )))));
}

2025-06-12 02:44:09,260 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:44:09,331 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1.0) ?
            (-1.0, -1.0, -1.0, -1.0) :
            ((prev[l] >= 1.0) ?
                (1.0, 1.0, 1.0, 1.0) :
                ((prev[l] >= -1.0 && prev[u] <= 1.0) ?
                    (prev[l], prev[u], prev, prev) :
                    ((prev[l] < -1.0 && prev[u] > 1.0) ?
                        (-1.0, 1.0, prev, prev) :
                        ((prev[l] < -1.0) ?
                            (-1.0, prev[u], prev, prev) :
                            (prev[l], 1.0, prev, prev)
                        )
                    )
                )
            )
        );
}

2025-06-12 02:44:09,331 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:44:09,331 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:44:23,855 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_val, max_val) ->
        (prev[l] >= max_val) ? (max_val, max_val, max_val, max_val) :
        (prev[u] <= min_val) ? (min_val, min_val, min_val, min_val) :
        (prev[l] >= min_val && prev[u] <= max_val) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < min_val && prev[u] > max_val) ? (min_val, max_val,
            ((prev - prev[l]) * (max_val - min_val) / (prev[u] - prev[l])) + min_val - (((prev[u] - max_val) * (prev[l] - min_val)) / (prev[u] - prev[l])),
            ((prev - prev[l]) * (max_val - min_val) / (prev[u] - prev[l])) + min_val - (((prev[u] - max_val) * (prev[l] - min_val)) / (prev[u] - prev[l]))
        ) :
        (prev[l] < min_val) ?
            (min_val, prev[u], ((prev - prev[l]) * (max_val - min_val) / (prev[u] - prev[l])) + min_val - (((prev[u] - max_val) * (prev[l] - min_val)) / (prev[u] - prev[l])), prev) :
        (prev[u] > max_val) ?
            (prev[l], max_val, prev, ((prev - prev[l]) * (max_val - min_val) / (prev[u] - prev[l])) + min_val - (((prev[u] - max_val) * (prev[l] - min_val)) / (prev[u] - prev[l])))
        : (0, 0, 0, 0);
}

2025-06-12 02:44:23,855 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:44:23,928 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ? (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ? (1, 1, 1, 1) :
        (((prev[l]) >= -1) & ((prev[u]) <= 1)) ? (prev[l], prev[u], prev, prev) :
        (((prev[l]) < -1) & ((prev[u]) > 1)) ? (-1, 1, -1, 1) :
        (((prev[l]) < -1) & ((prev[u]) <= 1)) ?
            (-1, prev[u], -1, prev - ((prev[l] + 1) / ((prev[u]) - (prev[l]))) * (prev - 1)) :
        (((prev[l]) >= -1) & ((prev[u]) > 1)) ?
            (prev[l], 1, prev - ((prev[u] - 1) / ((prev[u]) - (prev[l]))) * (prev - 1), 1) :
        (prev[l], prev[u], prev, prev);
}

2025-06-12 02:44:23,928 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:44:24,002 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v,max_v) ->
        ((prev[u]) <= min_v) ? (min_v, min_v, min_v, min_v) :
        ((prev[l]) >= max_v) ? (max_v, max_v, max_v, max_v) :
        ((prev[l]) >= min_v && (prev[u]) <= max_v) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < min_v && (prev[u]) > max_v) ? (min_v, max_v, min_v + ((max_v-min_v)/(prev[u]-prev[l]))*(prev - prev[l]), max_v + ((max_v-min_v)/(prev[u]-prev[l]))*(prev - prev[u])) :
        ((prev[l]) < min_v) ? (min_v, prev[u], min_v + ((prev[u]-min_v)/(prev[u]-prev[l]))*(prev - prev[l]), prev) :
        ((prev[u]) > max_v) ? (prev[l], max_v, prev, max_v + ((max_v-prev[l])/(prev[u]-prev[l]))*(prev - prev[u])) :
        (min_v, max_v, min_v, max_v);
}

2025-06-12 02:44:24,003 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:44:24,003 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:44:52,610 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ?
            (-1, -1, -1, -1) :
        ((prev[l] >= 1) ?
            (1, 1, 1, 1) :
        ((prev[l] >= -1) & (prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev) :
        ((prev[l] < -1) & (prev[u] <= 1) ?
            (-1, prev[u], -1, prev) :
        ((prev[l] >= -1) & (prev[u] > 1) ?
            (prev[l], 1, prev, 1) :
        (-1, 1, -1, 1)
        )))));
}

2025-06-12 02:44:52,610 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:44:53,260 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 383, in visitTernary
    raise TypeMismatchException(str(ltype) + " and " + str(rtype) + " are not lub_type")
constraintflow.core.astTC.TypeMismatchException: Int and Bool are not lub_type

Code:
transformer deeppoly{
    HardTanh -> (
        (prev[l] >= 1) ? 1 :
        (prev[u] <= -1) ? -1 :
        max(-1, min(1, prev[l])),

        (prev[u] <= -1) ? -1 :
        (prev[l] >= 1) ? 1 :
        min(1, max(-1, prev[u])),

        (prev[l] >= 1) ? 1 :
        (prev[u] <= -1) ? -1 :
        max(-1, min(1, prev[L])),

        (prev[l] >= 1) ? 1 :
        (prev[u] <= -1) ? -1 :
        min(1, max(-1, prev[U]))
    );
}

2025-06-12 02:44:53,261 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:44:53,388 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ? (min_v, min_v, min_v, min_v)
      : (prev[l] >= max_v) ? (max_v, max_v, max_v, max_v)
      : (prev[l] >= min_v && prev[u] <= max_v) ? (prev[l], prev[u], prev, prev)
      : (prev[l] < min_v && prev[u] > max_v) ? (min_v, max_v, min_v, max_v)
      : (prev[l] < min_v) ? (min_v, prev[u], min_v, prev)
      :                       (prev[l], max_v, prev, max_v));
}

2025-06-12 02:44:53,389 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:44:53,389 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:45:18,206 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 377, in visitTernary
    ltype = self.visit(node.texpr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 378, in visitTernary
    rtype = self.visit(node.fexpr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 212, in visitBinOp
    node.type = self.get_binop(node.op, ltype, rtype)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 179, in get_binop
    raise TypeMismatchException(op + " is not defined on " + str(ltype) + " and " + str(rtype))
constraintflow.core.astTC.TypeMismatchException: * is not defined on PolyExp and PolyExp

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ?
            (1, 1, 1, 1) :
        (
            max(-1, prev[l]),
            min(1, prev[u]),

            // Lower poly
            (prev[l] >= -1) ? (
                (prev[u] <= 1) ? prev : // all in (-1,1): identity
                prev + ((1 - prev[u]) / (prev[u] - prev[l])) * (prev - prev[u]) // upper cross at 1 only
            ) : (
                (prev[u] <= 1) ? ((prev) * ((1) / (prev[u] - prev[l])) + ((-prev[l]) / (prev[u] - prev[l]))) : // lower cross at -1
                0 // covers all of [-1,1]
            ),

            // Upper poly
            (prev[u] <= 1) ? (
                (prev[l] >= -1) ? prev : // all in (-1,1): identity
                prev * (1 / (prev[u] - prev[l])) + ((-prev[l]) / (prev[u] - prev[l])) // lower cross at -1 only
            ) : (
                (prev[l] >= -1) ? prev + ((1 - prev[u]) / (prev[u] - prev[l])) * (prev - prev[u]) : // upper cross at 1 only
                1 // covers all of [-1,1]
            )
        );
}

2025-06-12 02:45:18,206 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:45:18,341 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ?
            (min_v, min_v, min_v, min_v)
        : (prev[l] >= max_v) ?
            (max_v, max_v, max_v, max_v)
        : (prev[l] >= min_v && prev[u] <= max_v) ?
            (prev[l], prev[u], prev, prev)
        : (prev[l] < min_v && prev[u] > max_v) ?
            (min_v, max_v,
             min_v + ((prev - prev[l]) * (max_v - min_v) / (prev[u] - prev[l])),
             max_v + ((prev - prev[u]) * (max_v - min_v) / (prev[u] - prev[l])))
        : (prev[l] < min_v) ?
            (min_v, prev[u],
             min_v + ((prev - prev[l]) * (prev[u] - min_v) / (prev[u] - prev[l])),
             prev)
        : /* prev[u] > max_v */
            (prev[l], max_v,
             prev,
             max_v + ((prev - prev[u]) * (max_v - prev[l]) / (prev[u] - prev[l])))
        );
}

2025-06-12 02:45:18,341 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:45:18,476 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ? (-1, -1, -1, -1) :
        ((prev[l]) >= 1)  ? (1, 1, 1, 1)  :
        (((prev[l]) >= -1) && ((prev[u]) <= 1)) ? (prev[l], prev[u], prev, prev) :
        (((prev[l]) < -1) && ((prev[u]) <= 1))  ? (0, prev[u], 0, prev) :
        (((prev[l]) >= -1) && ((prev[u]) > 1))  ? (prev[l], 1, prev, 1) :
        (-1, 1, 0, 1);
}

2025-06-12 02:45:18,478 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:45:18,479 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:45:36,776 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_value, max_value) ->
        ((prev[u] <= min_value) ? (min_value, min_value, min_value, min_value) :
         (prev[l] >= max_value) ? (max_value, max_value, max_value, max_value) :
         (prev[l] >= min_value && prev[u] <= max_value) ? (prev[l], prev[u], prev, prev) :
         (prev[l] < min_value && prev[u] > max_value) ? (min_value, max_value,
            (((prev - prev[l]) * ((max_value - min_value) / (prev[u] - prev[l]))) + min_value - min_value * ((prev - prev[l]) / (prev[u] - prev[l]))),
            (((prev - prev[l]) * ((max_value - min_value) / (prev[u] - prev[l]))) + min_value - min_value * ((prev - prev[l]) / (prev[u] - prev[l]))) ) :
         (prev[l] < min_value) ? (min_value, prev[u], min_value, ((prev - prev[l]) * ((prev[u] - min_value) / (prev[u] - prev[l]))) + min_value - min_value * ((prev - prev[l]) / (prev[u] - prev[l]))) :
         (max_value < prev[u]) ? (prev[l], max_value, ((prev - prev[l]) * ((max_value - prev[l]) / (prev[u] - prev[l]))) + prev[l] - prev[l] * ((prev - prev[l]) / (prev[u] - prev[l])), max_value) :
         (0, 0, 0, 0)
        );
}

2025-06-12 02:45:36,777 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:45:36,943 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ? (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ? (1, 1, 1, 1) :
        ((prev[l]) >= -1 && (prev[u]) <= 1) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < -1 && (prev[u]) > 1) ? (-1, 1, prev*(2/((prev[u]) - (prev[l]))) + ((prev[u] + prev[l] - 2)/((prev[u])-(prev[l]))), prev*(2/((prev[u]) - (prev[l]))) + ((2 - prev[u] - prev[l])/((prev[u])-(prev[l])))) :
        ((prev[l]) < -1) ? (-1, min(1, prev[u]), prev*(1/(prev[u]-prev[l])) + ((prev[u]+prev[l] - 2*min(1,prev[u]))/(prev[u]-prev[l])), min(1, prev[u])) :
        /* prev[u] > 1 */
        ((max(-1, prev[l])), 1, prev*(1/(prev[u] - prev[l])) + ((prev[u] + prev[l] - 2*max(-1, prev[l]))/(prev[u] - prev[l])), 1);
}

2025-06-12 02:45:36,944 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:45:52,384 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_val, max_val) ->
        ((prev[u] <= min_val) ? (min_val, min_val, min_val, min_val) :
         (prev[l] >= max_val) ? (max_val, max_val, max_val, max_val) :
         (prev[l] >= min_val && prev[u] <= max_val) ? (prev[l], prev[u], prev, prev) :
         (prev[l] < min_val && prev[u] <= max_val) ? (min_val, prev[u], min_val, prev) :
         (prev[l] >= min_val && prev[u] > max_val) ? (prev[l], max_val, prev, max_val) :
         (prev[l] < min_val && prev[u] > max_val) ? (min_val, max_val, min_val, max_val) :
         (prev[l], prev[u], prev, prev));
}

2025-06-12 02:45:52,384 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:45:52,384 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:46:07,646 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        (prev[u] <= -1) ? (-1, -1, -1, -1) :
        (prev[l] >= 1)  ? (1, 1, 1, 1) :
        (prev[l] >= -1 && prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < -1 && prev[u] <= 1) ?
            (-1, prev[u], -1, prev) :
        (prev[l] >= -1 && prev[u] > 1) ?
            (prev[l], 1, prev, 1) :
        (-1, 1, -1, 1);
}

2025-06-12 02:46:07,646 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:46:07,764 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[l] >= 1) ? (1,1,1,1)
        : (prev[u] <= -1) ? (-1,-1,-1,-1)
        : (prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev)
        : (prev[l] < -1 && prev[u] > 1) ? (-1,1,prev,prev)
        : (prev[l] < -1) ? (0,max(1,prev[u]), (prev-u)*(1+prev[l])/(prev[u]-prev[l]) - (prev[u]*prev[l])/(prev[u]-prev[l]), prev)
        : (prev[u] > 1) ? (min(-1,prev[l]),1,prev, (prev)*(1-prev[l])/(prev[u]-prev[l]) - (prev[l])/(prev[u]-prev[l]))
        : (prev[l],prev[u],prev,prev));
}

2025-06-12 02:46:07,764 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:46:07,839 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ?
            (min_v, min_v, min_v, min_v) :
            ((prev[l] >= max_v) ?
                (max_v, max_v, max_v, max_v) :
                (max(prev[l], min_v), min(prev[u], max_v),
                    (prev - min_v) * ((max_v - min_v) / (max(prev[u], max_v) - min_v)) + min_v,
                    (prev - max_v) * ((max_v - min_v) / (min(prev[l], min_v) - max_v)) + max_v
                )
            )
        );
}

2025-06-12 02:46:07,839 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:46:07,839 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:46:37,446 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[l] >= max_v) ? (max_v, max_v, max_v, max_v)
        : (prev[u] <= min_v) ? (min_v, min_v, min_v, min_v)
        : (prev[l] >= min_v && prev[u] <= max_v) ? (prev[l], prev[u], prev, prev)
        : (prev[l] < min_v && prev[u] > max_v) ? (min_v, max_v,
                prev * ((max_v - min_v) / (prev[u] - prev[l])) + (min_v * prev[u] - max_v * prev[l]) / (prev[u] - prev[l]),
                prev * ((max_v - min_v) / (prev[u] - prev[l])) + (max_v * prev[u] - min_v * prev[l]) / (prev[u] - prev[l]))
        : (prev[l] < min_v) ? (min_v, min(max_v, prev[u]),
                prev * ((min(max_v, prev[u]) - min_v) / (prev[u] - prev[l])) + (min_v * prev[u] - min(max_v, prev[u]) * prev[l]) / (prev[u] - prev[l]),
                min(max_v, prev[u]))
        : (prev[u] > max_v) ? (max(min_v, prev[l]), max_v,
                max(min_v, prev[l]),
                prev * ((max_v - max(min_v, prev[l])) / (prev[u] - prev[l])) + (max_v * prev[u] - max(min_v, prev[l]) * prev[l]) / (prev[u] - prev[l]))
        : (min_v, max_v, min_v, max_v));
}

2025-06-12 02:46:37,446 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:46:37,521 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh(min_v, max_v) ->
        ((prev[u] <= min_v) ?
            (min_v, min_v, min_v, min_v) :
            ((prev[l] >= max_v) ?
                (max_v, max_v, max_v, max_v) :
                ((prev[l] >= min_v && prev[u] <= max_v) ?
                    (prev[l], prev[u], prev, prev) :
                    ((prev[l] < min_v && prev[u] > max_v) ?
                        (min_v, max_v, prev, prev) :
                        ((prev[l] < min_v) ?
                            (min_v, min(prev[u], max_v), prev*(prev[u]-min_v)/(prev[u]-prev[l]) + min_v*(prev[l]-min_v)/(prev[u]-prev[l]), prev*(min(prev[u], max_v)-min_v)/(prev[u]-prev[l]) + min_v*(prev[u]-min(prev[u], max_v))/(prev[u]-prev[l])) :
                        (max(prev[l], min_v), max_v, prev*(max_v-prev[l])/(prev[u]-prev[l]) + max_v*(prev[u]-max_v)/(prev[u]-prev[l]), prev*(max_v-prev[l])/(prev[u]-prev[l]) + max_v*(prev[u]-max_v)/(prev[u]-prev[l]))
                        )
                    )
                )
            )
        );
}

2025-06-12 02:46:37,521 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:46:37,592 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1.0) ?
            (-1.0, -1.0, -1.0, -1.0)
        : ((prev[l] >= 1.0) ?
            (1.0, 1.0, 1.0, 1.0)
        : ((prev[l] >= -1.0) & (prev[u] <= 1.0) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < -1.0) & (prev[u] <= 1.0) ?
            (0.0, prev[u], 0.0, prev)
        : ((prev[l] >= -1.0) & (prev[u] > 1.0) ?
            (prev[l], 1.0, prev, 1.0)
        : (0.0, 1.0, 0.0, 1.0)
        )))));
}

2025-06-12 02:46:37,592 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:46:37,593 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:46:52,455 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        (prev[u] <= -1) ? (-1, -1, -1, -1) :
        (prev[l] >= 1) ? (1, 1, 1, 1) :
        (prev[l] >= -1 && prev[u] <= 1) ?
            (prev[l], prev[u], prev, prev) :
        (prev[l] < -1 && prev[u] <= 1) ?
            (-1, prev[u], -1, prev) :
        (prev[l] >= -1 && prev[u] > 1) ?
            (prev[l], 1, prev, 1) :
        (-1, 1, -1, 1);
}

2025-06-12 02:46:52,455 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:46:52,535 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh -> ((prev[u] <= -1) ? (-1, -1, -1, -1) :
        (prev[l] >= 1) ? (1, 1, 1, 1) :
        (prev[l] >= -1 && prev[u] <= 1) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < -1 && prev[u] > 1) ? (-1, 1, (prev*(2/(prev[u]-prev[l]))-(2*prev[l]/(prev[u]-prev[l]))), (prev*(2/(prev[u]-prev[l]))-(2*prev[l]/(prev[u]-prev[l])))) :
        (prev[l] < -1) ? (-1, prev[u], -1, prev) :
        (prev[u] > 1) ? (prev[l], 1, prev, 1) :
        (prev[l], prev[u], prev, prev));
}

2025-06-12 02:46:52,535 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:46:52,658 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ? (-1, -1, -1, -1) :
        ((prev[l]) >= 1) ? (1, 1, 1, 1) :
        ((prev[l]) >= -1 && (prev[u]) <= 1) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < -1 && (prev[u]) <= 1) ? (-1, prev[u], -1, prev) :
        ((prev[l]) >= -1 && (prev[u]) > 1) ? (prev[l], 1, prev, 1) :
        ((prev[l]) < -1 && (prev[u]) > 1) ? (-1, 1, -1, 1) :
        (prev[l], prev[u], prev, prev);
}

2025-06-12 02:46:52,658 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:46:52,658 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:47:07,717 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u] <= -1) ? (-1, -1, -1, -1) :
        ((prev[l] >= 1) ? (1, 1, 1, 1) :
        ((prev[l] >= -1) & (prev[u] <= 1)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < -1) & (prev[u] <= 1)) ? (-1, prev[u], -1, prev) :
        ((prev[l] >= -1) & (prev[u] > 1)) ? (prev[l], 1, prev, 1) :
        (-1, 1, -1, 1)));
}

2025-06-12 02:47:07,717 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:47:07,802 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?
            (-1, -1, -1, -1)
        : ((prev[l]) >= 1) ?
            (1, 1, 1, 1)
        : ((prev[l]) >= -1 && (prev[u]) <= 1) ?
            ((prev[l]), (prev[u]), (prev), (prev))
        : ((prev[l]) < -1 && (prev[u]) <= 1) ?
            (-1, (prev[u]), -1, (prev))
        : ((prev[l]) >= -1 && (prev[u]) > 1) ?
            ((prev[l]), 1, (prev), 1)
        : ((prev[l]) < -1 && (prev[u]) > 1) ?
            (-1, 1, -1, 1)
        :
            (curr[l], curr[u], curr[L], curr[U]);
}

2025-06-12 02:47:07,802 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:47:07,880 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?  (-1, -1, -1, -1)
      : ((prev[l]) >= 1)  ?  (1, 1, 1, 1)
      : ((prev[l]) >= -1 && (prev[u]) <= 1) ? (prev[l], prev[u], prev, prev)
      : ((prev[l]) < -1 && (prev[u]) <= 1)  ? (0, prev[u], 0, prev*(prev[u]+1)/(prev[u]-prev[l]) - ((prev[u]+1)*prev[l])/(prev[u]-prev[l]))
      : ((prev[l]) >= -1 && (prev[u]) > 1)  ? (prev[l], 1, prev, prev*(1-prev[l])/(prev[u]-prev[l]) + (prev[u]-1)*prev[l]/(prev[u]-prev[l]))
      : (-1, 1, 0, prev*(1+1)/(prev[u]-prev[l]) - (1*prev[l] + 1*prev[u])/(prev[u]-prev[l]));
}

2025-06-12 02:47:07,881 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:47:07,881 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:47:07,881 - INFO - [HardTanh] Runtime: 225.19 seconds
2025-06-12 02:47:07,881 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    HardTanh ->
        ((prev[u]) <= -1) ?  (-1, -1, -1, -1)
      : ((prev[l]) >= 1)  ?  (1, 1, 1, 1)
      : ((prev[l]) >= -1 && (prev[u]) <= 1) ? (prev[l], prev[u], prev, prev)
      : ((prev[l]) < -1 && (prev[u]) <= 1)  ? (0, prev[u], 0, prev*(prev[u]+1)/(prev[u]-prev[l]) - ((prev[u]+1)*prev[l])/(prev[u]-prev[l]))
      : ((prev[l]) >= -1 && (prev[u]) > 1)  ? (prev[l], 1, prev, prev*(1-prev[l])/(prev[u]-prev[l]) + (prev[u]-1)*prev[l]/(prev[u]-prev[l]))
      : (-1, 1, 0, prev*(1+1)/(prev[u]-prev[l]) - (1*prev[l] + 1*prev[u])/(prev[u]-prev[l]));
}

2025-06-12 02:47:07,881 - INFO - 2025-06-12 02:47:07.881616 - Extracting Max
2025-06-12 02:47:07,881 - INFO -
API: Max -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:47:07,881 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:47:22,757 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (prev_0[l] >= prev_1[u]) ?
        (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             (prev_0[L] + prev_1[L])/2, (prev_0[U] + prev_1[U])/2);
}

2025-06-12 02:47:22,757 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:47:22,827 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ?
        (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (
        f(prev_1, prev_0)) ?
        (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] * (prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) + (prev_1[L] * (prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))),
            (prev_0[U] * (prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) + (prev_1[U] * (prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
        )
    ;
}

2025-06-12 02:47:22,828 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:47:22,902 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> ( (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : ( (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        ((prev_0[L] * (prev_0[u] - prev_1[l]) + prev_1[L] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))),
        ((prev_0[U] * (prev_0[u] - prev_1[l]) + prev_1[U] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
    )) );
}

2025-06-12 02:47:22,902 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:47:22,902 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:47:52,454 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), 0.5*(prev_0[L]+prev_1[L]+abs(prev_0[L]-prev_1[L])), 0.5*(prev_0[U]+prev_1[U]+abs(prev_0[U]-prev_1[U]))));
}

2025-06-12 02:47:52,454 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:47:52,524 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                0.5 * (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])),
                (prev_0[u] >= prev_1[u])
                    ? prev_0[U]
                    : prev_1[U]
            );
}

2025-06-12 02:47:52,524 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:47:52,589 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), 0, 0))
}

2025-06-12 02:47:52,589 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:47:52,589 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:48:12,288 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
           (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
           (max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L]))/2,
            (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))/2)));
}

2025-06-12 02:48:12,288 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:48:12,363 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
         : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
         : (max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            ((prev_0[L] * (prev_0[u] - prev_1[l]) + prev_1[L] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))),
            ((prev_0[U] * (prev_0[u] - prev_1[l]) + prev_1[U] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
           )
         )
    );
}

2025-06-12 02:48:12,363 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:48:12,432 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                ((prev_0[u] - prev_1[l]) >= (prev_1[u] - prev_0[l])) ?
                    (prev_0[L]) : (prev_1[L]),
                ((prev_0[u] - prev_1[l]) >= (prev_1[u] - prev_0[l])) ?
                    (
                        prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
                        + prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
                    )
                    :
                    (
                        prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
                        + prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
                    )
            );
}

2025-06-12 02:48:12,432 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:48:12,432 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:48:29,793 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (f(prev_1, prev_0)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) +
             prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
            (prev_0[U] + prev_1[U])
        );
}

2025-06-12 02:48:29,793 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:48:29,863 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u])
            ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (prev_1[l] >= prev_0[u])
            ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (max(prev_0[l], prev_1[l]),
           max(prev_0[u], prev_1[u]),
           (prev_0[L] * (prev_0[l] >= prev_1[l]) + prev_1[L] * (prev_1[l] > prev_0[l])),
           (prev_0[U] * (prev_0[u] >= prev_1[u]) + prev_1[U] * (prev_1[u] > prev_0[u])));
}

2025-06-12 02:48:29,863 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:48:29,936 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (
        (prev_0[l] >= prev_1[u]) ? prev_0[l] :
        (prev_1[l] >= prev_0[u]) ? prev_1[l] :
        max(prev_0[l], prev_1[l]),

        (prev_0[u] >= prev_1[u]) ? prev_0[u] : prev_1[u],

        (prev_0[l] >= prev_1[u]) ? prev_0 :
        (prev_1[l] >= prev_0[u]) ? prev_1 :
        (prev_0 + prev_1) / 2,

        (prev_0[u] >= prev_1[u]) ? prev_0 :
        (prev_1[u] >= prev_0[u]) ? prev_1 :
        (prev_0 + prev_1) / 2
    );
}

2025-06-12 02:48:29,936 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:48:29,936 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:48:48,912 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            (f(prev_1, prev_0)) ?
                (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
                (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                    (prev_0[L] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])))
                        + (prev_1[L] * ((prev_1[u]-prev_0[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l]))),
                    (prev_0[U] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])))
                        + (prev_1[U] * ((prev_1[u]-prev_0[l])/(prev_0[u]-prev_0[l]+prev_1[u]-prev_1[l])))
                );
}

2025-06-12 02:48:48,913 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:48:49,096 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) + (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
                (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) + (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
            );
}

2025-06-12 02:48:49,096 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:48:49,238 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (
            f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            ((prev_0[L] * (prev_0[l] >= prev_1[l])) + (prev_1[L] * (prev_1[l] > prev_0[l]))),
            ((prev_0[U] * (prev_0[u] >= prev_1[u])) + (prev_1[U] * (prev_1[u] > prev_0[u]))))
    );
}

2025-06-12 02:48:49,238 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:48:49,238 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:49:04,640 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u])
            ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (prev_1[l] >= prev_0[u])
            ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            // Lower PolyExpr: convex hull underapprox between the two
            ( (prev_0[L] * (prev_0[l] >= prev_1[l])) + (prev_1[L] * (prev_1[l] > prev_0[l])) ),
            // Upper PolyExpr: overapprox between the two
            ( (prev_0[U] * (prev_0[u] >= prev_1[u])) + (prev_1[U] * (prev_1[u] > prev_0[u])) )
          );
}

2025-06-12 02:49:04,640 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:49:04,817 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? prev_0[l] : (f(prev_1, prev_0) ? prev_1[l] : max(prev_0[l], prev_1[l])),
            f(prev_0, prev_1) ? prev_0[u] : (f(prev_1, prev_0) ? prev_1[u] : max(prev_0[u], prev_1[u])),
            f(prev_0, prev_1) ? prev_0[L] : (f(prev_1, prev_0) ? prev_1[L] : 0.5 * (prev_0[L] + prev_1[L])),
            f(prev_0, prev_1) ? prev_0[U] : (f(prev_1, prev_0) ? prev_1[U] : 0.5 * (prev_0[U] + prev_1[U]))
          );
}

2025-06-12 02:49:04,818 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:49:04,944 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                0.5 * (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])),
                0.5 * (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U]))
            );
}

2025-06-12 02:49:04,944 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:49:04,944 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:49:19,843 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (max(prev_0[l], prev_1[l]),
             max(prev_0[u], prev_1[u]),
             ((prev_0[L] * (prev_0[u] - prev_1[l]) + prev_1[L] * (prev_1[u] - prev_0[l]))
                / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l])),
             ((prev_0[U] * (prev_0[u] - prev_1[l]) + prev_1[U] * (prev_1[u] - prev_0[l]))
                / (prev_0[u] - prev_0[l] + prev_1[u] - prev_1[l]))
            ))
    );
}

2025-06-12 02:49:19,843 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:49:20,173 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Max -> ( (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            ((f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
                (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                 (prev_0[L] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_1[l]+1e-10))) + (prev_1[L] * ((prev_1[u]-prev_0[l])/(prev_1[u]-prev_0[l]+1e-10))),
                 (prev_0[U] * ((prev_0[u]-prev_1[l])/(prev_0[u]-prev_1[l]+1e-10))) + (prev_1[U] * ((prev_1[u]-prev_0[l])/(prev_1[u]-prev_0[l]+1e-10)))
                )
           )
    );
}

2025-06-12 02:49:20,173 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:49:20,292 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] * (prev_0[u] - prev_1[l])) / ((prev_0[u] - prev_1[l])) + (prev_1[L] * (prev_1[u] - prev_0[l])) / ((prev_1[u] - prev_0[l])),
                (prev_0[U] * (prev_0[u] - prev_1[l])) / ((prev_0[u] - prev_1[l])) + (prev_1[U] * (prev_1[u] - prev_0[l])) / ((prev_1[u] - prev_0[l]))
            );
}

2025-06-12 02:49:20,292 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:49:20,293 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:49:32,707 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
              max(prev_0[l], prev_1[l]),
              max(prev_0[u], prev_1[u]),
              (prev_0[L] + prev_1[L]) / 2,
              (prev_0[U] + prev_1[U]) / 2
            );
}

2025-06-12 02:49:32,709 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:49:32,887 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            // Lower
            (prev_0[l] >= prev_1[l])
                ? prev_0[L]
                : prev_1[L],
            // Upper
            (prev_0[u] >= prev_1[u])
                ? prev_0[U]
                : prev_1[U]
        );
}

2025-06-12 02:49:32,887 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:49:33,048 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> ( (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
           : (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
           : (max(prev_0[l], prev_1[l]),
              max(prev_0[u], prev_1[u]),
              (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])) / 2,
              (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])) / 2)
    );
}

2025-06-12 02:49:33,048 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:49:33,048 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:49:46,971 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (f(prev_1, prev_0)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]),
             max(prev_0[u], prev_1[u]),
             ((prev_0[L]) * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l])))) + ((prev_1[L]) * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l])))),
             max(prev_0[U], prev_1[U])
            );
}

2025-06-12 02:49:46,972 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:49:47,095 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                (max(prev_0[l], prev_1[l])),
                (max(prev_0[u], prev_1[u])),
                ((prev_0[L] * (prev_0[u] - prev_1[l]) + prev_1[L] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))),
                ((prev_0[U] * (prev_0[u] - prev_1[l]) + prev_1[U] * (prev_1[u] - prev_0[l])) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))
            );
}

2025-06-12 02:49:47,095 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:49:47,258 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max ->
        (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] + prev_1[L] + abs(prev_0[L] - prev_1[L])) / 2,
            (prev_0[U] + prev_1[U] + abs(prev_0[U] - prev_1[U])) / 2
        );
}

2025-06-12 02:49:47,258 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:49:47,258 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:49:59,283 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
           : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
           : (max(prev_0[l], prev_1[l]),
              max(prev_0[u], prev_1[u]),
              (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) +
               prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
              (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) +
               prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
           ))
    );
}

2025-06-12 02:49:59,283 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:49:59,418 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]));
}

2025-06-12 02:49:59,419 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:49:59,544 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
             (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
             (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
             (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
            )
          )
}

2025-06-12 02:49:59,545 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:49:59,545 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:49:59,545 - INFO - [Max] Runtime: 171.66 seconds
2025-06-12 02:49:59,546 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Max -> (f(prev_0, prev_1) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
          : (f(prev_1, prev_0) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
          : (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
             (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
             (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
             (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
            )
          )
}

2025-06-12 02:49:59,546 - INFO - 2025-06-12 02:49:59.546814 - Extracting Maxpool
2025-06-12 02:49:59,547 - INFO -
API: Maxpool -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:49:59,547 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:50:10,056 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
      ( (max(prev_0[l], prev_1[l], ..., prev_n[l])),
        (max(prev_0[u], prev_1[u], ..., prev_n[u])),
        (max(prev_0[L], prev_1[L], ..., prev_n[L])),
        (max(prev_0[U], prev_1[U], ..., prev_n[U])) );
}

2025-06-12 02:50:10,056 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:50:10,133 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool -> (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]), ((prev_0[u] <= prev_1[l]) ? prev_1 : ((prev_1[u] <= prev_0[l]) ? prev_0 : 0.5 * prev_0 + 0.5 * prev_1)), ((prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : 0.5 * prev_0 + 0.5 * prev_1)));
}

2025-06-12 02:50:10,133 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:50:10,246 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly {
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : (prev_0 + prev_1)/2),
        (prev_0[u] >= prev_1[l]) ? prev_0 : ((prev_1[u] >= prev_0[l]) ? prev_1 : (prev_0 + prev_1)/2)
    );
}

2025-06-12 02:50:10,246 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:50:10,246 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:50:23,795 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[l] >= prev_1[u]) ? prev_0 : ((prev_1[l] >= prev_0[u]) ? prev_1 : 0.5 * prev_0 + 0.5 * prev_1),
        (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 02:50:23,795 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:50:24,050 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
             ((prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
              (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))),
             ((prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))) +
              (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))))
            );
}

2025-06-12 02:50:24,051 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:50:24,120 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        (f(prev_0, prev_1) ? prev_0[l] : (f(prev_1, prev_0) ? prev_1[l] : max(prev_0[l], prev_1[l])),
         f(prev_0, prev_1) ? prev_0[u] : (f(prev_1, prev_0) ? prev_1[u] : max(prev_0[u], prev_1[u])),
         f(prev_0, prev_1) ? prev_0[L] : (f(prev_1, prev_0) ? prev_1[L] : 0.5*prev_0[L] + 0.5*prev_1[L]),
         f(prev_0, prev_1) ? prev_0[U] : (f(prev_1, prev_0) ? prev_1[U] : 0.5*prev_0[U] + 0.5*prev_1[U])
        );
}

2025-06-12 02:50:24,120 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:50:24,120 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:50:35,213 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
      ( (max(prev_0[l], prev_1[l])),
        (max(prev_0[u], prev_1[u])),
        ( (prev_0[l] >= prev_1[u]) ? prev_0 : ( (prev_1[l] >= prev_0[u]) ? prev_1 : max(prev_0, prev_1) ) ),
        ( (prev_0[u] >= prev_1[l]) ? prev_0 : ( (prev_1[u] >= prev_0[l]) ? prev_1 : max(prev_0, prev_1) ) )
      );
}

2025-06-12 02:50:35,213 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:50:35,317 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 63, in visit
    return self.visitFuncCall(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 596, in visitFuncCall
    exprstype = self.visit(node.arglist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (f(prev_0, prev_1)) ? (
            prev_0[l],
            prev_0[u],
            prev_0[L],
            prev_0[U]
        ) : (
            (f(prev_1, prev_0)) ? (
                prev_1[l],
                prev_1[u],
                prev_1[L],
                prev_1[U]
            ) : (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] + prev_1[L]) / 2,
                (prev_0[U] + prev_1[U]) / 2
            )
        );
}

2025-06-12 02:50:35,317 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:50:35,399 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
                (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:50:35,401 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:50:35,401 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:50:52,052 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly {
    Maxpool ->
        ((prev_0[l] >= prev_1[u])
            ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
            : ((prev_1[l] >= prev_0[u])
                ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
                : (max(prev_0[l], prev_1[l]),
                   max(prev_0[u], prev_1[u]),
                   (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) +
                    prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l])))),
                   (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))) +
                    prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_1[l]) + (prev_1[u] - prev_0[l]))))
                )
            )
        );
}

2025-06-12 02:50:52,052 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:50:52,180 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
            (
                max(prev_0[l], prev_1[l]),
                max(prev_0[u], prev_1[u]),
                (prev_0[L] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l])))) + (prev_1[L] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l])))),
                (prev_0[U] * ((prev_0[u] - prev_1[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l])))) + (prev_1[U] * ((prev_1[u] - prev_0[l]) / ((prev_0[u] - prev_0[l]) + (prev_1[u] - prev_1[l]))))
            )
;

2025-06-12 02:50:52,180 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:50:52,257 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool ->
        (f(prev_0, prev_1)) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (f(prev_1, prev_0)) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            PolyExp.max(prev_0[L], prev_1[L]),
            PolyExp.max(prev_0[U], prev_1[U])
        );
}

2025-06-12 02:50:52,258 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:50:52,258 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:51:02,006 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (f(prev_1, prev_0)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] * ((prev_0[l] >= prev_1[l]) ? 1 : 0)) + (prev_1[L] * ((prev_1[l] > prev_0[l]) ? 1 : 0)),
            (prev_0[U] * ((prev_0[u] >= prev_1[u]) ? 1 : 0)) + (prev_1[U] * ((prev_1[u] > prev_0[u]) ? 1 : 0))
        );
}

2025-06-12 02:51:02,006 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:02,084 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
            (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:51:02,084 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:02,153 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (max(prev_0[l], prev_1[l]),
         max(prev_0[u], prev_1[u]),
         (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
         (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:51:02,154 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:02,154 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:51:10,859 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                (prev_0[l] >= prev_1[u]) ? prev_0 : (
                  (prev_1[l] >= prev_0[u]) ? prev_1 :
                  max(prev_0, prev_1)
                ),
                (prev_0[u] >= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 02:51:10,860 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:10,931 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        ( (max(prev_0[l], prev_1[l])),
          (max(prev_0[u], prev_1[u])),
          (select(prev_0[l] >= prev_1[l], prev_0[L], prev_1[L])),
          (select(prev_0[u] >= prev_1[u], prev_0[U], prev_1[U]))
        );
}

2025-06-12 02:51:10,932 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:10,998 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool ->
        (max(prev_0[l], prev_1[l], ..., prev_n[l]),
         max(prev_0[u], prev_1[u], ..., prev_n[u]),
         (argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 0) ? prev_0 : ((argmax(prev_0[l], prev_1[l], ..., prev_n[l]) == 1) ? prev_1 : ...),
         (argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 0) ? prev_0 : ((argmax(prev_0[u], prev_1[u], ..., prev_n[u]) == 1) ? prev_1 : ...)
        );
}

2025-06-12 02:51:10,998 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:10,998 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:51:21,325 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool k ->
        (
            max(prev_0[l], prev_1[l], ..., prev_{k-1}[l]),
            max(prev_0[u], prev_1[u], ..., prev_{k-1}[u]),
            max(prev_0, prev_1, ..., prev_{k-1}),
            max(prev_0, prev_1, ..., prev_{k-1})
        );
}

2025-06-12 02:51:21,325 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:21,416 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool ->
        (argmax_i(prev_i[l]),
         argmax_i(prev_i[u]),
         prev_argmax_L,
         prev_argmax_U)
}

2025-06-12 02:51:21,416 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:21,496 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
        : (f(prev_1, prev_0)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
        : (
            max(prev_0[l], prev_1[l]),
            max(prev_0[u], prev_1[u]),
            (prev_0[L] * ((prev_0[l] >= prev_1[l]) ? 1 : 0) + prev_1[L] * ((prev_1[l] > prev_0[l]) ? 1 : 0)),
            (prev_0[U] * ((prev_0[u] >= prev_1[u]) ? 1 : 0) + prev_1[U] * ((prev_1[u] > prev_0[u]) ? 1 : 0))
        );
}

2025-06-12 02:51:21,496 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:21,496 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:51:31,463 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l], ...),
        max(prev_0[u], prev_1[u], ...),
        (prev_0[u] >= prev_1[u] & prev_0[u] >= prev_2[u] & ...) ? prev_0 : ((prev_1[u] >= prev_0[u] & prev_1[u] >= prev_2[u] & ...) ? prev_1 : ...),
        (prev_0[l] >= prev_1[l] & prev_0[l] >= prev_2[l] & ...) ? prev_0 : ((prev_1[l] >= prev_0[l] & prev_1[l] >= prev_2[l] & ...) ? prev_1 : ...)
    );
}

2025-06-12 02:51:31,463 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:31,530 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (max(prev_0[l], prev_1[l], ..., prev_n[l]), max(prev_0[u], prev_1[u], ..., prev_n[u]),
               max(prev_0[L], prev_1[L], ..., prev_n[L]),
               max(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:51:31,531 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:31,599 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        (f(prev_0, prev_1)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            (f(prev_1, prev_0)) ?
                (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
                (max(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
                 (prev_0[L] + prev_1[L]) * 0.5,
                 (prev_0[U] + prev_1[U]) * 0.5);
}

2025-06-12 02:51:31,599 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:31,599 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:51:40,907 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[L] * (prev_0[u] >= prev_1[u]) + prev_1[L] * (prev_1[u] > prev_0[u])),
        (prev_0[U] * (prev_0[l] >= prev_1[l]) + prev_1[U] * (prev_1[l] > prev_0[l]))
    );
}

2025-06-12 02:51:40,910 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:40,978 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:51:40,978 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:41,074 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 642, in visitTransRetIf
    ctype = self.visit(node.cond)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 15, in visit
    return self.visitBinOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 206, in visitBinOp
    ltype = self.visit(node.left)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool ->
        (prev_0[l] >= prev_1[u]) ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] >= prev_0[u]) ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            (max(prev_0[l], prev_1[l])),
            (max(prev_0[u], prev_1[u])),
            (backsubs_lower(max(prev_0[L], prev_1[L]), curr)),
            (backsubs_upper(max(prev_0[U], prev_1[U]), curr))
        );
}

2025-06-12 02:51:41,074 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:41,074 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:51:51,304 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Maxpool -> (
        max(prev_0[l], prev_1[l]),
        max(prev_0[u], prev_1[u]),
        (prev_0[L] >= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:51:51,304 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:51,506 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MaxPool ->
        (prev_0[l] >= prev_1[l]) ?
            ((prev_0[l]), (max(prev_0[u], prev_1[u])), (prev_0), (prev_0)) :
            ((prev_1[l]), (max(prev_0[u], prev_1[u])), (prev_1), (prev_1));
}

2025-06-12 02:51:51,506 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:51,701 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Maxpool -> (max(prev_0[l], prev_1[l], ..., prev_n[l]), max(prev_0[u], prev_1[u], ..., prev_n[u]), max(prev_0[L], prev_1[L], ..., prev_n[L]), max(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:51:51,701 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:51,701 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:51:51,701 - INFO - [Maxpool] Runtime: 112.16 seconds
2025-06-12 02:51:51,702 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Maxpool -> (max(prev_0[l], prev_1[l], ..., prev_n[l]), max(prev_0[u], prev_1[u], ..., prev_n[u]), max(prev_0[L], prev_1[L], ..., prev_n[L]), max(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:51:51,702 - INFO - 2025-06-12 02:51:51.702812 - Extracting Min
2025-06-12 02:51:51,703 - INFO -
API: Min -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:51:51,703 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:51:58,605 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[u] <= prev_1[l]) ? prev_0 : ((prev_1[u] <= prev_0[l]) ? prev_1 : 0.5 * (prev_0 + prev_1)),
        (prev_0[u] <= prev_1[l]) ? prev_0 : ((prev_1[u] <= prev_0[l]) ? prev_1 : 0.5 * (prev_0 + prev_1))
    );
}

2025-06-12 02:51:58,606 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:51:58,719 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]),
            min(prev_0[u], prev_1[u]),
            (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
            (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:51:58,719 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:51:58,832 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:51:58,832 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:51:58,832 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:52:06,705 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),                                                        // l: elementwise min on lower
        min(prev_0[u], prev_1[u]),                                                        // u: elementwise min on upper
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],                                 // L: PolyExp lower
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]                                  // U: PolyExp upper
    );
}

2025-06-12 02:52:06,705 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:06,768 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            // Lower poly
            (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
            // Upper poly
            (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:06,769 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:06,837 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:06,837 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:06,837 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:52:15,515 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        min(prev_0[L], prev_1[L]),
        min(prev_0[U], prev_1[U])
    );
}

2025-06-12 02:52:15,515 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:15,581 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
            (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:52:15,582 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:15,647 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:52:15,647 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:15,647 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:52:22,552 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> ((prev_0[l] <= prev_1[l]) ?
        (
            prev_0[l],
            min(prev_0[u], prev_1[u]),
            prev_0[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
        )
        :
        (
            prev_1[l],
            min(prev_0[u], prev_1[u]),
            prev_1[L],
            (prev_1[U] <= prev_0[U]) ? prev_1[U] : prev_0[U]
        )
    );
}

2025-06-12 02:52:22,552 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:22,621 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:22,621 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:22,693 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:22,693 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:22,693 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:52:30,429 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:30,429 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:30,499 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:52:30,499 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:30,565 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:30,565 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:30,565 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:52:44,971 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (f(prev_0, prev_1))      ? (prev_1[l], prev_1[u], prev_1[L], prev_1[U])
      : (f(prev_1, prev_0))      ? (prev_0[l], prev_0[u], prev_0[L], prev_0[U])
      : (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
         (prev_0[L] + prev_1[L] - abs(prev_0[L] - prev_1[L]))/2,
         (prev_0[U] + prev_1[U] - abs(prev_0[U] - prev_1[U]))/2);
}

2025-06-12 02:52:44,972 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:45,038 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_1[U] : prev_0[U]);
}

2025-06-12 02:52:45,038 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:45,104 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (f(prev_0, prev_1)) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (f(prev_1, prev_0)) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
            (
                min(prev_0[l], prev_1[l]),
                min(prev_0[u], prev_1[u]),
                0.5 * (prev_0[L] + prev_1[L] - abs(prev_0[L] - prev_1[L])),
                0.5 * (prev_0[U] + prev_1[U] - abs(prev_0[U] - prev_1[U]))
            );
}

2025-06-12 02:52:45,104 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:45,104 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:52:53,240 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:53,240 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:52:53,351 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        ( (min(prev_0[l], prev_1[l])),
          (min(prev_0[u], prev_1[u])),
          (min(prev_0[L], prev_1[L])),
          (min(prev_0[U], prev_1[U]))
        );
}

2025-06-12 02:52:53,352 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:52:53,468 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:52:53,478 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:52:53,478 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:53:05,359 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:53:05,360 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:05,481 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        ((prev_0[l] >= prev_1[u]) ? prev_1[L] : ((prev_1[l] >= prev_0[u]) ? prev_0[L] : min(prev_0[L], prev_1[L]))),
        ((prev_0[u] <= prev_1[l]) ? prev_0[U] : ((prev_1[u] <= prev_0[l]) ? prev_1[U] : min(prev_0[U], prev_1[U])))
    );
}

2025-06-12 02:53:05,481 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:05,596 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[l]) ? prev_0 : prev_1,
        (prev_0[u] <= prev_1[u]) ? prev_0 : prev_1
    );
}

2025-06-12 02:53:05,596 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:05,597 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:53:12,940 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        ( (min(prev_0[l], prev_1[l])),
          (min(prev_0[u], prev_1[u])),
          (prev_0[L] <= prev_1[L] ? prev_0[L] : prev_1[L]),
          (prev_0[U] <= prev_1[U] ? prev_0[U] : prev_1[U]) );
}

2025-06-12 02:53:12,940 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:13,056 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:13,056 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:13,178 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (
        (prev_0[l] <= prev_1[l]) ? prev_0[l] : prev_1[l],
        (prev_0[u] <= prev_1[u]) ? prev_0[u] : prev_1[u],
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:53:13,179 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:13,179 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:53:27,927 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:27,927 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:28,067 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (prev_0[l] <= prev_1[l]) ?
            (prev_0[l], prev_0[u], prev_0[L], prev_0[U]) :
        (prev_1[l] <= prev_0[l]) && (prev_1[u] <= prev_0[u]) ?
            (prev_1[l], prev_1[u], prev_1[L], prev_1[U]) :
        (
            min(prev_0[l], prev_1[l]),
            min(prev_0[u], prev_1[u]),
            (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
            (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
        );
}

2025-06-12 02:53:28,067 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:28,216 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Min ->
        (f(prev_0, prev_1)) ?      // prev_0[l] >= prev_1[u], so prev_0 >= prev_1 always
            (prev_1[l], prev_0[u], prev_1[L], prev_0[U])
        : (f(prev_1, prev_0)) ?    // prev_1[l] >= prev_0[u], so prev_1 >= prev_0 always
            (prev_0[l], prev_1[u], prev_0[L], prev_1[U])
        : // Overlapping case
            (
                min(prev_0[l], prev_1[l]),
                min(prev_0[u], prev_1[u]),
                min(prev_0[L], prev_1[L]),
                min(prev_0[U], prev_1[U])
            );
}

2025-06-12 02:53:28,217 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:28,217 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:53:28,217 - INFO - [Min] Runtime: 96.51 seconds
2025-06-12 02:53:28,217 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Min ->
        (f(prev_0, prev_1)) ?      // prev_0[l] >= prev_1[u], so prev_0 >= prev_1 always
            (prev_1[l], prev_0[u], prev_1[L], prev_0[U])
        : (f(prev_1, prev_0)) ?    // prev_1[l] >= prev_0[u], so prev_1 >= prev_0 always
            (prev_0[l], prev_1[u], prev_0[L], prev_1[U])
        : // Overlapping case
            (
                min(prev_0[l], prev_1[l]),
                min(prev_0[u], prev_1[u]),
                min(prev_0[L], prev_1[L]),
                min(prev_0[U], prev_1[U])
            );
}

2025-06-12 02:53:28,217 - INFO - 2025-06-12 02:53:28.217399 - Extracting Minpool
2025-06-12 02:53:28,217 - INFO -
API: Minpool -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:53:28,217 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:53:36,607 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:53:36,607 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:36,729 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
                // Lower PolyExp
                (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
                // Upper PolyExp
                (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:36,730 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:36,843 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:53:36,844 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:36,844 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:53:44,642 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:44,642 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:44,830 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]),
                (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
                (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:44,830 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:44,945 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> ((min(prev_0[l], prev_1[l])), (min(prev_0[u], prev_1[u])),
                (if prev_0[l] <= prev_1[l] then prev_0[L] else prev_1[L]),
                (if prev_0[u] <= prev_1[u] then prev_0[U] else prev_1[U]));
}

2025-06-12 02:53:44,945 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:44,945 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:53:51,634 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l], ..., prev_n[l]), min(prev_0[u], prev_1[u], ..., prev_n[u]),
                min(prev_0[L], prev_1[L], ..., prev_n[L]),
                min(prev_0[U], prev_1[U], ..., prev_n[U]))
}

2025-06-12 02:53:51,635 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:51,794 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]), max(prev_0[u], prev_1[u]),
         (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
         (prev_0[U] >= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:53:51,794 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:51,936 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), min(prev_0, prev_1), min(prev_0, prev_1));
}

2025-06-12 02:53:51,952 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:51,952 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:53:59,214 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:53:59,215 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:53:59,373 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:53:59,373 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:53:59,512 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:53:59,512 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:53:59,512 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:54:06,480 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[l] <= prev_1[l]) ? prev_0 : prev_1, (prev_0[u] <= prev_1[u]) ? prev_0 : prev_1);
}

2025-06-12 02:54:06,480 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:06,662 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l], ..., prev_n[l]), min(prev_0[u], prev_1[u], ..., prev_n[u]), min(prev_0[L], prev_1[L], ..., prev_n[L]), min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:54:06,662 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:06,844 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:06,844 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:06,844 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:54:15,591 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l]),
         min(prev_0[u], prev_1[u]),
         (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
         (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:54:15,591 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:15,708 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:54:15,708 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:15,837 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),   // Float l
        min(prev_0[u], prev_1[u]),   // Float u
        (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],    // PolyExp L
        (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]     // PolyExp U
    );
}

2025-06-12 02:54:15,837 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:15,838 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:54:24,145 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:24,146 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:24,221 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:54:24,221 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:24,295 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        (argmin(prev_0[l], prev_1[l], ..., prev_n[l])),
        (sum_{i=0}^{n} (theta_i * prev_i) where theta_i = 1 if prev_i[u] == min(prev_0[u], prev_1[u], ..., prev_n[u]) else 0)
    );
}

2025-06-12 02:54:24,295 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:24,295 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:54:32,484 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:32,484 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:32,611 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:32,611 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:32,680 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool ->
        let l = min(prev_0[l], prev_1[l], ..., prev_n[l]);
        let u = min(prev_0[u], prev_1[u], ..., prev_n[u]);
        let L = min(prev_0[L], prev_1[L], ..., prev_n[L]);
        let U = min(prev_0[U], prev_1[U], ..., prev_n[U]);
        (l, u, L, U);
}

2025-06-12 02:54:32,680 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:32,680 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:54:40,036 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[l] <= prev_1[l]) ? prev_0[L] : prev_1[L],
        (prev_0[u] <= prev_1[u]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:40,037 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:40,287 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 326, in visitMaxOp
    exp1type = self.visit(node.expr1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 47, in visit
    return self.visitGetElement(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 403, in visitGetElement
    etype = self.visit(node.expr)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 27, in visit
    return self.visitVar(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 338, in visitVar
    raise UndefinedVarException(node.name + " is undefined")
constraintflow.core.astTC.UndefinedVarException: prev_0 is undefined

Code:
transformer deeppoly{
    Minpool -> (
        min(prev_0[l], prev_1[l]),
        min(prev_0[u], prev_1[u]),
        (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L],
        (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]
    );
}

2025-06-12 02:54:40,287 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:40,358 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:54:40,358 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:40,358 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:54:46,880 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (
        min(prev_0[l], prev_1[l], ..., prev_n[l]),
        min(prev_0[u], prev_1[u], ..., prev_n[u]),
        min(prev_0[L], prev_1[L], ..., prev_n[L]),
        min(prev_0[U], prev_1[U], ..., prev_n[U])
    );
}

2025-06-12 02:54:46,880 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:54:46,942 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    MinPool -> (min(prev_0[l], prev_1[l]), min(prev_0[u], prev_1[u]), (prev_0[L] <= prev_1[L]) ? prev_0[L] : prev_1[L], (prev_0[U] <= prev_1[U]) ? prev_0[U] : prev_1[U]);
}

2025-06-12 02:54:46,942 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:54:47,008 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l], ..., prev_n[l]),
         min(prev_0[u], prev_1[u], ..., prev_n[u]),
         min(prev_0[L], prev_1[L], ..., prev_n[L]),
         min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:54:47,009 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:54:47,009 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:54:47,009 - INFO - [Minpool] Runtime: 78.79 seconds
2025-06-12 02:54:47,009 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Minpool ->
        (min(prev_0[l], prev_1[l], ..., prev_n[l]),
         min(prev_0[u], prev_1[u], ..., prev_n[u]),
         min(prev_0[L], prev_1[L], ..., prev_n[L]),
         min(prev_0[U], prev_1[U], ..., prev_n[U]));
}

2025-06-12 02:54:47,009 - INFO - 2025-06-12 02:54:47.009333 - Extracting Mult
2025-06-12 02:54:47,009 - INFO -
API: Mult -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:54:47,009 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:55:01,905 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
         simplify_upper(prev_0,1) * simplify_upper(prev_1,1),
         prev_0 * prev_1,
         prev_0 * prev_1);
}

2025-06-12 02:55:01,905 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:55:01,975 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        max(
            simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
            simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:01,975 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:55:02,054 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        max(
            (prev_0[l]) * (prev_1[l]),
            (prev_0[l]) * (prev_1[u]),
            (prev_0[u]) * (prev_1[l]),
            (prev_0[u]) * (prev_1[u])
        ),
        ((prev_0[u]) >= 0 && (prev_1[u]) >= 0) ?
            (prev_0 * prev_1) :
            (((prev_0[l]) >= 0 && (prev_1[u]) <= 0) ?
                ((prev_0 * prev_1)) :
                (0)),
        ((prev_0[l]) >= 0 && (prev_1[l]) >= 0) ?
            (prev_0 * prev_1) :
            (((prev_0[u]) <= 0 && (prev_1[u]) <= 0) ?
                (prev_0 * prev_1) :
                (0))
    );
}

2025-06-12 02:55:02,054 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:55:02,054 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:55:13,528 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u]))),
          (max(simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u]))),
          0,
          0
        );
}

2025-06-12 02:55:13,528 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:55:13,621 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:13,621 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:55:13,709 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:13,709 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:55:13,709 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:55:26,094 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:26,094 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:55:26,166 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1)).min(
              simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
              simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
              simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
          ),
          (simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1)).max(
              simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
              simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
              simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
          ),
          prev_0 * prev_1,
          prev_0 * prev_1
        );
}

2025-06-12 02:55:26,166 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:55:26,233 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:26,233 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:55:26,233 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:55:37,489 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (simplify_lower(prev_0, prev_1[l]) + simplify_lower(prev_0, prev_1[u]) + simplify_lower(prev_1, prev_0[l]) + simplify_lower(prev_1, prev_0[u])).min(),
          (simplify_upper(prev_0, prev_1[l]) + simplify_upper(prev_0, prev_1[u]) + simplify_upper(prev_1, prev_0[l]) + simplify_upper(prev_1, prev_0[u])).max(),
          prev_0 * prev_1,
          prev_0 * prev_1
        );
}

2025-06-12 02:55:37,489 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:55:37,568 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ((prev_0[l] >= 0) & (prev_1[l] >= 0)) ? (
            simplify_lower(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) :
        ((prev_0[u] <= 0) & (prev_1[u] <= 0)) ? (
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            prev_0 * prev_1,
            prev_0 * prev_1
        ) :
        (
            min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u])),
            max(simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u])),
            prev_0 * prev_1,
            prev_0 * prev_1
        );
}

2025-06-12 02:55:37,568 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:55:37,639 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            prev_0[l]*prev_1[l],
            prev_0[l]*prev_1[u],
            prev_0[u]*prev_1[l],
            prev_0[u]*prev_1[u]
        ),
        max(
            prev_0[l]*prev_1[l],
            prev_0[l]*prev_1[u],
            prev_0[u]*prev_1[l],
            prev_0[u]*prev_1[u]
        ),
        // best linear lower bound
        (prev_0[l] >= 0 && prev_1[l] >= 0) ? (prev_0 * prev_1) : 0,
        // best linear upper bound
        (prev_0[u] <= 0 && prev_1[u] <= 0) ? (prev_0 * prev_1) : (prev_0 * prev_1)
    );
}

2025-06-12 02:55:37,639 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:55:37,639 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:55:55,754 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:55:55,754 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:55:55,827 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (f(prev_0, prev_1)) ?
            ((simplify_lower(prev_0, prev_1[l])), (simplify_upper(prev_0, prev_1[u])), (prev_0 * prev_1[L]), (prev_0 * prev_1[U])) :
        (f(prev_1, prev_0)) ?
            ((simplify_lower(prev_1, prev_0[l])), (simplify_upper(prev_1, prev_0[u])), (prev_1 * prev_0[L]), (prev_1 * prev_0[U])) :
        (
            min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u])),
            max(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u])),
            0,
            prev_0[u]*prev_1[l] >= 0 ? (prev_0[U]*prev_1[U]) : // for poly, just use sound upper/lower overapprox
            (prev_0[U]*prev_1[L])
        );
}

2025-06-12 02:55:55,827 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:55:55,924 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        // Case: prev_0[l] >= 0 && prev_1[l] >= 0
        (prev_0[l] >= 0 && prev_1[l] >= 0) ? (
            simplify_lower(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            prev_0[L] * prev_1[L],
            prev_0[U] * prev_1[U]
        ) :
        // Case: prev_0[u] <= 0 && prev_1[u] <= 0
        (prev_0[u] <= 0 && prev_1[u] <= 0) ? (
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            prev_0[L] * prev_1[L],
            prev_0[U] * prev_1[U]
        ) :
        // General case
        (
            min(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_lower(prev_1, prev_0[l]),
                simplify_lower(prev_1, prev_0[u])
            ),
            max(
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u]),
                simplify_upper(prev_1, prev_0[l]),
                simplify_upper(prev_1, prev_0[u])
            ),
            min(
                prev_0[L] * prev_1[L],
                prev_0[L] * prev_1[U],
                prev_0[U] * prev_1[L],
                prev_0[U] * prev_1[U]
            ),
            max(
                prev_0[L] * prev_1[L],
                prev_0[L] * prev_1[U],
                prev_0[U] * prev_1[L],
                prev_0[U] * prev_1[U]
            )
        );
}

2025-06-12 02:55:55,924 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:55:55,924 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:56:07,326 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u])
        ),
        (prev_0 * prev_1),
        (prev_0 * prev_1)
    );
}

2025-06-12 02:56:07,326 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:56:07,458 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( // lower
            min(
                simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
                simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
                simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
                simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
            ),
            // upper
            max(
                simplify_lower(prev_0, 1) * simplify_lower(prev_1, 1),
                simplify_lower(prev_0, 1) * simplify_upper(prev_1, 1),
                simplify_upper(prev_0, 1) * simplify_lower(prev_1, 1),
                simplify_upper(prev_0, 1) * simplify_upper(prev_1, 1)
            ),
            // lower poly
            min(
                prev_0[L] * prev_1[L],
                prev_0[L] * prev_1[U],
                prev_0[U] * prev_1[L],
                prev_0[U] * prev_1[U]
            ),
            // upper poly
            max(
                prev_0[L] * prev_1[L],
                prev_0[L] * prev_1[U],
                prev_0[U] * prev_1[L],
                prev_0[U] * prev_1[U]
            )
        );
}

2025-06-12 02:56:07,458 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:56:07,599 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]), simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]), simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:07,599 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:56:07,600 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:56:20,090 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        0, // DeepPoly does not support precise symbolic lower for multiplication, use 0 as sound
        0  // DeepPoly does not support precise symbolic upper for multiplication, use 0 as sound
    );
}

2025-06-12 02:56:20,091 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:56:20,160 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:20,161 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:56:20,234 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:20,235 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:56:20,235 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:56:29,411 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:29,411 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:56:29,486 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            prev_0[l] * prev_1[l],
            prev_0[l] * prev_1[u],
            prev_0[u] * prev_1[l],
            prev_0[u] * prev_1[u]
        ),
        max(
            prev_0[l] * prev_1[l],
            prev_0[l] * prev_1[u],
            prev_0[u] * prev_1[l],
            prev_0[u] * prev_1[u]
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:29,486 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:56:29,552 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:29,553 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:56:29,553 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 02:56:43,752 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
      ( (max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
          )),
        (max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
          )),
        (prev_0 * prev_1),
        (prev_0 * prev_1)
      );
}

2025-06-12 02:56:43,753 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:56:43,822 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_lower(prev_1, prev_0[l]),
            simplify_lower(prev_1, prev_0[u])
        ),
        max(
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            simplify_upper(prev_1, prev_0[l]),
            simplify_upper(prev_1, prev_0[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:43,822 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:56:43,892 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        (f(prev_0, prev_1)) ? (
            simplify_lower(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u]),
            replace_lower(prev_0, prev_1[L]),
            replace_upper(prev_0, prev_1[U])
        ) : (
            min(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u])
            ),
            max(
                simplify_lower(prev_0, prev_1[l]),
                simplify_lower(prev_0, prev_1[u]),
                simplify_upper(prev_0, prev_1[l]),
                simplify_upper(prev_0, prev_1[u])
            ),
            min(
                replace_lower(prev_0, prev_1[L]),
                replace_lower(prev_0, prev_1[U]),
                replace_upper(prev_0, prev_1[L]),
                replace_upper(prev_0, prev_1[U])
            ),
            max(
                replace_lower(prev_0, prev_1[L]),
                replace_lower(prev_0, prev_1[U]),
                replace_upper(prev_0, prev_1[L]),
                replace_upper(prev_0, prev_1[U])
            )
        );
}

2025-06-12 02:56:43,892 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:56:43,892 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 02:56:58,439 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        max(
            simplify_lower(prev_0, prev_1[l]),
            simplify_lower(prev_0, prev_1[u]),
            simplify_upper(prev_0, prev_1[l]),
            simplify_upper(prev_0, prev_1[u])
        ),
        prev_0 * prev_1,
        prev_0 * prev_1
    );
}

2025-06-12 02:56:58,439 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:56:58,507 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult ->
        ( (min(simplify_lower(prev_0, prev_1[l]), simplify_lower(prev_0, prev_1[u]), simplify_lower(prev_0[u], prev_1), simplify_lower(prev_0[l], prev_1), simplify_lower(prev_0[u], prev_1[u]), simplify_lower(prev_0[l], prev_1[l]))),
          (max(simplify_upper(prev_0, prev_1[l]), simplify_upper(prev_0, prev_1[u]), simplify_upper(prev_0[u], prev_1), simplify_upper(prev_0[l], prev_1), simplify_upper(prev_0[u], prev_1[u]), simplify_upper(prev_0[l], prev_1[l]))),
          // PolyExp L
          (backsubs_lower(prev_0*prev_1, prev_0) + backsubs_lower(prev_0*prev_1, prev_1)),
          // PolyExp U
          (backsubs_upper(prev_0*prev_1, prev_0) + backsubs_upper(prev_0*prev_1, prev_1))
        );
}

2025-06-12 02:56:58,507 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:56:58,578 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        prev_0 * (simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2 + prev_1 * (simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2
            - ((simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2) * ((simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2),
        prev_0 * (simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2 + prev_1 * (simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2
            - ((simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2) * ((simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2)
    );
}

2025-06-12 02:56:58,578 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:56:58,578 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 02:56:58,578 - INFO - [Mult] Runtime: 131.57 seconds
2025-06-12 02:56:58,578 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Mult -> (
        min(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        max(
            simplify_lower(prev_0,1) * simplify_lower(prev_1,1),
            simplify_lower(prev_0,1) * simplify_upper(prev_1,1),
            simplify_upper(prev_0,1) * simplify_lower(prev_1,1),
            simplify_upper(prev_0,1) * simplify_upper(prev_1,1)
        ),
        prev_0 * (simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2 + prev_1 * (simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2
            - ((simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2) * ((simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2),
        prev_0 * (simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2 + prev_1 * (simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2
            - ((simplify_lower(prev_0,1) + simplify_upper(prev_0,1))/2) * ((simplify_lower(prev_1,1) + simplify_upper(prev_1,1))/2)
    );
}

2025-06-12 02:56:58,578 - INFO - 2025-06-12 02:56:58.578532 - Extracting Relu
2025-06-12 02:56:58,578 - INFO -
API: Relu -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:56:58,578 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:57:05,874 - INFO - [STEP 1] Sample 1: Validation passed.
2025-06-12 02:57:05,875 - INFO - [Relu] Runtime: 7.30 seconds
2025-06-12 02:57:05,875 - INFO - Succeed. Saved to logs/2025-06-12_02-32-28/results/GPT-4o/success/Relu.txt

2025-06-12 02:57:05,875 - INFO - 2025-06-12 02:57:05.875217 - Extracting Relu6
2025-06-12 02:57:05,875 - INFO -
API: Relu6 -> Model: GPT-4o @ http://ggnds-serv-01.cs.illinois.edu:8080
2025-06-12 02:57:05,875 - INFO - [STEP 1] Starting step 1/1
2025-06-12 02:57:26,078 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0)
        : ((prev[l]) >= 6) ? (6, 6, 6, 6)
        : ((prev[l]) >= 0) ?
            ((min(prev[u], 6)), (min(prev[u], 6)), min(prev, 6), min(prev, 6))
        : ((prev[u]) <= 6) ?
            (0, prev[u], 0, ((prev[u])/(prev[u]-prev[l]))*prev - ((prev[u])*prev[l])/(prev[u]-prev[l])))
        : (0, 6, 0, ((6/(6-prev[l]))*prev - ((6*prev[l])/(6-prev[l]))))
        ;
}

2025-06-12 02:57:26,079 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:57:26,318 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ? (6, 6, 6, 6) :
        ((prev[u] <= 0)) ? (0, 0, 0, 0) :
        ((prev[l] >= 0) && (prev[u] <= 6)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) && (prev[u] > 0) && (prev[u] <= 6)) ?
            (0, prev[u], 0, (prev[u]/(prev[u] - prev[l]))*prev - ((prev[u]*prev[l])/(prev[u] - prev[l]))) :
        ((prev[l] >= 0) && (prev[l] < 6) && (prev[u] > 6)) ?
            (prev[l], 6, prev, ((6 - prev[l])/(prev[u] - prev[l]))* (prev - prev[l]) + prev[l]) :
        (0, 6, 0, 6);
}

2025-06-12 02:57:26,318 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:57:26,479 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ?
            (6, 6, 6, 6)
        : ((prev[u]) <= 0) ?
            (0, 0, 0, 0)
        : (((prev[l]) >= 0) & ((prev[u]) <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l]) < 0 & (prev[u]) > 6) ?
            (0, 6, 0, ((prev[u]-6)/(prev[u]-prev[l]))*prev - (prev[u]*prev[l]-6*prev[l])/(prev[u]-prev[l]))
        : ((prev[l]) < 0) ?
            (0, prev[u], 0, ((prev[u])/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l])))
        : /* (prev[u] > 6) */
            (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l]))*prev + ((prev[u]-6)*prev[l])/(prev[u]-prev[l]));
}

2025-06-12 02:57:26,480 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:57:26,482 - INFO - [STEP 1] All 3 samples failed validation. Retrying 1/10...
2025-06-12 02:57:43,735 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly {
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0) :
        ((prev[l]) >= 6) ? (6, 6, 6, 6) :
        ((prev[l]) >= 0 && (prev[u]) <= 6) ? ((prev[l]), (prev[u]), (prev), (prev)) :
        ((prev[l]) < 0 && (prev[u]) <= 6) ? (0, (prev[u]), 0, ((prev[u]) / ((prev[u]) - (prev[l]))) * (prev) - ((prev[u]) * (prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l]) >= 0 && (prev[u]) > 6) ? ((prev[l]), 6, (prev), ((6 - prev[l]) / (prev[u] - prev[l])) * (prev) + ((prev[u] - 6) * prev[l]) / (prev[u] - prev[l]))) :
        (0, 6, 0,
            min(
                ((prev[u]) / ((prev[u]) - (prev[l]))) * (prev) - ((prev[u]) * (prev[l]) / (prev[u] - prev[l])),
                ((6 - prev[l]) / (prev[u] - prev[l])) * (prev) + ((prev[u] - 6) * prev[l]) / (prev[u] - prev[l])
            )
        );
}

2025-06-12 02:57:43,735 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:57:44,025 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 43, in visit
    return self.visitTernary(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 375, in visitTernary
    raise TypeMismatchException("Condition has to be boolean")
constraintflow.core.astTC.TypeMismatchException: Condition has to be boolean

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0)
            ? (0, 0, 0, 0)
        : (((prev[l]) >= 6)
            ? (6, 6, 6, 6)
        : (((prev[l]) >= 0)
            ? ((prev[l]), min((prev[u]), 6), prev, (prev <= 6 ? prev : 6))
        : (((prev[u]) <= 6)
            ? (0, (prev[u]), 0, prev)
        : (0, 6, 0, ((prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])) <= 6 ? (prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])) : 6)))));
}

2025-06-12 02:57:44,025 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:57:44,157 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 -> (
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] > 6) ?
            (0, 6, 0, (prev * 6 / (prev[u] - prev[l])) - (prev[l] * 6 / (prev[u] - prev[l]))) :
        (prev[l] < 0) ?
            (0, min(prev[u], 6), 0, (prev * min(prev[u], 6) / (prev[u] - prev[l])) - (prev[l] * min(prev[u], 6) / (prev[u] - prev[l]))) :
        (prev[u] > 6) ?
            (max(prev[l], 0), 6, max(prev[l], 0), prev + (6 - prev[u]) * (prev - max(prev[l], 0)) / (prev[u] - max(prev[l], 0))) :
        (0, 6, 0, 6)
    );
}

2025-06-12 02:57:44,157 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:57:44,158 - INFO - [STEP 1] All 3 samples failed validation. Retrying 2/10...
2025-06-12 02:58:02,171 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6)
        : ((prev[u] <= 0)) ?
            (0, 0, 0, 0)
        : ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l] / (prev[u] - prev[l])))
        : ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev, 6)
        :
            (0, 6, 0,
                (prev[u] * (6 - prev[l]) / (prev[u] - prev[l])) * prev +
                ((prev[u] * prev[l] - 6 * prev[l]) / (prev[u] - prev[l]))
            );
}

2025-06-12 02:58:02,171 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:58:02,317 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] > 0 && prev[u] <= 6) ? (0, prev[u], 0, prev * (prev[u] / (prev[u] - prev[l])) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev + ((6 - prev[u]) / (prev[u] - prev[l])) * (prev - prev[l]), 6) :
        (prev[l] < 0 && prev[u] > 6) ? (
            0, 6,
            0,
            ((prev[u] - 6) / (prev[u] - prev[l])) * prev + ((6 * (0 - prev[l])) / (prev[u] - prev[l]))
        ) :
        (0, 6, 0, 6);
}

2025-06-12 02:58:02,318 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:58:02,454 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
        ((prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0 && prev[u] <= 6) ?
            (0, prev[u], 0, prev * (prev[u] / (prev[u] - prev[l])) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0 && prev[u] > 6) ?
            (prev[l], 6, prev, prev * (6 - prev[l]) / (prev[u] - prev[l]) + (prev[u] * (prev[l] - 6)) / (prev[u] - prev[l])) :
        (0, 6, 0,
            ((prev * (6 - prev[l]) / (prev[u] - prev[l]) + (prev[u] * (prev[l] - 6)) / (prev[u] - prev[l]))) // upper bound between 0 and 6
         )
        )))
        );
}

2025-06-12 02:58:02,454 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:58:02,454 - INFO - [STEP 1] All 3 samples failed validation. Retrying 3/10...
2025-06-12 02:58:24,950 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ? (6, 6, 6, 6)
        : ((prev[u] <= 0)) ? (0, 0, 0, 0)
        : ((prev[l] >= 0) && (prev[u] <= 6)) ? (prev[l], prev[u], prev, prev)
        : ((prev[l] < 0) && (prev[u] > 6)) ? (0, 6, 0,
            (prev[u] / (prev[u] - prev[l])) * prev
             - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
        : ((prev[l] < 0) && (prev[u] <= 6)) ? (0, prev[u], 0,
            (prev[u] / (prev[u] - prev[l])) * prev
             - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
        : ((prev[l] >= 0) && (prev[u] > 6)) ? (prev[l], 6, prev,
            ((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + prev[l])
        : (0, 6, 0, 6);
}

2025-06-12 02:58:24,950 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:58:25,092 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ?
            (6, 6, 6, 6)
        : (((prev[u]) <= 0) ?
            (0, 0, 0, 0)
        : (((prev[l]) >= 0 && (prev[u]) <= 6) ?
            (prev[l], prev[u], prev, prev)
        : (((prev[l]) < 0 && (prev[u]) > 6) ?
            (0, 6, 0, ((6/(prev[u]-prev[l])) * (prev)) - ((6*prev[l])/(prev[u]-prev[l])))
        : (((prev[l]) < 0 && (prev[u]) <= 6) ?
            (0, prev[u], 0, ((prev[u]/(prev[u]-prev[l])) * (prev)) - ((prev[u]*prev[l])/(prev[u]-prev[l])))
        : (((prev[l]) >= 0 && (prev[u]) > 6) ?
            (prev[l], 6, prev, 6)
        : (0, 6, 0, 6))))));
}

2025-06-12 02:58:25,092 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:58:25,230 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ?
            (6, 6, 6, 6)
        : ((prev[u] <= 0) ?
            (0, 0, 0, 0)
        : ((prev[l] >= 0 && prev[u] <= 6) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] >= 0 && prev[u] > 6) ?
            (prev[l], 6, prev, (6 - prev[l])/(prev[u] - prev[l]) * prev + (prev[u] - 6)/(prev[u] - prev[l]) * 6)
        : ((prev[l] < 0 && prev[u] <= 6) ?
            (0, prev[u], 0, (prev[u]/(prev[u] - prev[l])) * prev - (prev[u] * prev[l])/(prev[u] - prev[l]))
        : (0, 6, 0, (6/(prev[u] - prev[l])) * prev - (6*prev[l])/(prev[u] - prev[l]))
        ))));
}

2025-06-12 02:58:25,230 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:58:25,231 - INFO - [STEP 1] All 3 samples failed validation. Retrying 4/10...
2025-06-12 02:58:52,604 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, ((prev[u]/(prev[u]-prev[l]))*prev) - ((prev[u]*prev[l])/(prev[u]-prev[l]))) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l]))*prev + ((prev[u]-6)/(prev[u]-prev[l]))*6) :
        (prev[l] < 0 && prev[u] > 6) ? (0, 6, 0, (prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l]) < ((6-prev[l])/(prev[u]-prev[l]))*prev + ((prev[u]-6)/(prev[u]-prev[l]))*6
            ? ((6-prev[l])/(prev[u]-prev[l]))*prev + ((prev[u]-6)/(prev[u]-prev[l]))*6
            : (prev[u]/(prev[u]-prev[l]))*prev - (prev[u]*prev[l])/(prev[u]-prev[l]))) :
        (prev[l], prev[u], prev, prev);
}

2025-06-12 02:58:52,605 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:58:52,722 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ? (6, 6, 6, 6) :
        ((prev[u] <= 0)) ? (0, 0, 0, 0) :
        ((prev[l] >= 0) & (prev[u] <= 6)) ? (prev[l], prev[u], prev, prev) :
        ((prev[l] < 0) & (prev[u] <= 6)) ? (0, prev[u], 0, (prev * prev[u] / (prev[u] - prev[l])) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
        ((prev[l] >= 0) & (prev[u] > 6)) ? (prev[l], 6, prev, prev + (6 - prev[u])) :
        (0, 6, 0, min((prev * (6 - prev[l]) / (prev[u] - prev[l])) + (prev[u] * (-prev[l]) / (prev[u] - prev[l])), 6));
}

2025-06-12 02:58:52,722 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:58:52,833 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6) ? (6, 6, 6, 6)
        : (prev[u] <= 0) ? (0, 0, 0, 0)
        : (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev)
        : (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u]/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l])))
        : (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev + ((6-prev[u])/(prev[u]-prev[l]))*(prev - prev[l]), 6)
        : (0, 6, 0, min(6, (prev[u]/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l]))))
    );
}

2025-06-12 02:58:52,833 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:58:52,833 - INFO - [STEP 1] All 3 samples failed validation. Retrying 5/10...
2025-06-12 02:59:10,052 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6)
        : ((prev[u] <= 0)) ?
            (0, 0, 0, 0)
        : ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < 0) & (prev[u] > 6)) ?
            (0, 6, 0, prev * (6 / (prev[u] - prev[l])) - (prev[l] * 6 / (prev[u] - prev[l])))
        : ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, prev * (prev[u] / (prev[u] - prev[l])) - (prev[l] * prev[u] / (prev[u] - prev[l])))
        : ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev, prev * ((6 - prev[l]) / (prev[u] - prev[l])) + (prev[u] * (prev[l] - 6) / (prev[u] - prev[l])))
        : (0, 6, 0, 6);
}

2025-06-12 02:59:10,052 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:59:10,128 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        ((prev[u] <= 0) ? (0, 0, 0, 0) :
            ((prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
                ((prev[l] < 0 && prev[u] <= 6) ?
                    (0, prev[u], 0, (prev[u]/(prev[u]-prev[l])) * prev - ((prev[u]*prev[l])/(prev[u]-prev[l]))) :
                ((prev[l] >= 0 && prev[u] > 6) ?
                    (prev[l], 6, prev, prev + ((6 - prev[u])/(prev[u] - prev[l])) * (prev - prev[l])) :
                    (0, 6, 0, (prev[u]/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l])) + ((6 - prev[u])/(prev[u]-prev[l]))*(prev - prev[l]))
                )
            )
        )
    );
}

2025-06-12 02:59:10,128 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:59:10,208 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6)
            ? (6, 6, 6, 6)
            : (((prev[u]) <= 0)
                ? (0, 0, 0, 0)
                : (
                    ((prev[l]) >= 0 && (prev[u]) <= 6)
                        ? (prev[l], prev[u], prev, prev)
                        : (
                            ((prev[l]) < 0 && (prev[u]) <= 6)
                                ? (0, prev[u], 0, ((prev[u]) / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
                                : (
                                    ((prev[l]) >= 0 && (prev[u]) > 6)
                                        ? (prev[l], 6, prev, (((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l])) + prev[l])
                                        : (
                                            (0, 6, 0, max(
                                                ((prev[u]) / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])),
                                                (((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l])) + prev[l]
                                            ))
                                        )
                                )
                        )
                )
            );
}

2025-06-12 02:59:10,208 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:59:10,208 - INFO - [STEP 1] All 3 samples failed validation. Retrying 6/10...
2025-06-12 02:59:27,857 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ?
            (6, 6, 6, 6)
        :
            ((prev[u] <= 0) ?
                (0, 0, 0, 0)
            :
                ((prev[l] >= 0 && prev[u] <= 6) ?
                    (prev[l], prev[u], prev, prev)
                :
                    ((prev[l] < 0 && prev[u] > 6) ?
                        (0, 6, 0, 6)
                    :
                        ((prev[l] < 0 && prev[u] <= 6) ?
                            (0, prev[u], 0, ((prev[u]/(prev[u]-prev[l]))*prev) - ((prev[u]*prev[l])/(prev[u]-prev[l])))
                        :
                            ((prev[l] >= 0 && prev[u] > 6) ?
                                (prev[l], 6, prev, (((6-prev[l])/(prev[u]-prev[l]))*prev) + ((prev[u]-6)*prev[l]/(prev[u]-prev[l])))
                            :
                                (0, 6, 0, 6)
                            )
                        )
                    )
                )
            )
        );
}

2025-06-12 02:59:27,857 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:59:27,926 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ?
            (6, 6, 6, 6)
        : (prev[u] <= 0) ?
            (0, 0, 0, 0)
        : (prev[l] >= 0 && prev[u] <= 6) ?
            (prev[l], prev[u], prev, prev)
        : (prev[l] < 0 && prev[u] > 6) ?
            (0, 6, 0, prev * (6-prev[l])/(prev[u]-prev[l]) - (prev[l]*6)/(prev[u]-prev[l]))
        : (prev[l] < 0) ?
            (0, prev[u], 0, prev * prev[u]/(prev[u]-prev[l]))
        : /* prev[u] > 6 */
            (prev[l], 6, prev, prev * (6-prev[l])/(prev[u]-prev[l]) + ((prev[u]-6)*prev[l])/(prev[u]-prev[l]));
}

2025-06-12 02:59:27,926 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:59:28,004 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l])) :
        (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, ((6 - prev[l]) / (prev[u] - prev[l])) * prev + (prev[u] * (6 - prev[l])) / (prev[u] - prev[l]))) :
        (0, 6, 0, min( (prev[u] / (prev[u] - prev[l])) * prev - (prev[u] * prev[l]) / (prev[u] - prev[l]), ((6 - prev[l]) / (prev[u] - prev[l])) * prev + (prev[u] * (6 - prev[l])) / (prev[u] - prev[l]) ) );
}

2025-06-12 02:59:28,004 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:59:28,004 - INFO - [STEP 1] All 3 samples failed validation. Retrying 7/10...
2025-06-12 02:59:52,509 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ? (6, 6, 6, 6)
        : ((prev[u]) <= 0) ? (0, 0, 0, 0)
        : ((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev)
        : ((prev[l]) < 0 && (prev[u]) <= 6) ? (
            0,
            prev[u],
            0,
            (prev[u]/(prev[u] - prev[l])) * prev - ((prev[u]*prev[l])/(prev[u] - prev[l]))
        )
        : ((prev[l]) >= 0 && (prev[u]) > 6) ? (
            prev[l] > 6 ? 6 : prev[l],
            6,
            prev > 6 ? 6 : prev,
            prev + ((6 - prev[u])/(prev[u] - prev[l])) * (prev - prev[u])
        )
        : (
            0,
            6,
            0,
            let k = 6/(prev[u] - prev[l]);
            k * (prev - prev[l])
        );
}

2025-06-12 02:59:52,509 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 02:59:52,612 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
      (prev[l] >= 6) ? (6, 6, 6, 6) :
      (prev[u] <= 0) ? (0, 0, 0, 0) :
      (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
      (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
      (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, prev + ((6 - prev[u]) / (prev[u] - prev[l])) * (prev - prev[l])) :
      (0, 6, 0, ((6 - prev[l]) / (prev[u] - prev[l])) * prev - ((prev[l] * 6) / (prev[u] - prev[l])));
}

2025-06-12 02:59:52,612 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 02:59:52,692 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0) :
        ((prev[l]) >= 6) ? (6, 6, 6, 6) :
        ((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev) :
        ((prev[l]) < 0 && (prev[u]) <= 6) ? (0, prev[u], 0, (((prev[u]) / ((prev[u]) - (prev[l]))) * (prev)) - (((prev[u]) * (prev[l])) / ((prev[u]) - (prev[l])))) :
        ((prev[l]) >= 0 && (prev[u]) > 6) ? (prev[l], 6, prev, (((6 - prev[l]) / (prev[u] - prev[l])) * (prev)) + ((prev[u] - 6) / (prev[u] - prev[l])) * 6) :
        (0, 6, 0, min((((prev[u]) / ((prev[u]) - (prev[l]))) * (prev)) - (((prev[u]) * (prev[l])) / ((prev[u]) - (prev[l]))), (((6 - prev[l]) / (prev[u] - prev[l])) * (prev)) + ((prev[u] - 6) / (prev[u] - prev[l])) * 6));
}

2025-06-12 02:59:52,692 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 02:59:52,692 - INFO - [STEP 1] All 3 samples failed validation. Retrying 8/10...
2025-06-12 03:00:09,897 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 44, in run_verifier_from_str
    astTC.ASTTC().visit(ast)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 93, in visit
    return self.visitProg(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 832, in visitProg
    self.visit(node.stmt)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 811, in visitSeq
    self.visit(node.stmt1)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 89, in visit
    return self.visitSeq(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 812, in visitSeq
    self.visit(node.stmt2)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 75, in visit
    return self.visitTransformer(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 728, in visitTransformer
    self.visit(node.oplist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 73, in visit
    return self.visitOpList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 709, in visitOpList
    self.visit(s)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 71, in visit
    return self.visitOpStmt(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 694, in visitOpStmt
    self.visit(node.ret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 647, in visitTransRetIf
    self.visit(node.fret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 69, in visit
    return self.visitTransRetIf(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 646, in visitTransRetIf
    self.visit(node.tret)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 67, in visit
    return self.visitTransRetBasic(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 636, in visitTransRetBasic
    rettype = self.visit(node.exprlist)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 13, in visit
    return self.visitExprList(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 152, in visitExprList
    listtype.append(self.visit(e))
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astVisitor.py", line 23, in visit
    return self.visitMaxOp(node)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astTC.py", line 329, in visitMaxOp
    raise TypeMismatchException(node.op + " is not defined on " + str(exp1type) + " and " + str(exp2type))
constraintflow.core.astTC.TypeMismatchException: min is not defined on Neuron and Int

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[u]) <= 0) ? (0, 0, 0, 0)
        : (((prev[l]) >= 6) ? (6, 6, 6, 6)
        : (((prev[l]) >= 0) ? ((prev[l]), min(prev[u], 6), prev, min(prev, 6))
        : (((prev[u]) <= 6) ? (0, (prev[u]), 0, prev)
        : (0, 6, 0,
            ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))
          )
        )));
}

2025-06-12 03:00:09,897 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 03:00:09,975 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l]) >= 6) ? (6, 6, 6, 6)
        : ((prev[u]) <= 0) ? (0, 0, 0, 0)
        : ((prev[l]) >= 0 && (prev[u]) <= 6) ? (prev[l], prev[u], prev, prev)
        : ((prev[l]) < 0 && (prev[u]) > 6) ? (
            0,
            6,
            0,
            ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))  // upper poly same as relu, but will be clamped
        )
        : ((prev[l]) < 0 && (prev[u]) <= 6) ? (
            0,
            prev[u],
            0,
            ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l]))
        )
        : ((prev[l]) >= 0 && (prev[u]) > 6) ? (
            prev[l],
            6,
            prev,
            ((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + prev[l]
        )
        : (0, 6, 0, 6);
}

2025-06-12 03:00:09,975 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 03:00:10,048 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6) ? (6, 6, 6, 6) :
            (prev[u] <= 0) ? (0, 0, 0, 0) :
            (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
            (prev[l] < 0 && prev[u] <= 6) ? (0, prev[u], 0, (prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l]))) :
            (prev[l] >= 0 && prev[u] > 6) ? (prev[l], 6, prev, ((6 - prev[l])/(prev[u] - prev[l])) * (prev - prev[l]) + prev[l]) :
            (0, 6, 0, min((prev[u] / (prev[u] - prev[l])) * prev - ((prev[u] * prev[l]) / (prev[u] - prev[l])), ((6 - prev[l])/(prev[u] - prev[l])) * (prev - prev[l]) + prev[l]))
        );
}

2025-06-12 03:00:10,048 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 03:00:10,048 - INFO - [STEP 1] All 3 samples failed validation. Retrying 9/10...
2025-06-12 03:00:26,607 - WARNING - [STEP 1] Sample 1: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6)
        : ((prev[u] <= 0)) ?
            (0, 0, 0, 0)
        : ((prev[l] >= 0) && (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < 0) && (prev[u] > 6)) ?
            (0, 6, 0, prev * (6 / (prev[u] - prev[l])) - (prev[l]*6) / (prev[u] - prev[l]))
        : ((prev[l] < 0) && (prev[u] <= 6)) ?
            (0, prev[u], 0, prev * (prev[u] / (prev[u] - prev[l])) - (prev[u]*prev[l]) / (prev[u] - prev[l]))
        : ((prev[l] >= 0) && (prev[u] > 6)) ?
            (prev[l], 6, prev, prev + (6 - prev[u]))
        : (0, 6, 0, 6);
}

2025-06-12 03:00:26,607 - INFO - [STEP 1] Sample 1: Validation failed.
2025-06-12 03:00:26,800 - WARNING - [STEP 1] Sample 2: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        ((prev[l] >= 6)) ?
            (6, 6, 6, 6)
        : ((prev[u] <= 0)) ?
            (0, 0, 0, 0)
        : ((prev[l] >= 0) & (prev[u] <= 6)) ?
            (prev[l], prev[u], prev, prev)
        : ((prev[l] < 0) & (prev[u] <= 6)) ?
            (0, prev[u], 0, ((prev[u] / (prev[u] - prev[l])) * prev) - ((prev[u] * prev[l]) / (prev[u] - prev[l])))
        : ((prev[l] >= 0) & (prev[u] > 6)) ?
            (prev[l], 6, prev, ((6 - prev[l]) / (prev[u] - prev[l])) * (prev - prev[l]) + prev[l])
        : (0, 6, 0, 6);
}

2025-06-12 03:00:26,800 - INFO - [STEP 1] Sample 2: Validation failed.
2025-06-12 03:00:27,051 - WARNING - [STEP 1] Sample 3: Validator exception. Full traceback:
Traceback (most recent call last):
  File "/home/qiuhan/constraintsflow_patch/generation/chat.py", line 182, in step_by_step_gen
    result, ce = step.validator(code)
  File "/home/qiuhan/constraintsflow_patch/generation/validator/validate_dsl.py", line 34, in constraintflow_validator
    return run_verifier_from_str(dsl)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/experiments/experiments_correct.py", line 43, in run_verifier_from_str
    ast = astBuilder.ASTBuilder().visit(tree)
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 382, in accept
    return visitor.visitProg(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 19, in visitProg
    stmt = self.visit(ctx.statement())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 42, in visitSeqstmt
    stmt1 = self.visit(ctx.statement(0))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 609, in accept
    return visitor.visitSeqstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 43, in visitSeqstmt
    stmt2 = self.visit(ctx.statement(1))
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 634, in accept
    return visitor.visitTransstmt(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 47, in visitTransstmt
    return self.visit(ctx.transformer())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 828, in accept
    return visitor.visitTransformer(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 55, in visitTransformer
    op_list = self.visit(ctx.op_list())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/dslParser.py", line 887, in accept
    return visitor.visitOp_list(self)
  File "/home/qiuhan/constraintsflow_patch/constraintflow/core/astBuilder.py", line 64, in visitOp_list
    stmt = self.visit(ctx.op_stmt())
  File "/apps/conda/qiuhan/envs/llm/lib/python3.10/site-packages/antlr4/tree/Tree.py", line 34, in visit
    return tree.accept(self)
AttributeError: 'NoneType' object has no attribute 'accept'

Code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] < 0 && prev[u] <= 6) ? (
            0,
            prev[u],
            0,
            ((prev[u])/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l]))
        ) :
        (prev[l] >= 0 && prev[u] > 6) ? (
            prev[l] < 6 ? (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l]))*prev + (prev[u]-6)/(prev[u]-prev[l])*6 ) : (6, 6, 6, 6)
        ) :
        (
            0,
            6,
            0,
            let slope1 = prev[u]/(prev[u]-prev[l]);
            let bias1 = -prev[u]*prev[l]/(prev[u]-prev[l]);
            let slope2 = (6-prev[l])/(prev[u]-prev[l]);
            let bias2 = (prev[u]-6)/(prev[u]-prev[l])*6;
            min( slope1*prev + bias1, slope2*prev + bias2 )
        );
}

2025-06-12 03:00:27,052 - INFO - [STEP 1] Sample 3: Validation failed.
2025-06-12 03:00:27,052 - INFO - [STEP 1] All 3 samples failed validation. Retrying 10/10...
2025-06-12 03:00:27,052 - INFO - [Relu6] Runtime: 201.18 seconds
2025-06-12 03:00:27,052 - ERROR - Failed with Error:[STEP 1] Failed after 10 retries.
 during generating code:
transformer deeppoly{
    Relu6 ->
        (prev[l] >= 6) ? (6, 6, 6, 6) :
        (prev[l] >= 0 && prev[u] <= 6) ? (prev[l], prev[u], prev, prev) :
        (prev[u] <= 0) ? (0, 0, 0, 0) :
        (prev[l] < 0 && prev[u] <= 6) ? (
            0,
            prev[u],
            0,
            ((prev[u])/(prev[u]-prev[l]))*prev - ((prev[u]*prev[l])/(prev[u]-prev[l]))
        ) :
        (prev[l] >= 0 && prev[u] > 6) ? (
            prev[l] < 6 ? (prev[l], 6, prev, ((6-prev[l])/(prev[u]-prev[l]))*prev + (prev[u]-6)/(prev[u]-prev[l])*6 ) : (6, 6, 6, 6)
        ) :
        (
            0,
            6,
            0,
            let slope1 = prev[u]/(prev[u]-prev[l]);
            let bias1 = -prev[u]*prev[l]/(prev[u]-prev[l]);
            let slope2 = (6-prev[l])/(prev[u]-prev[l]);
            let bias2 = (prev[u]-6)/(prev[u]-prev[l])*6;
            min( slope1*prev + bias1, slope2*prev + bias2 )
        );
}

2025-06-12 03:00:27,054 - INFO -  Total runtime for all operators: 1678.70 seconds
